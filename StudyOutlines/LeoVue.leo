<?xml version="1.0" encoding="utf-8"?>
<!-- Created by Leo: http://leoeditor.com/leo_toc.html -->
<leo_file xmlns:leo="http://leoeditor.com/namespaces/leo-python-editor/1.1" >
<leo_header file_format="2"/>
<globals/>
<preferences/>
<find_panel_settings/>
<vnodes>
<v t="ekr.20180213112913.1"><vh>Startup</vh>
<v t="ekr.20180213125318.1"><vh>@button backup</vh></v>
<v t="ekr.20180213112918.1"><vh>@settings</vh>
<v t="ekr.20180213112925.1"><vh>@int tab_width = -2</vh></v>
</v>
</v>
<v t="ekr.20180130165105.1"><vh>Recursive import script</vh></v>
<v t="ekr.20180828135907.1"><vh>Notes</vh></v>
<v t="ekr.20201224071854.1"><vh>Other files</vh>
<v t="ekr.20201121054023.1"><vh>@@clean index.html</vh>
<v t="ekr.20201121054023.2"><vh>&lt;&lt;head&gt;&gt;</vh>
<v t="ekr.20201121054222.1"><vh>&lt;&lt; set window.lconfig &gt;&gt;</vh></v>
</v>
<v t="ekr.20201121054023.3"><vh>&lt;&lt; body &gt;&gt;</vh>
<v t="ekr.20201121054023.4"><vh>&lt;&lt; static footer &gt;&gt;</vh></v>
<v t="ekr.20201121054023.5"><vh>&lt;&lt; templates &gt;&gt;</vh>
<v t="ekr.20201121054023.6"><vh>&lt;&lt; rgarticle &gt;&gt;</vh></v>
<v t="ekr.20201121054023.7"><vh>&lt;&lt; rgarticle-brief &gt;&gt;</vh></v>
<v t="ekr.20201121054023.8"><vh>&lt;&lt; repec &gt;&gt;</vh></v>
<v t="ekr.20201121054023.9"><vh>&lt;&lt; rgauthor &gt;&gt;</vh></v>
<v t="ekr.20201121054023.10"><vh>&lt;&lt; rgarticles &gt;&gt;</vh></v>
<v t="ekr.20201121054023.11"><vh>&lt;&lt; repec-articles &gt;&gt;</vh></v>
<v t="ekr.20201121054023.12"><vh>&lt;&lt; rgcitiations &gt;&gt;</vh></v>
</v>
<v t="ekr.20201121054023.13"><vh>&lt;&lt; global site tag &gt;&gt;</vh></v>
<v t="ekr.20201121054023.14"><vh>&lt;&lt; style &gt;&gt;</vh></v>
</v>
</v>
<v t="ekr.20180824114057.2"><vh>repo/leovue</vh>
<v t="ekr.20180824114057.3"><vh>@@clean .eslintrc.js</vh></v>
<v t="ekr.20180824114057.4"><vh>@@clean .postcssrc.js</vh></v>
<v t="ekr.20201121061450.1"><vh>@@edit package.json</vh></v>
</v>
<v t="ekr.20180824113819.2"><vh>leovue/config</vh>
<v t="ekr.20180824113819.3"><vh>@@clean dev.env.js</vh></v>
<v t="ekr.20180824113819.4"><vh>@@clean index.js</vh></v>
<v t="ekr.20180824113819.5"><vh>@@clean prod.env.js</vh></v>
<v t="ekr.20180824113819.6"><vh>@@clean test.env.js</vh></v>
</v>
<v t="ekr.20180824113325.2"><vh>leovue/build</vh>
<v t="ekr.20180824113325.3"><vh>@@clean build.js</vh>
<v t="ekr.20180824113325.4"><vh>webpack(webpackConfig, function</vh></v>
</v>
<v t="ekr.20180824113325.5"><vh>@@clean check-versions.js</vh>
<v t="ekr.20180824113325.6"><vh>function exec</vh></v>
<v t="ekr.20201121054655.1"><vh>var versionRequirements</vh></v>
<v t="ekr.20180824113325.7"><vh>module.exports = function</vh></v>
</v>
<v t="ekr.20180824113325.8"><vh>@@clean dev-client.js</vh></v>
<v t="ekr.20180824113325.10"><vh>@@clean dev-server.js</vh>
<v t="ekr.20180824113325.11"><vh>compiler.plugin('compilation'</vh></v>
<v t="ekr.20180824113325.13"><vh>Object.keys(proxyTable).forEach</vh></v>
<v t="ekr.20180824113325.14"><vh>devMiddleware.waitUntilValid</vh></v>
<v t="ekr.20180824113325.15"><vh>module.exports = app.listen</vh></v>
</v>
<v t="ekr.20180824113325.16"><vh>@@clean utils.js</vh>
<v t="ekr.20180824113325.17"><vh>exports.assetsPath</vh></v>
<v t="ekr.20180824113325.18"><vh>exports.cssLoaders</vh></v>
<v t="ekr.20180824113325.20"><vh>exports.styleLoaders</vh></v>
</v>
<v t="ekr.20180824113325.21"><vh>@@clean vue-loader.conf.js</vh></v>
<v t="ekr.20180824113325.22"><vh>@@clean webpack.base.conf.js</vh>
<v t="ekr.20180824113325.23"><vh>function resolve</vh></v>
<v t="ekr.20201121055257.1"><vh>module.exports (entry, output, resolve, module)</vh></v>
</v>
<v t="ekr.20180824113325.24"><vh>@@clean webpack.dev.conf.js</vh>
<v t="ekr.20180824113325.25"><vh>Object.keys(baseWebpackConfig.entry)</vh></v>
<v t="ekr.20201121055514.1"><vh>module.exports (module, devtool, plugins)</vh></v>
</v>
<v t="ekr.20180824113325.26"><vh>@@clean webpack.prod.conf.js</vh>
<v t="ekr.20201121055856.1"><vh>&lt;&lt; plugins &gt;&gt;</vh></v>
</v>
<v t="ekr.20180824113325.28"><vh>@@clean webpack.test.conf.js</vh></v>
</v>
</v>
<v t="ekr.20180130165259.2"><vh>leovue/src</vh>
<v t="ekr.20180213115426.1"><vh>top level</vh>
<v t="ekr.20180130165259.3"><vh>@@clean App.vue</vh>
<v t="ekr.20201121174320.1"><vh>&lt;&lt; export default &gt;&gt;</vh>
<v t="ekr.20180213123441.1"><vh>&lt;&lt; drag methods &gt;&gt;</vh></v>
</v>
<v t="ekr.20201121174232.1"><vh>&lt;&lt; sass style sheet &gt;&gt;</vh></v>
</v>
<v t="ekr.20180130165259.4"><vh>@@clean AppBase.vue</vh>
<v t="ekr.20180213124318.1"><vh>&lt;&lt; value &gt;&gt;</vh></v>
</v>
<v t="ekr.20180130165259.5"><vh>@@clean main.js</vh>
<v t="ekr.20180130165640.1"><vh>&lt;&lt; imports &gt;&gt; (main.js)</vh></v>
<v t="ekr.20180130165748.1"><vh>&lt;&lt; components &gt;&gt;</vh></v>
</v>
<v t="ekr.20180130165259.6"><vh>@@clean simpledrag.js</vh>
<v t="ekr.20180130165259.7"><vh>(function ()</vh>
<v t="ekr.20180130165259.8"><vh>function move (e)</vh></v>
<v t="ekr.20180130165259.9"><vh>function startDragging (e)</vh></v>
<v t="ekr.20180130165259.10"><vh>window.addEventListener('mouseup', function (e)</vh></v>
</v>
</v>
<v t="ekr.20180130165259.11"><vh>@@clean util.js</vh>
<v t="ekr.20180130165259.12"><vh>function replaceRelUrls</vh></v>
<v t="ekr.20180130165259.13"><vh>function getFileExtension</vh></v>
<v t="ekr.20180130165259.14"><vh>function getLanguage</vh></v>
<v t="ekr.20180130165259.15"><vh>function removeFirstLine</vh></v>
<v t="ekr.20180130165259.16"><vh>function parseQueryString</vh></v>
<v t="ekr.20180130165259.17"><vh>function formatText</vh></v>
<v t="ekr.20180130165259.18"><vh>function getObjectByKeyFromTree</vh></v>
</v>
</v>
<v t="ekr.20180130165259.19"><vh>@path components</vh>
<v t="ekr.20180130165259.20"><vh>@@clean AccordionViewer.vue</vh></v>
<v t="ekr.20180130165259.21"><vh>@@clean ContentPane.vue</vh>
<v t="ekr.20180213124834.1"><vh>&lt;&lt; functions &gt;&gt;</vh></v>
<v t="ekr.20180213125015.1"><vh>&lt;&lt; default components &gt;&gt;</vh></v>
</v>
<v t="ekr.20180130165259.22"><vh>@@clean D3Viewer.vue</vh></v>
<v t="ekr.20180130165259.23"><vh>@@clean Dashboard.vue</vh></v>
<v t="ekr.20180130165259.24"><vh>@@clean Header.vue</vh></v>
<v t="ekr.20180130165259.25"><vh>@@clean Item.vue</vh></v>
<v t="ekr.20180130165259.26"><vh>@@clean MathJax.vue</vh></v>
<v t="ekr.20180130165259.27"><vh>@@clean NestedViewer.vue</vh></v>
<v t="ekr.20180130165259.28"><vh>@@clean NodeLink.vue</vh></v>
<v t="ekr.20180130165259.29"><vh>@@clean SearchBar.vue</vh></v>
<v t="ekr.20180130165259.30"><vh>@@clean SectionLink.vue</vh></v>
<v t="ekr.20180130165259.31"><vh>@@clean Settings.vue</vh></v>
<v t="ekr.20180130165259.32"><vh>@@clean SplitPane.vue</vh></v>
<v t="ekr.20180130165259.33"><vh>@@clean Table.vue</vh></v>
<v t="ekr.20180130165259.34"><vh>@@clean TreeViewer.vue</vh></v>
<v t="ekr.20180130165259.35"><vh>@@clean viewgrid.js</vh>
<v t="ekr.20180214204020.1"><vh>app.config</vh>
<v t="ekr.20180130165259.36"><vh>&lt;&lt; provider &gt;&gt;</vh>
<v t="ekr.20180130165259.37"><vh>var db</vh></v>
<v t="ekr.20180130165259.38"><vh>var setCurrentRow = function</vh></v>
<v t="ekr.20180130165259.39"><vh>var executeViewgrid = function</vh>
<v t="ekr.20180130165259.40"><vh>itemTemplate: function (value, item)</vh></v>
<v t="ekr.20180130165259.41"><vh>rowClick: function(r)</vh></v>
<v t="ekr.20180130165259.42"><vh>$timeout(function ()</vh></v>
</v>
<v t="ekr.20180130165259.43"><vh>var loadDataFromEvent = function</vh></v>
<v t="ekr.20180130165259.44"><vh>$scope.component.viewgridData.dataInputObject.forEach(function(key)</vh></v>
<v t="ekr.20180130165259.45"><vh>var processResult = function</vh>
<v t="ekr.20180130165259.46"><vh>_.each (viewgridData.dataDisplayObject, function (r)</vh></v>
<v t="ekr.20180130165259.47"><vh>var fields = viewgridData.dataDisplayObject.reduce(function(acc, r)</vh></v>
<v t="ekr.20180130165259.48"><vh>var fieldIds = fields.reduce(function(acc, f)</vh></v>
<v t="ekr.20180130165259.49"><vh>db.records = result.data.reduce(function(acc, v)</vh>
<v t="ekr.20180130165259.50"><vh>_.each(row, function (value, key)</vh></v>
<v t="ekr.20180130165259.51"><vh>_.each(formulaFields, function (r)</vh></v>
</v>
</v>
<v t="ekr.20180130165259.52"><vh>$scope.dummy = function</vh></v>
</v>
</v>
<v t="ekr.20180130165259.53"><vh>app.directive</vh>
<v t="ekr.20180130165259.54"><vh>link: function</vh>
<v t="ekr.20180130165259.55"><vh>FormioUtils.eachComponent(scope.$parent.form.components, function(component)</vh></v>
<v t="ekr.20180130165259.56"><vh>scope.saveData = function()</vh></v>
<v t="ekr.20180130165259.57"><vh>function getTableData(hotTable)</vh></v>
<v t="ekr.20180130165259.58"><vh>scope.loadData = function(viewgridData)</vh></v>
<v t="ekr.20180130165259.59"><vh>angular.element(function ()</vh></v>
</v>
<v t="ekr.20180130165259.60"><vh>controller:</vh></v>
</v>
<v t="ekr.20180130165259.61"><vh>app.run</vh></v>
<v t="ekr.20180214203133.1"><vh>app.run</vh></v>
</v>
<v t="ekr.20180130165259.63"><vh>@@clean VueInstant.vue</vh></v>
<v t="ekr.20180130165259.64"><vh>@path layout</vh>
<v t="ekr.20180130165259.65"><vh>@@clean ImageLeft.vue</vh></v>
</v>
</v>
<v t="ekr.20180130165259.66"><vh>@path content-components</vh>
<v t="ekr.20180130165259.67"><vh>@@clean Charts.js</vh>
<v t="ekr.20180130165259.68"><vh>function extractOptionColumns</vh></v>
<v t="ekr.20180130165259.69"><vh>function extractColumn</vh></v>
<v t="ekr.20180130165259.70"><vh>function dataTableToDataSet</vh></v>
<v t="ekr.20180130165259.71"><vh>function charts</vh>
<v t="ekr.20180213112824.1"><vh>&lt;&lt; getChartOptions &gt;&gt;</vh></v>
</v>
</v>
<v t="ekr.20180130165259.72"><vh>@@clean Mermaid.vue</vh></v>
<v t="ekr.20180130165259.73"><vh>@@clean MermaidP.vue</vh></v>
<v t="ekr.20180130165259.74"><vh>@@clean VCTable.vue</vh></v>
<v t="ekr.20180130165259.75"><vh>@@clean VSVG.vue</vh></v>
</v>
<v t="ekr.20180130165259.76"><vh>@path lib</vh>
<v t="ekr.20180130165259.77"><vh>@@clean circular-layout.js</vh></v>
<v t="ekr.20180130165259.78"><vh>@@clean d3-utils.js</vh>
<v t="ekr.20180130165259.79"><vh>function compareString (a, b)</vh></v>
<v t="ekr.20180130165259.80"><vh>function anchorTodx (d, el)</vh></v>
<v t="ekr.20180130165259.81"><vh>function findInParents (node, nodes)</vh></v>
<v t="ekr.20180130165259.82"><vh>function toPromise (transition)</vh></v>
</v>
<v t="ekr.20180130165259.83"><vh>@@clean D3tree.vue</vh></v>
<v t="ekr.20180130165259.84"><vh>@@clean defiant.js</vh>
<v t="ekr.20180130165259.85"><vh>(function(window, undefined)</vh>
<v t="ekr.20180130165259.86"><vh>init: function()</vh></v>
<v t="ekr.20180130165259.87"><vh>work_handler: function(event)</vh></v>
<v t="ekr.20180130165259.88"><vh>setup: function(tree)</vh></v>
<v t="ekr.20180130165259.89"><vh>call_handler: function(func, worker)</vh></v>
<v t="ekr.20180130165259.90"><vh>compile: function(hash)</vh></v>
<v t="ekr.20180130165259.91"><vh>parse: function(tree, isArray)</vh></v>
<v t="ekr.20180130165259.92"><vh>observer: (function()</vh>
<v t="ekr.20180130165259.93"><vh>on: function(type, fn)</vh></v>
<v t="ekr.20180130165259.94"><vh>off: function(type, fn)</vh></v>
<v t="ekr.20180130165259.95"><vh>emit: function(type, detail)</vh></v>
</v>
</v>
<v t="ekr.20180130165259.96"><vh>(function(window, module, undefined)</vh>
<v t="ekr.20180130165259.97"><vh>render: function(template, data)</vh></v>
<v t="ekr.20180130165259.98"><vh>gatherTemplates: function()</vh></v>
<v t="ekr.20180130165259.99"><vh>getSnapshot: function(data, callback)</vh></v>
<v t="ekr.20180130165259.100"><vh>xmlFromString: function(str)</vh></v>
<v t="ekr.20180130165259.101"><vh>extend: function(src, dest)</vh></v>
</v>
<v t="ekr.20180130165259.102"><vh>importStylesheet: function(xsldoc)</vh></v>
<v t="ekr.20180130165259.103"><vh>transformToFragment: function(data, doc)</vh></v>
<v t="ekr.20180130165259.104"><vh>String.prototype.fill = function(i,c)</vh></v>
<v t="ekr.20180130165259.105"><vh>String.prototype.trim = function ()</vh></v>
<v t="ekr.20180130165259.106"><vh>String.prototype.xTransform = function ()</vh></v>
<v t="ekr.20180130165259.107"><vh>stringify: function (vContent)</vh></v>
<v t="ekr.20180130165259.108"><vh>JSON.toXML = function(tree, callback)</vh>
<v t="ekr.20180130165259.109"><vh>to_xml_str: function(tree)</vh></v>
<v t="ekr.20180130165259.110"><vh>hash_to_xml: function(name, tree, array_child)</vh></v>
<v t="ekr.20180130165259.111"><vh>scalar_to_xml: function(name, val, override)</vh></v>
<v t="ekr.20180130165259.112"><vh>escape_xml: function(text)</vh></v>
<v t="ekr.20180130165259.113"><vh>task.to_xml_str(tree, function(processed)</vh></v>
</v>
<v t="ekr.20180130165259.114"><vh>JSON.search = function(tree, xpath, single)</vh></v>
<v t="ekr.20180130165259.115"><vh>JSON.mtrace = function(root, hits, xres)</vh></v>
<v t="ekr.20180130165259.116"><vh>Defiant.node.selectNodes = function(XNode, XPath)</vh></v>
<v t="ekr.20180130165259.117"><vh>Defiant.node.selectSingleNode = function(XNode, XPath)</vh></v>
<v t="ekr.20180130165259.118"><vh>Defiant.node.prettyPrint = function(node)</vh></v>
<v t="ekr.20180130165259.119"><vh>Defiant.node.toJSON = function(xnode, stringify)</vh></v>
<v t="ekr.20180130165259.120"><vh>(function ( $ )</vh></v>
</v>
<v t="ekr.20180130165259.121"><vh>@@clean euclidean-layout.js</vh></v>
<v t="ekr.20180130165259.122"><vh>@@clean MathJax.js</vh></v>
<v t="ekr.20180130165259.123"><vh>@@clean presentation.js (reveal.js)</vh>
<v t="ekr.20180130165259.124"><vh>function presentation(name, content, index, theme, codeTheme)</vh></v>
</v>
<v t="ekr.20180130165259.125"><vh>@@clean VueInstant.vue</vh></v>
</v>
<v t="ekr.20180130165259.127"><vh>@@clean router/index.js</vh>
<v t="ekr.20180213122919.1"><vh>&lt;&lt; imports &gt;&gt;</vh></v>
<v t="ekr.20180213122750.1"><vh>&lt;&lt; routes &gt;&gt;</vh></v>
</v>
<v t="ekr.20180130165259.129"><vh>@@clean services/leo.js</vh>
<v t="ekr.20180213114346.1"><vh>&lt;&lt; xslTemplate &gt;&gt;</vh></v>
<v t="ekr.20180130165259.138"><vh>function getLeoJSON &amp; helpers</vh>
<v t="ekr.20180130165259.137"><vh>function isRelative</vh></v>
<v t="ekr.20180130165259.133"><vh>function loadDoc</vh></v>
</v>
<v t="ekr.20180130165259.130"><vh>function transform</vh>
<v t="ekr.20180130165259.131"><vh>function serverTransform</vh></v>
<v t="ekr.20180130165259.132"><vh>function clientTransform</vh></v>
</v>
<v t="ekr.20180130165259.141"><vh>function transformLeoXML &amp; helpers</vh>
<v t="ekr.20180130165259.136"><vh>function cleanText</vh></v>
<v t="ekr.20180130165259.140"><vh>function transformLeoXML2JSON</vh></v>
</v>
<v t="ekr.20180130165259.139"><vh>function transformLeoXML2XML</vh>
<v t="ekr.20201224073436.1"><vh>&lt;&lt; Create the parser &gt;&gt;</vh></v>
<v t="ekr.20201224073243.1"><vh>&lt;&lt; Create tnodes in textItems &gt;&gt;</vh></v>
<v t="ekr.20201224073343.1"><vh>&lt;&lt; Create vnodes &gt;&gt;</vh></v>
</v>
</v>
<v t="ekr.20180130165259.143"><vh>@@clean store/index.js</vh>
<v t="ekr.20180130165259.144"><vh>function loadIndex &amp; helper</vh>
<v t="ekr.20180130165259.145"><vh>function loadIndexItems</vh></v>
</v>
<v t="ekr.20180130165259.146"><vh>function showText</vh></v>
<v t="ekr.20180130165259.147"><vh>function getRoots</vh></v>
<v t="ekr.20180130165259.148"><vh>function isRelative</vh></v>
<v t="ekr.20180130165259.149"><vh>function chop (s, c)</vh></v>
<v t="ekr.20180130165259.150"><vh>function loadLeoNode &amp; helper</vh></v>
<v t="ekr.20180130165259.151"><vh>function getUrlFromTitle (common helper)</vh></v>
<v t="ekr.20180130165259.152"><vh>function showPresentation</vh></v>
<v t="ekr.20180130165259.153"><vh>function showSite</vh></v>
<v t="ekr.20180130165259.154"><vh>function setSiteItem</vh></v>
<v t="ekr.20180130165259.155"><vh>function setData</vh></v>
<v t="ekr.20180130165259.156"><vh>function loadPresentations</vh>
<v t="ekr.20180130165259.157"><vh>function loadPresentation (id, pages)</vh></v>
</v>
<v t="ekr.20180130165259.158"><vh>function loadSubtrees</vh></v>
<v t="ekr.20180130165259.159"><vh>function setLanguageNodes</vh>
<v t="ekr.20180130165259.160"><vh>function setLanguageNode (context, d, textItems)</vh></v>
</v>
<v t="ekr.20180130165259.161"><vh>function addDirectiveToSubTree</vh></v>
<v t="ekr.20180130165259.162"><vh>function loadDataSets &amp; helper</vh>
<v t="ekr.20180130165259.163"><vh>function loadDataSet (context, item, textItems)</vh></v>
</v>
<v t="ekr.20180130165259.164"><vh>function loadDataTables &amp; helper</vh>
<v t="ekr.20180130165259.165"><vh>function loadDataTable</vh></v>
</v>
<v t="ekr.20180213120602.1"><vh>The store</vh>
<v t="ekr.20180213121112.1"><vh>&lt;&lt; state &gt;&gt;</vh></v>
<v t="ekr.20180213121149.1"><vh>&lt;&lt; mutations &gt;&gt;</vh></v>
<v t="ekr.20180213120954.1"><vh>&lt;&lt; actions &gt;&gt;</vh>
<v t="ekr.20180213121732.1"><vh>setMessages</vh></v>
<v t="ekr.20180213121735.1"><vh>loadLeo (store/index.js)</vh></v>
<v t="ekr.20180213121735.2"><vh>loadLeoFromXML</vh></v>
<v t="ekr.20180213121736.1"><vh>setContentItems</vh></v>
<v t="ekr.20180213121901.1"><vh>setCurrentPage</vh></v>
<v t="ekr.20180213121901.2"><vh>setCurrentItem</vh></v>
</v>
</v>
</v>
</v>
<v t="ekr.20201224071404.1"><vh>----- Loading .leo files</vh></v>
<v t="ekr.20180130165259.129"></v>
</vnodes>
<tnodes>
<t tx="ekr.20180130165105.1">'''Recursively import all python files in a directory and clean the result.'''
@tabwidth -1 # For a better match.
g.cls()
c.recursiveImport(
    dir_ = r'C:\leo.repo\leovue\config',
    kind = '@clean', # '@auto', '@clean', '@nosent','@file',
    recursive = True,
    safe_at_file = True,
    theTypes = ['.js','.vue',],
)
</t>
<t tx="ekr.20180130165259.10">window.addEventListener('mouseup', function (e) {
  if (true === dragging) {
    dragging = false
    window.removeEventListener('mousemove', move)
    onStop &amp;&amp; onStop(el, e.pageX, startX, e.pageY, startY)
  }
})
</t>
<t tx="ekr.20180130165259.100">xmlFromString: function(str) {
  var parser,
    doc;
  str = str.replace(/&gt;\s{1,}&lt;/g, '&gt;&lt;');
  if (str.trim().match(/&lt;\?xml/) === null) {
    str = this.xml_decl + str;
  }
  if (typeof(ActiveXObject) != 'undefined') {
    doc = new ActiveXObject('Msxml2.DOMDocument');
    doc.loadXML(str);
    if (str.indexOf('xsl:stylesheet') === -1) {
      doc.setProperty('SelectionLanguage', 'XPath');
    }
  } else {
    parser = new DOMParser();
    doc = parser.parseFromString(str, 'text/xml');
  }
  return doc;
},
</t>
<t tx="ekr.20180130165259.101">  extend: function(src, dest) {
    for (var content in dest) {
      if (!src[content] || typeof(dest[content]) !== 'object') {
        src[content] = dest[content];
      } else {
        this.extend(src[content], dest[content]);
      }
    }
    return src;
  },
  node: {}
};

// Export
window.Defiant = module.exports = Defiant;

</t>
<t tx="ekr.20180130165259.102">importStylesheet: function(xsldoc) {
  this.xsldoc = xsldoc;
},
</t>
<t tx="ekr.20180130165259.103">    transformToFragment: function(data, doc) {
      var str = data.transformNode(this.xsldoc),
        span = document.createElement('span');
      span.innerHTML = str;
      return span;
    }
  };

} else if (typeof(XSLTProcessor) !== 'function' &amp;&amp; !XSLTProcessor) {

  // throw error
  throw 'XSLTProcessor transformNode not implemented';

}


// extending STRING
if (!String.prototype.fill) {
</t>
<t tx="ekr.20180130165259.104">  String.prototype.fill = function(i,c) {
    var str = this;
    c = c || ' ';
    for (; str.length&lt;i; str+=c){}
    return str;
  };
}

if (!String.prototype.trim) {
</t>
<t tx="ekr.20180130165259.105">  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/gm, '');
  };
}

if (!String.prototype.xTransform) {
</t>
<t tx="ekr.20180130165259.106">  String.prototype.xTransform = function () {
    var str = this;
    if (this.indexOf('translate(') === -1) {
      str = this.replace(/contains\(([^,]+),([^\\)]+)\)/g, function(c,h,n) {
        var a = 'abcdefghijklmnopqrstuvwxyz';
        return "contains(translate("+ h +", \""+ a.toUpperCase() +"\", \""+ a +"\"),"+ n.toLowerCase() +")";
      });
    }
    return str.toString();
  };
}

/* jshint ignore:start */
if (typeof(JSON) === 'undefined') {
  window.JSON = {
    parse: function (sJSON) { return eval("(" + sJSON + ")"); },
</t>
<t tx="ekr.20180130165259.107">    stringify: function (vContent) {
      if (vContent instanceof Object) {
        var sOutput = "";
        if (vContent.constructor === Array) {
          for (var nId = 0; nId &lt; vContent.length; sOutput += this.stringify(vContent[nId]) + ",", nId++);
          return "[" + sOutput.substr(0, sOutput.length - 1) + "]";
        }
        if (vContent.toString !== Object.prototype.toString) {
          return "\"" + vContent.toString().replace(/"/g, "\\$&amp;") + "\"";
        }
        for (var sProp in vContent) {
          sOutput += "\"" + sProp.replace(/"/g, "\\$&amp;") + "\":" + this.stringify(vContent[sProp]) + ",";
        }
        return "{" + sOutput.substr(0, sOutput.length - 1) + "}";
      }
      return typeof vContent === "string" ? "\"" + vContent.replace(/"/g, "\\$&amp;") + "\"" : String(vContent);
    }
  };
}
/* jshint ignore:end */

if (!JSON.toXML) {
</t>
<t tx="ekr.20180130165259.108">  JSON.toXML = function(tree, callback) {
    'use strict';

    var interpreter = {
        map              : [],
        rx_validate_name : /^(?!xml)[a-z_][\w\d.:]*$/i,
        rx_node          : /&lt;(.+?)( .*?)&gt;/,
        rx_constructor   : /&lt;(.+?)( d:contr=".*?")&gt;/,
        rx_namespace     : / xmlns\:d="defiant\-namespace"/,
        rx_data          : /(&lt;.+?&gt;)(.*?)(&lt;\/d:data&gt;)/i,
        rx_function      : /function (\w+)/i,
        namespace        : 'xmlns:d="defiant-namespace"',
        @others
  };
}


if (!JSON.search) {
</t>
<t tx="ekr.20180130165259.109">to_xml_str: function(tree) {
  return {
    str: this.hash_to_xml(null, tree),
    map: this.map
  };
},
</t>
<t tx="ekr.20180130165259.11">import _ from 'lodash'
const hljs = require('highlight.js')
// const pug = require('pug')
const md = require('markdown-it')({
  html: true,
  linkify: true,
  typographer: true
})

@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.110">hash_to_xml: function(name, tree, array_child) {
  var is_array = tree.constructor === Array,
    self = this,
    elem = [],
    attr = [],
    key,
    val,
    val_is_array,
    type,
    is_attr,
    cname,
    constr,
    cnName,
    i,
    il,
    fn = function(key, tree) {
      val = tree[key];
      if (val === null || val === undefined || val.toString() === 'NaN') val = null;

      is_attr = key.slice(0,1) === '@';
      cname   = array_child ? name : key;
      if (cname == +cname &amp;&amp; tree.constructor !== Object) cname = 'd:item';
      if (val === null) {
        constr = null;
        cnName = false;
      } else {
        constr = val.constructor;
        cnName = constr.toString().match(self.rx_function)[1];
      }

      if (is_attr) {
        attr.push( cname.slice(1) +'="'+ self.escape_xml(val) +'"' );
        if (cnName !== 'String') attr.push( 'd:'+ cname.slice(1) +'="'+ cnName +'"' );
      } else if (val === null) {
        elem.push( self.scalar_to_xml( cname, val ) );
      } else {
        switch (constr) {
          case Function:
            // if constructor is function, then it's not a JSON structure
            throw 'JSON data should not contain functions. Please check your structure.';
          /* falls through */
          case Object:
            elem.push( self.hash_to_xml( cname, val ) );
            break;
          case Array:
            if (key === cname) {
              val_is_array = val.constructor === Array;
              if (val_is_array) {
                i = val.length;
                while (i--) {
                  if (val[i] === null || !val[i] || val[i].constructor === Array) val_is_array = true;
                  if (!val_is_array &amp;&amp; val[i].constructor === Object) val_is_array = true;
                }
              }
              elem.push( self.scalar_to_xml( cname, val, val_is_array ) );
              break;
            }
          /* falls through */
          case String:
            if (typeof(val) === 'string') {
              val = val.toString().replace(/\&amp;/g, '&amp;amp;')
                .replace(/\r|\n/g, '&amp;#13;');
            }
            if (cname === '#text') {
              // prepare map
              self.map.push(tree);
              attr.push('d:mi="'+ self.map.length +'"');
              attr.push('d:constr="'+ cnName +'"');
              elem.push( self.escape_xml(val) );
              break;
            }
          /* falls through */
          case Number:
          case Boolean:
            if (cname === '#text' &amp;&amp; cnName !== 'String') {
              // prepare map
              self.map.push(tree);
              attr.push('d:mi="'+ self.map.length +'"');
              attr.push('d:constr="'+ cnName +'"');
              elem.push( self.escape_xml(val) );
              break;
            }
            elem.push( self.scalar_to_xml( cname, val ) );
            break;
        }
      }
    };
  if (tree.constructor === Array) {
    i = 0;
    il = tree.length;
    for (; i&lt;il; i++) {
      fn(i.toString(), tree);
    }
  } else {
    for (key in tree) {
      fn(key, tree);
    }
  }
  if (!name) {
    name = 'd:data';
    attr.push(this.namespace);
    if (is_array) attr.push('d:constr="Array"');
  }
  if (name.match(this.rx_validate_name) === null) {
    attr.push( 'd:name="'+ name +'"' );
    name = 'd:name';
  }
  if (array_child) return elem.join('');
  // prepare map
  this.map.push(tree);
  attr.push('d:mi="'+ this.map.length +'"');

  return '&lt;'+ name + (attr.length ? ' '+ attr.join(' ') : '') + (elem.length ? '&gt;'+ elem.join('') +'&lt;/'+ name +'&gt;' : '/&gt;' );
},
</t>
<t tx="ekr.20180130165259.111">scalar_to_xml: function(name, val, override) {
  var attr = '',
    text,
    constr,
    cnName;

  // check whether the nodename is valid
  if (name.match(this.rx_validate_name) === null) {
    attr += ' d:name="'+ name +'"';
    name = 'd:name';
    override = false;
  }
  if (val === null || val.toString() === 'NaN') val = null;
  if (val === null) return '&lt;'+ name +' d:constr="null"/&gt;';
  if (val.length === 1 &amp;&amp; val.constructor === Array &amp;&amp; !val[0]) {
    return '&lt;'+ name +' d:constr="null" d:type="ArrayItem"/&gt;';
  }
  if (val.length === 1 &amp;&amp; val[0].constructor === Object) {

    text = this.hash_to_xml(false, val[0]);

    var a1 = text.match(this.rx_node),
      a2 = text.match(this.rx_constructor);
    a1 = (a1 !== null)? a1[2]
      .replace(this.rx_namespace, '')
      .replace(/&gt;/, '')
      .replace(/"\/$/, '"') : '';
    a2 = (a2 !== null)? a2[2] : '';

    text = text.match(this.rx_data);
    text = (text !== null)? text[2] : '';

    return '&lt;'+ name + a1 +' '+ a2 +' d:type="ArrayItem"&gt;'+ text +'&lt;/'+ name +'&gt;';
  } else if (val.length === 0 &amp;&amp; val.constructor === Array) {
    return '&lt;'+ name +' d:constr="Array"/&gt;';
  }
  // else
  if (override) {
    return this.hash_to_xml( name, val, true );
  }

  constr = val.constructor;
  cnName = constr.toString().match(this.rx_function)[1];
  text = (constr === Array)   ? this.hash_to_xml( 'd:item', val, true )
    : this.escape_xml(val);

  attr += ' d:constr="'+ cnName +'"';
  // prepare map
  this.map.push(val);
  attr += ' d:mi="'+ this.map.length +'"';

  return (name === '#text') ? this.escape_xml(val) : '&lt;'+ name + attr +'&gt;'+ text +'&lt;/'+ name +'&gt;';
},
</t>
<t tx="ekr.20180130165259.112">    escape_xml: function(text) {
      return String(text) .replace(/&lt;/g, '&amp;lt;')
        .replace(/&gt;/g, '&amp;gt;')
        .replace(/"/g, '&amp;quot;')
        .replace(/&amp;nbsp;/g, '&amp;#160;');
    }
  },
  processed,
  doc,
  task;
// depending on request
switch (typeof callback) {
  case 'function':
    // compile interpreter with 'x10.js'
    task = x10.compile(interpreter);

    // parse in a dedicated thread
</t>
<t tx="ekr.20180130165259.113">    task.to_xml_str(tree, function(processed) {
      // snapshot distinctly improves performance
      callback({
        doc: Defiant.xmlFromString(processed.str),
        src: tree,
        map: processed.map
      });
    });
    return;
  case 'boolean':
    processed = interpreter.to_xml_str.call(interpreter, tree);
    // return snapshot
    return {
      doc: Defiant.xmlFromString(processed.str),
      src: tree,
      map: processed.map
    };
  default:
    processed = interpreter.to_xml_str.call(interpreter, tree);
    doc = Defiant.xmlFromString(processed.str);

    this.search.map = processed.map;
    return doc;
}
</t>
<t tx="ekr.20180130165259.114">  JSON.search = function(tree, xpath, single) {
    'use strict';

    var isSnapshot = tree.doc &amp;&amp; tree.doc.nodeType,
      doc        = isSnapshot ? tree.doc : JSON.toXML(tree),
      map        = isSnapshot ? tree.map : this.search.map,
      src        = isSnapshot ? tree.src : tree,
      xres       = Defiant.node[ single ? 'selectSingleNode' : 'selectNodes' ](doc, xpath.xTransform()),
      ret        = [],
      mapIndex,
      i;

    if (single) xres = [xres];
    i = xres.length;

    while (i--) {
      switch(xres[i].nodeType) {
        case 2:
        case 3:
          ret.unshift( xres[i].nodeValue );
          break;
        default:
          mapIndex = +xres[i].getAttribute('d:mi');
          //if (map[mapIndex-1] !== false) {
          ret.unshift( map[mapIndex-1] );
        //}
      }
    }

    // if environment = development, add search tracing
    if (Defiant.env === 'development') {
      this.trace = JSON.mtrace(src, ret, xres);
    }

    return ret;
  };
}

if (!JSON.mtrace) {
</t>
<t tx="ekr.20180130165259.115">  JSON.mtrace = function(root, hits, xres) {
    'use strict';

    var win       = window,
      stringify = JSON.stringify,
      sroot     = stringify( root, null, '\t' ).replace(/\t/g, ''),
      trace     = [],
      i         = 0,
      il        = xres.length,
      od        = il ? xres[i].ownerDocument.documentElement : false,
      map       = this.search.map,
      hstr,
      cConstr,
      fIndex = 0,
      mIndex,
      lStart,
      lEnd;

    for (; i&lt;il; i++) {
      switch (xres[i].nodeType) {
        case 2:
          cConstr = xres[i].ownerElement ? xres[i].ownerElement.getAttribute('d:'+ xres[i].nodeName) : 'String';
          hstr    = '"@'+ xres[i].nodeName +'": '+ win[ cConstr ]( hits[i] );
          mIndex  = sroot.indexOf(hstr);
          lEnd    = 0;
          break;
        case 3:
          cConstr = xres[i].parentNode.getAttribute('d:constr');
          hstr    = win[ cConstr ]( hits[i] );
          hstr    = '"'+ xres[i].parentNode.nodeName +'": '+ (hstr === 'Number' ? hstr : '"'+ hstr +'"');
          mIndex  = sroot.indexOf(hstr);
          lEnd    = 0;
          break;
        default:
          if (xres[i] === od) continue;
          if (xres[i].getAttribute('d:constr') === 'String' || xres[i].getAttribute('d:constr') === 'Number') {
            cConstr = xres[i].getAttribute('d:constr');
            hstr    = win[ cConstr ]( hits[i] );
            mIndex  = sroot.indexOf(hstr, fIndex);
            hstr    = '"'+ xres[i].nodeName +'": '+ (cConstr === 'Number' ? hstr : '"'+ hstr +'"');
            lEnd    = 0;
            fIndex  = mIndex + 1;
          } else {
            hstr   = stringify( hits[i], null, '\t' ).replace(/\t/g, '');
            mIndex = sroot.indexOf(hstr);
            lEnd   = hstr.match(/\n/g).length;
          }
      }
      lStart = sroot.substring(0,mIndex).match(/\n/g).length+1;
      trace.push([lStart, lEnd]);
    }

    return trace;
  };
}

</t>
<t tx="ekr.20180130165259.116">Defiant.node.selectNodes = function(XNode, XPath) {
  if (XNode.evaluate) {
    var ns = XNode.createNSResolver(XNode.documentElement),
      qI = XNode.evaluate(XPath, XNode, ns, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null),
      res = [],
      i   = 0,
      il  = qI.snapshotLength;
    for (; i&lt;il; i++) {
      res.push( qI.snapshotItem(i) );
    }
    return res;
  } else {
    return XNode.selectNodes(XPath);
  }
};
</t>
<t tx="ekr.20180130165259.117">Defiant.node.selectSingleNode = function(XNode, XPath) {
  if (XNode.evaluate) {
    var xI = this.selectNodes(XNode, XPath);
    return (xI.length &gt; 0)? xI[0] : null;
  } else {
    return XNode.selectSingleNode(XPath);
  }
};


</t>
<t tx="ekr.20180130165259.118">Defiant.node.prettyPrint = function(node) {
  var root = Defiant,
    tabs = root.tabsize,
    decl = root.xml_decl.toLowerCase(),
    ser,
    xstr;
  if (root.is_ie) {
    xstr = node.xml;
  } else {
    ser  = new XMLSerializer();
    xstr = ser.serializeToString(node);
  }
  if (root.env !== 'development') {
    // if environment is not development, remove defiant related info
    xstr = xstr.replace(/ \w+\:d=".*?"| d\:\w+=".*?"/g, '');
  }
  var str    = xstr.trim().replace(/(&gt;)\s*(&lt;)(\/*)/g, '$1\n$2$3'),
    lines  = str.split('\n'),
    indent = -1,
    i      = 0,
    il     = lines.length,
    start,
    end;
  for (; i&lt;il; i++) {
    if (i === 0 &amp;&amp; lines[i].toLowerCase() === decl) continue;
    start = lines[i].match(/&lt;[A-Za-z_\:]+.*?&gt;/g) !== null;
    //start = lines[i].match(/&lt;[^\/]+&gt;/g) !== null;
    end   = lines[i].match(/&lt;\/[\w\:]+&gt;/g) !== null;
    if (lines[i].match(/&lt;.*?\/&gt;/g) !== null) start = end = true;
    if (start) indent++;
    lines[i] = String().fill(indent, '\t') + lines[i];
    if (start &amp;&amp; end) indent--;
    if (!start &amp;&amp; end) indent--;
  }
  return lines.join('\n').replace(/\t/g, String().fill(tabs, ' '));
};


</t>
<t tx="ekr.20180130165259.119">Defiant.node.toJSON = function(xnode, stringify) {
  'use strict';

  var interpret = function(leaf) {
      var obj = {},
        win = window,
        attr,
        type,
        item,
        cname,
        cConstr,
        cval,
        text,
        i, il, a;

      switch (leaf.nodeType) {
        case 1:
          cConstr = leaf.getAttribute('d:constr');
          if (cConstr === 'Array') obj = [];
          else if (cConstr === 'String' &amp;&amp; leaf.textContent === '') obj = '';

          attr = leaf.attributes;
          i = 0;
          il = attr.length;
          for (; i&lt;il; i++) {
            a = attr.item(i);
            if (a.nodeName.match(/\:d|d\:/g) !== null) continue;

            cConstr = leaf.getAttribute('d:'+ a.nodeName);
            if (cConstr &amp;&amp; cConstr !== 'undefined') {
              if (a.nodeValue === 'null') cval = null;
              else cval = win[ cConstr ]( (a.nodeValue === 'false') ? '' : a.nodeValue );
            } else {
              cval = a.nodeValue;
            }
            obj['@'+ a.nodeName] = cval;
          }
          break;
        case 3:
          type = leaf.parentNode.getAttribute('d:type');
          cval = (type) ? win[ type ]( leaf.nodeValue === 'false' ? '' : leaf.nodeValue ) : leaf.nodeValue;
          obj = cval;
          break;
      }
      if (leaf.hasChildNodes()) {
        i = 0;
        il = leaf.childNodes.length;
        for(; i&lt;il; i++) {
          item  = leaf.childNodes.item(i);
          cname = item.nodeName;
          attr  = leaf.attributes;

          if (cname === 'd:name') {
            cname = item.getAttribute('d:name');
          }
          if (cname === '#text') {
            cConstr = leaf.getAttribute('d:constr');
            if (cConstr === 'undefined') cConstr = undefined;
            text = item.textContent || item.text;
            cval = cConstr === 'Boolean' &amp;&amp; text === 'false' ? '' : text;

            if (!cConstr &amp;&amp; !attr.length) obj = cval;
            else if (cConstr &amp;&amp; il === 1) {
              obj = win[cConstr](cval);
            } else if (!leaf.hasChildNodes()) {
              obj[cname] = (cConstr)? win[cConstr](cval) : cval;
            } else {
              if (attr.length &lt; 3) obj = (cConstr)? win[cConstr](cval) : cval;
              else obj[cname] = (cConstr)? win[cConstr](cval) : cval;
            }
          } else {
            if (item.getAttribute('d:constr') === 'null') {
              if (obj[cname] &amp;&amp; obj[cname].push) obj[cname].push(null);
              else if (item.getAttribute('d:type') === 'ArrayItem') obj[cname] = [obj[cname]];
              else obj[cname] = null;
              continue;
            }
            if (obj[cname]) {
              if (obj[cname].push) obj[cname].push(interpret(item));
              else obj[cname] = [obj[cname], interpret(item)];
              continue;
            }
            cConstr = item.getAttribute('d:constr');
            switch (cConstr) {
              case 'null':
                if (obj.push) obj.push(null);
                else obj[cname] = null;
                break;
              case 'Array':
                //console.log( Defiant.node.prettyPrint(item) );
                if (item.parentNode.firstChild === item &amp;&amp; cConstr === 'Array' &amp;&amp; cname !== 'd:item') {
                  if (cname === 'd:item' || cConstr === 'Array') {
                    cval = interpret(item);
                    obj[cname] = cval.length ? [cval] : cval;
                  } else {
                    obj[cname] = interpret(item);
                  }
                }
                else if (obj.push) obj.push( interpret(item) );
                else obj[cname] = interpret(item);
                break;
              case 'String':
              case 'Number':
              case 'Boolean':
                text = item.textContent || item.text;
                cval = cConstr === 'Boolean' &amp;&amp; text === 'false' ? '' : text;

                if (obj.push) obj.push( win[cConstr](cval) );
                else obj[cname] = interpret(item);
                break;
              default:
                if (obj.push) obj.push( interpret( item ) );
                else obj[cname] = interpret( item );
            }
          }
        }
      }
      if (leaf.nodeType === 1 &amp;&amp; leaf.getAttribute('d:type') === 'ArrayItem') {
        obj = [obj];
      }
      return obj;
    },
    node = (xnode.nodeType === 9) ? xnode.documentElement : xnode,
    ret  = interpret(node),
    rn   = ret[node.nodeName];

  // exclude root, if "this" is root node
  if (node === node.ownerDocument.documentElement &amp;&amp; rn &amp;&amp; rn.constructor === Array) {
    ret = rn;
  }
  if (stringify &amp;&amp; stringify.toString() === 'true') stringify = '\t';
  return stringify ? JSON.stringify(ret, null, stringify) : ret;
};


// check if jQuery is present
if (typeof(jQuery) !== 'undefined') {
</t>
<t tx="ekr.20180130165259.12">function replaceRelUrls (html, base) {
  const parser = new DOMParser()
  const doc = parser.parseFromString(html, 'text/html')
  const images = doc.images
  for (let i = 0; i &lt; images.length; i++) {
    let image = images[i]
    let src = image.getAttribute('src')
    if (/http:/.test(src)) { return }
    if (/^\//.test(src)) {
      src = base + src
    } else {
      src = base + '/' + src
    }
    image.setAttribute('src', src)
  }
  return doc.body.innerHTML
}

</t>
<t tx="ekr.20180130165259.120">  (function ( $ ) {
    'use strict';

    $.fn.defiant = function(template, xpath) {
      this.html( Defiant.render(template, xpath) );
      return this;
    };

  }(jQuery));
}
</t>
<t tx="ekr.20180130165259.121">export default {
  size (tree, size, margin, {last, first}) {
    tree.size([size.height - (margin.y * 2), size.width - (margin.x * 2) - (last + first)])
  },

  transformNode (x, y) {
    return y + ',' + x
  },

  transformSvg (svg, margin, size, {first}) {
    return svg.attr('transform', 'translate(' + margin.x + first + ',' + margin.y + ')')
  },

  updateTransform (transform, {x, y}, size, {first}) {
    return transform.translate(x + first, y)
  },

  transformText (text, children) {
    return {
      x: !children ? 6 : -6,
      rotate: 0,
      anchor: !children ? 'start' : 'end'
    }
  }
}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.122">/*
 *  /MathJax.js
 *
 *  Copyright (c) 2009-2017 The MathJax Consortium
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */

if(document.getElementById&amp;&amp;document.childNodes&amp;&amp;document.createElement){if(!(window.MathJax&amp;&amp;MathJax.Hub)){if(window.MathJax){window.MathJax={AuthorConfig:window.MathJax}}else{window.MathJax={}}MathJax.isPacked=true;MathJax.version="2.7.1";MathJax.fileversion="2.7.1";MathJax.cdnVersion="2.7.1";MathJax.cdnFileVersions={};(function(d){var b=window[d];if(!b){b=window[d]={}}var e=[];var c=function(f){var g=f.constructor;if(!g){g=function(){}}for(var h in f){if(h!=="constructor"&amp;&amp;f.hasOwnProperty(h)){g[h]=f[h]}}return g};var a=function(){return function(){return arguments.callee.Init.call(this,arguments)}};b.Object=c({constructor:a(),Subclass:function(f,h){var g=a();g.SUPER=this;g.Init=this.Init;g.Subclass=this.Subclass;g.Augment=this.Augment;g.protoFunction=this.protoFunction;g.can=this.can;g.has=this.has;g.isa=this.isa;g.prototype=new this(e);g.prototype.constructor=g;g.Augment(f,h);return g},Init:function(f){var g=this;if(f.length===1&amp;&amp;f[0]===e){return g}if(!(g instanceof f.callee)){g=new f.callee(e)}return g.Init.apply(g,f)||g},Augment:function(f,g){var h;if(f!=null){for(h in f){if(f.hasOwnProperty(h)){this.protoFunction(h,f[h])}}if(f.toString!==this.prototype.toString&amp;&amp;f.toString!=={}.toString){this.protoFunction("toString",f.toString)}}if(g!=null){for(h in g){if(g.hasOwnProperty(h)){this[h]=g[h]}}}return this},protoFunction:function(g,f){this.prototype[g]=f;if(typeof f==="function"){f.SUPER=this.SUPER.prototype}},prototype:{Init:function(){},SUPER:function(f){return f.callee.SUPER},can:function(f){return typeof(this[f])==="function"},has:function(f){return typeof(this[f])!=="undefined"},isa:function(f){return(f instanceof Object)&amp;&amp;(this instanceof f)}},can:function(f){return this.prototype.can.call(this,f)},has:function(f){return this.prototype.has.call(this,f)},isa:function(g){var f=this;while(f){if(f===g){return true}else{f=f.SUPER}}return false},SimpleSUPER:c({constructor:function(f){return this.SimpleSUPER.define(f)},define:function(f){var h={};if(f!=null){for(var g in f){if(f.hasOwnProperty(g)){h[g]=this.wrap(g,f[g])}}if(f.toString!==this.prototype.toString&amp;&amp;f.toString!=={}.toString){h.toString=this.wrap("toString",f.toString)}}return h},wrap:function(i,h){if(typeof(h)!=="function"||!h.toString().match(/\.\s*SUPER\s*\(/)){return h}var g=function(){this.SUPER=g.SUPER[i];try{var f=h.apply(this,arguments)}catch(j){delete this.SUPER;throw j}delete this.SUPER;return f};g.toString=function(){return h.toString.apply(h,arguments)};return g}})});b.Object.isArray=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};b.Object.Array=Array})("MathJax");(function(BASENAME){var BASE=window[BASENAME];if(!BASE){BASE=window[BASENAME]={}}var isArray=BASE.Object.isArray;var CALLBACK=function(data){var cb=function(){return arguments.callee.execute.apply(arguments.callee,arguments)};for(var id in CALLBACK.prototype){if(CALLBACK.prototype.hasOwnProperty(id)){if(typeof(data[id])!=="undefined"){cb[id]=data[id]}else{cb[id]=CALLBACK.prototype[id]}}}cb.toString=CALLBACK.prototype.toString;return cb};CALLBACK.prototype={isCallback:true,hook:function(){},data:[],object:window,execute:function(){if(!this.called||this.autoReset){this.called=!this.autoReset;return this.hook.apply(this.object,this.data.concat([].slice.call(arguments,0)))}},reset:function(){delete this.called},toString:function(){return this.hook.toString.apply(this.hook,arguments)}};var ISCALLBACK=function(f){return(typeof(f)==="function"&amp;&amp;f.isCallback)};var EVAL=function(code){return eval.call(window,code)};var TESTEVAL=function(){EVAL("var __TeSt_VaR__ = 1");if(window.__TeSt_VaR__){try{delete window.__TeSt_VaR__}catch(error){window.__TeSt_VaR__=null}}else{if(window.execScript){EVAL=function(code){BASE.__code=code;code="try {"+BASENAME+".__result = eval("+BASENAME+".__code)} catch(err) {"+BASENAME+".__result = err}";window.execScript(code);var result=BASE.__result;delete BASE.__result;delete BASE.__code;if(result instanceof Error){throw result}return result}}else{EVAL=function(code){BASE.__code=code;code="try {"+BASENAME+".__result = eval("+BASENAME+".__code)} catch(err) {"+BASENAME+".__result = err}";var head=(document.getElementsByTagName("head"))[0];if(!head){head=document.body}var script=document.createElement("script");script.appendChild(document.createTextNode(code));head.appendChild(script);head.removeChild(script);var result=BASE.__result;delete BASE.__result;delete BASE.__code;if(result instanceof Error){throw result}return result}}}TESTEVAL=null};var USING=function(args,i){if(arguments.length&gt;1){if(arguments.length===2&amp;&amp;!(typeof arguments[0]==="function")&amp;&amp;arguments[0] instanceof Object&amp;&amp;typeof arguments[1]==="number"){args=[].slice.call(args,i)}else{args=[].slice.call(arguments,0)}}if(isArray(args)&amp;&amp;args.length===1){args=args[0]}if(typeof args==="function"){if(args.execute===CALLBACK.prototype.execute){return args}return CALLBACK({hook:args})}else{if(isArray(args)){if(typeof(args[0])==="string"&amp;&amp;args[1] instanceof Object&amp;&amp;typeof args[1][args[0]]==="function"){return CALLBACK({hook:args[1][args[0]],object:args[1],data:args.slice(2)})}else{if(typeof args[0]==="function"){return CALLBACK({hook:args[0],data:args.slice(1)})}else{if(typeof args[1]==="function"){return CALLBACK({hook:args[1],object:args[0],data:args.slice(2)})}}}}else{if(typeof(args)==="string"){if(TESTEVAL){TESTEVAL()}return CALLBACK({hook:EVAL,data:[args]})}else{if(args instanceof Object){return CALLBACK(args)}else{if(typeof(args)==="undefined"){return CALLBACK({})}}}}}throw Error("Can't make callback from given data")};var DELAY=function(time,callback){callback=USING(callback);callback.timeout=setTimeout(callback,time);return callback};var WAITFOR=function(callback,signal){callback=USING(callback);if(!callback.called){WAITSIGNAL(callback,signal);signal.pending++}};var WAITEXECUTE=function(){var signals=this.signal;delete this.signal;this.execute=this.oldExecute;delete this.oldExecute;var result=this.execute.apply(this,arguments);if(ISCALLBACK(result)&amp;&amp;!result.called){WAITSIGNAL(result,signals)}else{for(var i=0,m=signals.length;i&lt;m;i++){signals[i].pending--;if(signals[i].pending&lt;=0){signals[i].call()}}}};var WAITSIGNAL=function(callback,signals){if(!isArray(signals)){signals=[signals]}if(!callback.signal){callback.oldExecute=callback.execute;callback.execute=WAITEXECUTE;callback.signal=signals}else{if(signals.length===1){callback.signal.push(signals[0])}else{callback.signal=callback.signal.concat(signals)}}};var AFTER=function(callback){callback=USING(callback);callback.pending=0;for(var i=1,m=arguments.length;i&lt;m;i++){if(arguments[i]){WAITFOR(arguments[i],callback)}}if(callback.pending===0){var result=callback();if(ISCALLBACK(result)){callback=result}}return callback};var HOOKS=MathJax.Object.Subclass({Init:function(reset){this.hooks=[];this.remove=[];this.reset=reset;this.running=false},Add:function(hook,priority){if(priority==null){priority=10}if(!ISCALLBACK(hook)){hook=USING(hook)}hook.priority=priority;var i=this.hooks.length;while(i&gt;0&amp;&amp;priority&lt;this.hooks[i-1].priority){i--}this.hooks.splice(i,0,hook);return hook},Remove:function(hook){for(var i=0,m=this.hooks.length;i&lt;m;i++){if(this.hooks[i]===hook){if(this.running){this.remove.push(i)}else{this.hooks.splice(i,1)}return}}},Execute:function(){var callbacks=[{}];this.running=true;for(var i=0,m=this.hooks.length;i&lt;m;i++){if(this.reset){this.hooks[i].reset()}var result=this.hooks[i].apply(window,arguments);if(ISCALLBACK(result)&amp;&amp;!result.called){callbacks.push(result)}}this.running=false;if(this.remove.length){this.RemovePending()}if(callbacks.length===1){return null}if(callbacks.length===2){return callbacks[1]}return AFTER.apply({},callbacks)},RemovePending:function(){this.remove=this.remove.sort();for(var i=this.remove.length-1;i&gt;=0;i--){this.hooks.splice(i,1)}this.remove=[]}});var EXECUTEHOOKS=function(hooks,data,reset){if(!hooks){return null}if(!isArray(hooks)){hooks=[hooks]}if(!isArray(data)){data=(data==null?[]:[data])}var handler=HOOKS(reset);for(var i=0,m=hooks.length;i&lt;m;i++){handler.Add(hooks[i])}return handler.Execute.apply(handler,data)};var QUEUE=BASE.Object.Subclass({Init:function(){this.pending=this.running=0;this.queue=[];this.Push.apply(this,arguments)},Push:function(){var callback;for(var i=0,m=arguments.length;i&lt;m;i++){callback=USING(arguments[i]);if(callback===arguments[i]&amp;&amp;!callback.called){callback=USING(["wait",this,callback])}this.queue.push(callback)}if(!this.running&amp;&amp;!this.pending){this.Process()}return callback},Process:function(queue){while(!this.running&amp;&amp;!this.pending&amp;&amp;this.queue.length){var callback=this.queue[0];queue=this.queue.slice(1);this.queue=[];this.Suspend();var result=callback();this.Resume();if(queue.length){this.queue=queue.concat(this.queue)}if(ISCALLBACK(result)&amp;&amp;!result.called){WAITFOR(result,this)}}},Suspend:function(){this.running++},Resume:function(){if(this.running){this.running--}},call:function(){this.Process.apply(this,arguments)},wait:function(callback){return callback}});var SIGNAL=QUEUE.Subclass({Init:function(name){QUEUE.prototype.Init.call(this);this.name=name;this.posted=[];this.listeners=HOOKS(true);this.posting=false;this.callback=null},Post:function(message,callback,forget){callback=USING(callback);if(this.posting||this.pending){this.Push(["Post",this,message,callback,forget])}else{this.callback=callback;callback.reset();if(!forget){this.posted.push(message)}this.Suspend();this.posting=true;var result=this.listeners.Execute(message);if(ISCALLBACK(result)&amp;&amp;!result.called){WAITFOR(result,this)}this.Resume();this.posting=false;if(!this.pending){this.call()}}return callback},Clear:function(callback){callback=USING(callback);if(this.posting||this.pending){callback=this.Push(["Clear",this,callback])}else{this.posted=[];callback()}return callback},call:function(){this.callback(this);this.Process()},Interest:function(callback,ignorePast,priority){callback=USING(callback);this.listeners.Add(callback,priority);if(!ignorePast){for(var i=0,m=this.posted.length;i&lt;m;i++){callback.reset();var result=callback(this.posted[i]);if(ISCALLBACK(result)&amp;&amp;i===this.posted.length-1){WAITFOR(result,this)}}}return callback},NoInterest:function(callback){this.listeners.Remove(callback)},MessageHook:function(msg,callback,priority){callback=USING(callback);if(!this.hooks){this.hooks={};this.Interest(["ExecuteHooks",this])}if(!this.hooks[msg]){this.hooks[msg]=HOOKS(true)}this.hooks[msg].Add(callback,priority);for(var i=0,m=this.posted.length;i&lt;m;i++){if(this.posted[i]==msg){callback.reset();callback(this.posted[i])}}callback.msg=msg;return callback},ExecuteHooks:function(msg){var type=(isArray(msg)?msg[0]:msg);if(!this.hooks[type]){return null}return this.hooks[type].Execute(msg)},RemoveHook:function(hook){this.hooks[hook.msg].Remove(hook)}},{signals:{},find:function(name){if(!SIGNAL.signals[name]){SIGNAL.signals[name]=new SIGNAL(name)}return SIGNAL.signals[name]}});BASE.Callback=BASE.CallBack=USING;BASE.Callback.Delay=DELAY;BASE.Callback.After=AFTER;BASE.Callback.Queue=QUEUE;BASE.Callback.Signal=SIGNAL.find;BASE.Callback.Hooks=HOOKS;BASE.Callback.ExecuteHooks=EXECUTEHOOKS})("MathJax");(function(e){var a=window[e];if(!a){a=window[e]={}}var d=(navigator.vendor==="Apple Computer, Inc."&amp;&amp;typeof navigator.vendorSub==="undefined");var g=0;var h=function(i){if(document.styleSheets&amp;&amp;document.styleSheets.length&gt;g){g=document.styleSheets.length}if(!i){i=document.head||((document.getElementsByTagName("head"))[0]);if(!i){i=document.body}}return i};var f=[];var c=function(){for(var k=0,j=f.length;k&lt;j;k++){a.Ajax.head.removeChild(f[k])}f=[]};var b={};b[e]="";b.a11y="[MathJax]/extensions/a11y";b.Contrib="https://cdn.mathjax.org/mathjax/contrib";a.Ajax={loaded:{},loading:{},loadHooks:{},timeout:15*1000,styleDelay:1,config:{root:"",path:b},params:{},STATUS:{OK:1,ERROR:-1},fileURL:function(j){var i;while((i=j.match(/^\[([-._a-z0-9]+)\]/i))&amp;&amp;b.hasOwnProperty(i[1])){j=(b[i[1]]||this.config.root)+j.substr(i[1].length+2)}return j},fileName:function(j){var i=this.config.root;if(j.substr(0,i.length)===i){j="["+e+"]"+j.substr(i.length)}do{var k=false;for(var l in b){if(b.hasOwnProperty(l)&amp;&amp;b[l]){if(j.substr(0,b[l].length)===b[l]){j="["+l+"]"+j.substr(b[l].length);k=true;break}}}}while(k);return j},fileRev:function(j){var i=a.cdnFileVersions[j]||a.cdnVersion||"";if(i){i="?V="+i}return i},urlRev:function(i){return this.fileURL(i)+this.fileRev(i)},Require:function(k,n){n=a.Callback(n);var l;if(k instanceof Object){for(var j in k){if(k.hasOwnProperty(j)){l=j.toUpperCase();k=k[j]}}}else{l=k.split(/\./).pop().toUpperCase()}if(this.params.noContrib&amp;&amp;k.substr(0,9)==="[Contrib]"){n(this.STATUS.ERROR)}else{k=this.fileURL(k);if(this.loaded[k]){n(this.loaded[k])}else{var m={};m[l]=k;this.Load(m,n)}}return n},Load:function(k,m){m=a.Callback(m);var l;if(k instanceof Object){for(var j in k){if(k.hasOwnProperty(j)){l=j.toUpperCase();k=k[j]}}}else{l=k.split(/\./).pop().toUpperCase()}k=this.fileURL(k);if(this.loading[k]){this.addHook(k,m)}else{this.head=h(this.head);if(this.loader[l]){this.loader[l].call(this,k,m)}else{throw Error("Can't load files of type "+l)}}return m},LoadHook:function(l,m,k){m=a.Callback(m);if(l instanceof Object){for(var j in l){if(l.hasOwnProperty(j)){l=l[j]}}}l=this.fileURL(l);if(this.loaded[l]){m(this.loaded[l])}else{this.addHook(l,m,k)}return m},addHook:function(j,k,i){if(!this.loadHooks[j]){this.loadHooks[j]=MathJax.Callback.Hooks()}this.loadHooks[j].Add(k,i);k.file=j},removeHook:function(i){if(this.loadHooks[i.file]){this.loadHooks[i.file].Remove(i);if(!this.loadHooks[i.file].hooks.length){delete this.loadHooks[i.file]}}},Preloading:function(){for(var l=0,j=arguments.length;l&lt;j;l++){var k=this.fileURL(arguments[l]);if(!this.loading[k]){this.loading[k]={preloaded:true}}}},loader:{JS:function(k,m){var j=this.fileName(k);var i=document.createElement("script");var l=a.Callback(["loadTimeout",this,k]);this.loading[k]={callback:m,timeout:setTimeout(l,this.timeout),status:this.STATUS.OK,script:i};this.loading[k].message=a.Message.File(j);i.onerror=l;i.type="text/javascript";i.src=k+this.fileRev(j);this.head.appendChild(i)},CSS:function(j,l){var i=this.fileName(j);var k=document.createElement("link");k.rel="stylesheet";k.type="text/css";k.href=j+this.fileRev(i);this.loading[j]={callback:l,message:a.Message.File(i),status:this.STATUS.OK};this.head.appendChild(k);this.timer.create.call(this,[this.timer.file,j],k)}},timer:{create:function(j,i){j=a.Callback(j);if(i.nodeName==="STYLE"&amp;&amp;i.styleSheet&amp;&amp;typeof(i.styleSheet.cssText)!=="undefined"){j(this.STATUS.OK)}else{if(window.chrome&amp;&amp;i.nodeName==="LINK"){j(this.STATUS.OK)}else{if(d){this.timer.start(this,[this.timer.checkSafari2,g++,j],this.styleDelay)}else{this.timer.start(this,[this.timer.checkLength,i,j],this.styleDelay)}}}return j},start:function(j,i,k,l){i=a.Callback(i);i.execute=this.execute;i.time=this.time;i.STATUS=j.STATUS;i.timeout=l||j.timeout;i.delay=i.total=k||0;if(k){setTimeout(i,k)}else{i()}},time:function(i){this.total+=this.delay;this.delay=Math.floor(this.delay*1.05+5);if(this.total&gt;=this.timeout){i(this.STATUS.ERROR);return 1}return 0},file:function(j,i){if(i&lt;0){a.Ajax.loadTimeout(j)}else{a.Ajax.loadComplete(j)}},execute:function(){this.hook.call(this.object,this,this.data[0],this.data[1])},checkSafari2:function(i,j,k){if(i.time(k)){return}if(document.styleSheets.length&gt;j&amp;&amp;document.styleSheets[j].cssRules&amp;&amp;document.styleSheets[j].cssRules.length){k(i.STATUS.OK)}else{setTimeout(i,i.delay)}},checkLength:function(i,l,n){if(i.time(n)){return}var m=0;var j=(l.sheet||l.styleSheet);try{if((j.cssRules||j.rules||[]).length&gt;0){m=1}}catch(k){if(k.message.match(/protected variable|restricted URI/)){m=1}else{if(k.message.match(/Security error/)){m=1}}}if(m){setTimeout(a.Callback([n,i.STATUS.OK]),0)}else{setTimeout(i,i.delay)}}},loadComplete:function(i){i=this.fileURL(i);var j=this.loading[i];if(j&amp;&amp;!j.preloaded){a.Message.Clear(j.message);clearTimeout(j.timeout);if(j.script){if(f.length===0){setTimeout(c,0)}f.push(j.script)}this.loaded[i]=j.status;delete this.loading[i];this.addHook(i,j.callback)}else{if(j){delete this.loading[i]}this.loaded[i]=this.STATUS.OK;j={status:this.STATUS.OK}}if(!this.loadHooks[i]){return null}return this.loadHooks[i].Execute(j.status)},loadTimeout:function(i){if(this.loading[i].timeout){clearTimeout(this.loading[i].timeout)}this.loading[i].status=this.STATUS.ERROR;this.loadError(i);this.loadComplete(i)},loadError:function(i){a.Message.Set(["LoadFailed","File failed to load: %1",i],null,2000);a.Hub.signal.Post(["file load error",i])},Styles:function(k,l){var i=this.StyleString(k);if(i===""){l=a.Callback(l);l()}else{var j=document.createElement("style");j.type="text/css";this.head=h(this.head);this.head.appendChild(j);if(j.styleSheet&amp;&amp;typeof(j.styleSheet.cssText)!=="undefined"){j.styleSheet.cssText=i}else{j.appendChild(document.createTextNode(i))}l=this.timer.create.call(this,l,j)}return l},StyleString:function(n){if(typeof(n)==="string"){return n}var k="",o,m;for(o in n){if(n.hasOwnProperty(o)){if(typeof n[o]==="string"){k+=o+" {"+n[o]+"}\n"}else{if(a.Object.isArray(n[o])){for(var l=0;l&lt;n[o].length;l++){m={};m[o]=n[o][l];k+=this.StyleString(m)}}else{if(o.substr(0,6)==="@media"){k+=o+" {"+this.StyleString(n[o])+"}\n"}else{if(n[o]!=null){m=[];for(var j in n[o]){if(n[o].hasOwnProperty(j)){if(n[o][j]!=null){m[m.length]=j+": "+n[o][j]}}}k+=o+" {"+m.join("; ")+"}\n"}}}}}}return k}}})("MathJax");MathJax.HTML={Element:function(d,f,e){var g=document.createElement(d),h;if(f){if(f.hasOwnProperty("style")){var c=f.style;f.style={};for(h in c){if(c.hasOwnProperty(h)){f.style[h.replace(/-([a-z])/g,this.ucMatch)]=c[h]}}}MathJax.Hub.Insert(g,f);for(h in f){if(h==="role"||h.substr(0,5)==="aria-"){g.setAttribute(h,f[h])}}}if(e){if(!MathJax.Object.isArray(e)){e=[e]}for(var b=0,a=e.length;b&lt;a;b++){if(MathJax.Object.isArray(e[b])){g.appendChild(this.Element(e[b][0],e[b][1],e[b][2]))}else{if(d==="script"){this.setScript(g,e[b])}else{g.appendChild(document.createTextNode(e[b]))}}}}return g},ucMatch:function(a,b){return b.toUpperCase()},addElement:function(b,a,d,c){return b.appendChild(this.Element(a,d,c))},TextNode:function(a){return document.createTextNode(a)},addText:function(a,b){return a.appendChild(this.TextNode(b))},setScript:function(a,b){if(this.setScriptBug){a.text=b}else{while(a.firstChild){a.removeChild(a.firstChild)}this.addText(a,b)}},getScript:function(a){var b=(a.text===""?a.innerHTML:a.text);return b.replace(/^\s+/,"").replace(/\s+$/,"")},Cookie:{prefix:"mjx",expires:365,Set:function(a,e){var d=[];if(e){for(var g in e){if(e.hasOwnProperty(g)){d.push(g+":"+e[g].toString().replace(/&amp;/g,"&amp;&amp;"))}}}var b=this.prefix+"."+a+"="+escape(d.join("&amp;;"));if(this.expires){var f=new Date();f.setDate(f.getDate()+this.expires);b+="; expires="+f.toGMTString()}try{document.cookie=b+"; path=/"}catch(c){}},Get:function(a,d){if(!d){d={}}var g=new RegExp("(?:^|;\\s*)"+this.prefix+"\\."+a+"=([^;]*)(?:;|$)");var f;try{f=g.exec(document.cookie)}catch(c){}if(f&amp;&amp;f[1]!==""){var j=unescape(f[1]).split("&amp;;");for(var e=0,b=j.length;e&lt;b;e++){f=j[e].match(/([^:]+):(.*)/);var h=f[2].replace(/&amp;&amp;/g,"&amp;");if(h==="true"){h=true}else{if(h==="false"){h=false}else{if(h.match(/^-?(\d+(\.\d+)?|\.\d+)$/)){h=parseFloat(h)}}}d[f[1]]=h}}return d}}};MathJax.Localization={locale:"en",directory:"[MathJax]/localization",strings:{ast:{menuTitle:"asturianu"},bg:{menuTitle:"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438"},bcc:{menuTitle:"\u0628\u0644\u0648\u0686\u06CC"},br:{menuTitle:"brezhoneg"},ca:{menuTitle:"catal\u00E0"},cdo:{menuTitle:"M\u00ECng-d\u0115\u0324ng-ng\u1E73\u0304"},cs:{menuTitle:"\u010De\u0161tina"},da:{menuTitle:"dansk"},de:{menuTitle:"Deutsch"},diq:{menuTitle:"Zazaki"},en:{menuTitle:"English",isLoaded:true},eo:{menuTitle:"Esperanto"},es:{menuTitle:"espa\u00F1ol"},fa:{menuTitle:"\u0641\u0627\u0631\u0633\u06CC"},fi:{menuTitle:"suomi"},fr:{menuTitle:"fran\u00E7ais"},gl:{menuTitle:"galego"},he:{menuTitle:"\u05E2\u05D1\u05E8\u05D9\u05EA"},ia:{menuTitle:"interlingua"},it:{menuTitle:"italiano"},ja:{menuTitle:"\u65E5\u672C\u8A9E"},kn:{menuTitle:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},ko:{menuTitle:"\uD55C\uAD6D\uC5B4"},lb:{menuTitle:"L\u00EBtzebuergesch"},lki:{menuTitle:"\u0644\u06D5\u06A9\u06CC"},lt:{menuTitle:"lietuvi\u0173"},mk:{menuTitle:"\u043C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438"},nl:{menuTitle:"Nederlands"},oc:{menuTitle:"occitan"},pl:{menuTitle:"polski"},pt:{menuTitle:"portugus\u00EA"},"pt-br":{menuTitle:"portugu\u00EAs do Brasil"},ru:{menuTitle:"\u0440\u0443\u0441\u0441\u043A\u0438\u0439"},sco:{menuTitle:"Scots"},scn:{menuTitle:"sicilianu"},sl:{menuTitle:"sloven\u0161\u010Dina"},sv:{menuTitle:"svenska"},tr:{menuTitle:"T\u00FCrk\u00E7e"},uk:{menuTitle:"\u0443\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},vi:{menuTitle:"Ti\u1EBFng Vi\u1EC7t"},"zh-hans":{menuTitle:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09"}},pattern:/%(\d+|\{\d+\}|\{[a-z]+:\%\d+(?:\|(?:%\{\d+\}|%.|[^\}])*)+\}|.)/g,SPLIT:("axb".split(/(x)/).length===3?function(a,b){return a.split(b)}:function(c,e){var a=[],b,d=0;e.lastIndex=0;while((b=e.exec(c))){a.push(c.substr(d,b.index-d));a.push.apply(a,b.slice(1));d=b.index+b[0].length}a.push(c.substr(d));return a}),_:function(b,a){if(MathJax.Object.isArray(a)){return this.processSnippet(b,a)}return this.processString(this.lookupPhrase(b,a),[].slice.call(arguments,2))},processString:function(l,p,g){var j,e,o=MathJax.Object.isArray;for(j=0,e=p.length;j&lt;e;j++){if(g&amp;&amp;o(p[j])){p[j]=this.processSnippet(g,p[j])}}var f=this.SPLIT(l,this.pattern);for(j=1,e=f.length;j&lt;e;j+=2){var q=f[j].charAt(0);if(q&gt;="0"&amp;&amp;q&lt;="9"){f[j]=p[f[j]-1];if(typeof f[j]==="number"){f[j]=this.number(f[j])}}else{if(q==="{"){q=f[j].substr(1);if(q&gt;="0"&amp;&amp;q&lt;="9"){f[j]=p[f[j].substr(1,f[j].length-2)-1];if(typeof f[j]==="number"){f[j]=this.number(f[j])}}else{var k=f[j].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/);if(k){if(k[1]==="plural"){var d=p[k[2]-1];if(typeof d==="undefined"){f[j]="???"}else{d=this.plural(d)-1;var h=k[3].replace(/(^|[^%])(%%)*%\|/g,"$1$2%\uEFEF").split(/\|/);if(d&gt;=0&amp;&amp;d&lt;h.length){f[j]=this.processString(h[d].replace(/\uEFEF/g,"|"),p,g)}else{f[j]="???"}}}else{f[j]="%"+f[j]}}}}}if(f[j]==null){f[j]="???"}}if(!g){return f.join("")}var a=[],b="";for(j=0;j&lt;e;j++){b+=f[j];j++;if(j&lt;e){if(o(f[j])){a.push(b);a=a.concat(f[j]);b=""}else{b+=f[j]}}}if(b!==""){a.push(b)}return a},processSnippet:function(g,e){var c=[];for(var d=0,b=e.length;d&lt;b;d++){if(MathJax.Object.isArray(e[d])){var f=e[d];if(typeof f[1]==="string"){var h=f[0];if(!MathJax.Object.isArray(h)){h=[g,h]}var a=this.lookupPhrase(h,f[1]);c=c.concat(this.processMarkdown(a,f.slice(2),g))}else{if(MathJax.Object.isArray(f[1])){c=c.concat(this.processSnippet.apply(this,f))}else{if(f.length&gt;=3){c.push([f[0],f[1],this.processSnippet(g,f[2])])}else{c.push(e[d])}}}}else{c.push(e[d])}}return c},markdownPattern:/(%.)|(\*{1,3})((?:%.|.)+?)\2|(`+)((?:%.|.)+?)\4|\[((?:%.|.)+?)\]\(([^\s\)]+)\)/,processMarkdown:function(b,h,d){var j=[],e;var c=b.split(this.markdownPattern);var g=c[0];for(var f=1,a=c.length;f&lt;a;f+=8){if(c[f+1]){e=this.processString(c[f+2],h,d);if(!MathJax.Object.isArray(e)){e=[e]}e=[["b","i","i"][c[f+1].length-1],{},e];if(c[f+1].length===3){e=["b",{},e]}}else{if(c[f+3]){e=this.processString(c[f+4].replace(/^\s/,"").replace(/\s$/,""),h,d);if(!MathJax.Object.isArray(e)){e=[e]}e=["code",{},e]}else{if(c[f+5]){e=this.processString(c[f+5],h,d);if(!MathJax.Object.isArray(e)){e=[e]}e=["a",{href:this.processString(c[f+6],h),target:"_blank"},e]}else{g+=c[f];e=null}}}if(e){j=this.concatString(j,g,h,d);j.push(e);g=""}if(c[f+7]!==""){g+=c[f+7]}}j=this.concatString(j,g,h,d);return j},concatString:function(a,c,b,d){if(c!=""){c=this.processString(c,b,d);if(!MathJax.Object.isArray(c)){c=[c]}a=a.concat(c)}return a},lookupPhrase:function(f,a,d){if(!d){d="_"}if(MathJax.Object.isArray(f)){d=(f[0]||"_");f=(f[1]||"")}var c=this.loadDomain(d);if(c){MathJax.Hub.RestartAfter(c)}var b=this.strings[this.locale];if(b){if(b.domains&amp;&amp;d in b.domains){var e=b.domains[d];if(e.strings&amp;&amp;f in e.strings){a=e.strings[f]}}}return a},loadFile:function(b,d,e){e=MathJax.Callback(e);b=(d.file||b);if(!b.match(/\.js$/)){b+=".js"}if(!b.match(/^([a-z]+:|\[MathJax\])/)){var a=(this.strings[this.locale].directory||this.directory+"/"+this.locale||"[MathJax]/localization/"+this.locale);b=a+"/"+b}var c=MathJax.Ajax.Require(b,function(){d.isLoaded=true;return e()});return(c.called?null:c)},loadDomain:function(c,e){var b,a=this.strings[this.locale];if(a){if(!a.isLoaded){b=this.loadFile(this.locale,a);if(b){return MathJax.Callback.Queue(b,["loadDomain",this,c]).Push(e||{})}}if(a.domains&amp;&amp;c in a.domains){var d=a.domains[c];if(!d.isLoaded){b=this.loadFile(c,d);if(b){return MathJax.Callback.Queue(b).Push(e)}}}}return MathJax.Callback(e)()},Try:function(a){a=MathJax.Callback(a);a.autoReset=true;try{a()}catch(b){if(!b.restart){throw b}MathJax.Callback.After(["Try",this,a],b.restart)}},resetLocale:function(a){if(!a){return}a=a.toLowerCase();while(!this.strings[a]){var c=a.lastIndexOf("-");if(c===-1){return}a=a.substring(0,c)}var b=this.strings[a].remap;this.locale=b?b:a},setLocale:function(a){this.resetLocale(a);if(MathJax.Menu){this.loadDomain("MathMenu")}},addTranslation:function(b,e,c){var d=this.strings[b],a=false;if(!d){d=this.strings[b]={};a=true}if(!d.domains){d.domains={}}if(e){if(!d.domains[e]){d.domains[e]={}}d=d.domains[e]}MathJax.Hub.Insert(d,c);if(a&amp;&amp;MathJax.Menu.menu){MathJax.Menu.CreateLocaleMenu()}},setCSS:function(b){var a=this.strings[this.locale];if(a){if(a.fontFamily){b.style.fontFamily=a.fontFamily}if(a.fontDirection){b.style.direction=a.fontDirection;if(a.fontDirection==="rtl"){b.style.textAlign="right"}}}return b},fontFamily:function(){var a=this.strings[this.locale];return(a?a.fontFamily:null)},fontDirection:function(){var a=this.strings[this.locale];return(a?a.fontDirection:null)},plural:function(b){var a=this.strings[this.locale];if(a&amp;&amp;a.plural){return a.plural(b)}if(b==1){return 1}return 2},number:function(b){var a=this.strings[this.locale];if(a&amp;&amp;a.number){return a.number(b)}return b}};MathJax.Message={ready:false,log:[{}],current:null,textNodeBug:(navigator.vendor==="Apple Computer, Inc."&amp;&amp;typeof navigator.vendorSub==="undefined")||(window.hasOwnProperty&amp;&amp;window.hasOwnProperty("konqueror")),styles:{"#MathJax_Message":{position:"fixed",left:"1px",bottom:"2px","background-color":"#E6E6E6",border:"1px solid #959595",margin:"0px",padding:"2px 8px","z-index":"102",color:"black","font-size":"80%",width:"auto","white-space":"nowrap"},"#MathJax_MSIE_Frame":{position:"absolute",top:0,left:0,width:"0px","z-index":101,border:"0px",margin:"0px",padding:"0px"}},browsers:{MSIE:function(a){MathJax.Message.msieFixedPositionBug=((document.documentMode||0)&lt;7);if(MathJax.Message.msieFixedPositionBug){MathJax.Hub.config.styles["#MathJax_Message"].position="absolute"}MathJax.Message.quirks=(document.compatMode==="BackCompat")},Chrome:function(a){MathJax.Hub.config.styles["#MathJax_Message"].bottom="1.5em";MathJax.Hub.config.styles["#MathJax_Message"].left="1em"}},Init:function(a){if(a){this.ready=true}if(!document.body||!this.ready){return false}if(this.div&amp;&amp;this.div.parentNode==null){this.div=document.getElementById("MathJax_Message");if(this.div){this.text=this.div.firstChild}}if(!this.div){var b=document.body;if(this.msieFixedPositionBug&amp;&amp;window.attachEvent){b=this.frame=this.addDiv(document.body);b.removeAttribute("id");b.style.position="absolute";b.style.border=b.style.margin=b.style.padding="0px";b.style.zIndex="101";b.style.height="0px";b=this.addDiv(b);b.id="MathJax_MSIE_Frame";window.attachEvent("onscroll",this.MoveFrame);window.attachEvent("onresize",this.MoveFrame);this.MoveFrame()}this.div=this.addDiv(b);this.div.style.display="none";this.text=this.div.appendChild(document.createTextNode(""))}return true},addDiv:function(a){var b=document.createElement("div");b.id="MathJax_Message";if(a.firstChild){a.insertBefore(b,a.firstChild)}else{a.appendChild(b)}return b},MoveFrame:function(){var a=(MathJax.Message.quirks?document.body:document.documentElement);var b=MathJax.Message.frame;b.style.left=a.scrollLeft+"px";b.style.top=a.scrollTop+"px";b.style.width=a.clientWidth+"px";b=b.firstChild;b.style.height=a.clientHeight+"px"},localize:function(a){return MathJax.Localization._(a,a)},filterText:function(a,c,b){if(MathJax.Hub.config.messageStyle==="simple"){if(b==="LoadFile"){if(!this.loading){this.loading=this.localize("Loading")+" "}a=this.loading;this.loading+="."}else{if(b==="ProcessMath"){if(!this.processing){this.processing=this.localize("Processing")+" "}a=this.processing;this.processing+="."}else{if(b==="TypesetMath"){if(!this.typesetting){this.typesetting=this.localize("Typesetting")+" "}a=this.typesetting;this.typesetting+="."}}}}return a},clearCounts:function(){delete this.loading;delete this.processing;delete this.typesetting},Set:function(c,e,b){if(e==null){e=this.log.length;this.log[e]={}}var d="";if(MathJax.Object.isArray(c)){d=c[0];if(MathJax.Object.isArray(d)){d=d[1]}try{c=MathJax.Localization._.apply(MathJax.Localization,c)}catch(a){if(!a.restart){throw a}if(!a.restart.called){if(this.log[e].restarted==null){this.log[e].restarted=0}this.log[e].restarted++;delete this.log[e].cleared;MathJax.Callback.After(["Set",this,c,e,b],a.restart);return e}}}if(this.timer){clearTimeout(this.timer);delete this.timer}this.log[e].text=c;this.log[e].filteredText=c=this.filterText(c,e,d);if(typeof(this.log[e].next)==="undefined"){this.log[e].next=this.current;if(this.current!=null){this.log[this.current].prev=e}this.current=e}if(this.current===e&amp;&amp;MathJax.Hub.config.messageStyle!=="none"){if(this.Init()){if(this.textNodeBug){this.div.innerHTML=c}else{this.text.nodeValue=c}this.div.style.display="";if(this.status){window.status="";delete this.status}}else{window.status=c;this.status=true}}if(this.log[e].restarted){if(this.log[e].cleared){b=0}if(--this.log[e].restarted===0){delete this.log[e].cleared}}if(b){setTimeout(MathJax.Callback(["Clear",this,e]),b)}else{if(b==0){this.Clear(e,0)}}return e},Clear:function(b,a){if(this.log[b].prev!=null){this.log[this.log[b].prev].next=this.log[b].next}if(this.log[b].next!=null){this.log[this.log[b].next].prev=this.log[b].prev}if(this.current===b){this.current=this.log[b].next;if(this.text){if(this.div.parentNode==null){this.Init()}if(this.current==null){if(this.timer){clearTimeout(this.timer);delete this.timer}if(a==null){a=600}if(a===0){this.Remove()}else{this.timer=setTimeout(MathJax.Callback(["Remove",this]),a)}}else{if(MathJax.Hub.config.messageStyle!=="none"){if(this.textNodeBug){this.div.innerHTML=this.log[this.current].filteredText}else{this.text.nodeValue=this.log[this.current].filteredText}}}if(this.status){window.status="";delete this.status}}else{if(this.status){window.status=(this.current==null?"":this.log[this.current].text)}}}delete this.log[b].next;delete this.log[b].prev;delete this.log[b].filteredText;if(this.log[b].restarted){this.log[b].cleared=true}},Remove:function(){this.text.nodeValue="";this.div.style.display="none"},File:function(a){return this.Set(["LoadFile","Loading %1",a],null,null)},Log:function(){var b=[];for(var c=1,a=this.log.length;c&lt;a;c++){b[c]=this.log[c].text}return b.join("\n")}};MathJax.Hub={config:{root:"",config:[],styleSheets:[],styles:{".MathJax_Preview":{color:"#888"}},jax:[],extensions:[],preJax:null,postJax:null,displayAlign:"center",displayIndent:"0",preRemoveClass:"MathJax_Preview",showProcessingMessages:true,messageStyle:"normal",delayStartupUntil:"none",skipStartupTypeset:false,elements:[],positionToHash:true,showMathMenu:true,showMathMenuMSIE:true,menuSettings:{zoom:"None",CTRL:false,ALT:false,CMD:false,Shift:false,discoverable:false,zscale:"200%",renderer:null,font:"Auto",context:"MathJax",locale:null,mpContext:false,mpMouse:false,texHints:true,FastPreview:null,assistiveMML:null,inTabOrder:true,semantics:false},errorSettings:{message:["[",["MathProcessingError","Math Processing Error"],"]"],style:{color:"#CC0000","font-style":"italic"}},ignoreMMLattributes:{}},preProcessors:MathJax.Callback.Hooks(true),inputJax:{},outputJax:{order:{}},processSectionDelay:50,processUpdateTime:250,processUpdateDelay:10,signal:MathJax.Callback.Signal("Hub"),Config:function(a){this.Insert(this.config,a);if(this.config.Augment){this.Augment(this.config.Augment)}},CombineConfig:function(c,f){var b=this.config,g,e;c=c.split(/\./);for(var d=0,a=c.length;d&lt;a;d++){g=c[d];if(!b[g]){b[g]={}}e=b;b=b[g]}e[g]=b=this.Insert(f,b);return b},Register:{PreProcessor:function(){return MathJax.Hub.preProcessors.Add.apply(MathJax.Hub.preProcessors,arguments)},MessageHook:function(){return MathJax.Hub.signal.MessageHook.apply(MathJax.Hub.signal,arguments)},StartupHook:function(){return MathJax.Hub.Startup.signal.MessageHook.apply(MathJax.Hub.Startup.signal,arguments)},LoadHook:function(){return MathJax.Ajax.LoadHook.apply(MathJax.Ajax,arguments)}},UnRegister:{PreProcessor:function(a){MathJax.Hub.preProcessors.Remove(a)},MessageHook:function(a){MathJax.Hub.signal.RemoveHook(a)},StartupHook:function(a){MathJax.Hub.Startup.signal.RemoveHook(a)},LoadHook:function(a){MathJax.Ajax.removeHook(a)}},getAllJax:function(e){var c=[],b=this.elementScripts(e);for(var d=0,a=b.length;d&lt;a;d++){if(b[d].MathJax&amp;&amp;b[d].MathJax.elementJax){c.push(b[d].MathJax.elementJax)}}return c},getJaxByType:function(f,e){var c=[],b=this.elementScripts(e);for(var d=0,a=b.length;d&lt;a;d++){if(b[d].MathJax&amp;&amp;b[d].MathJax.elementJax&amp;&amp;b[d].MathJax.elementJax.mimeType===f){c.push(b[d].MathJax.elementJax)}}return c},getJaxByInputType:function(f,e){var c=[],b=this.elementScripts(e);for(var d=0,a=b.length;d&lt;a;d++){if(b[d].MathJax&amp;&amp;b[d].MathJax.elementJax&amp;&amp;b[d].type&amp;&amp;b[d].type.replace(/ *;(.|\s)*/,"")===f){c.push(b[d].MathJax.elementJax)}}return c},getJaxFor:function(a){if(typeof(a)==="string"){a=document.getElementById(a)}if(a&amp;&amp;a.MathJax){return a.MathJax.elementJax}if(this.isMathJaxNode(a)){if(!a.isMathJax){a=a.firstChild}while(a&amp;&amp;!a.jaxID){a=a.parentNode}if(a){return MathJax.OutputJax[a.jaxID].getJaxFromMath(a)}}return null},isJax:function(a){if(typeof(a)==="string"){a=document.getElementById(a)}if(this.isMathJaxNode(a)){return 1}if(a&amp;&amp;(a.tagName||"").toLowerCase()==="script"){if(a.MathJax){return(a.MathJax.state===MathJax.ElementJax.STATE.PROCESSED?1:-1)}if(a.type&amp;&amp;this.inputJax[a.type.replace(/ *;(.|\s)*/,"")]){return -1}}return 0},isMathJaxNode:function(a){return !!a&amp;&amp;(a.isMathJax||(a.className||"")==="MathJax_MathML")},setRenderer:function(d,c){if(!d){return}if(!MathJax.OutputJax[d]){this.config.menuSettings.renderer="";var b="[MathJax]/jax/output/"+d+"/config.js";return MathJax.Ajax.Require(b,["setRenderer",this,d,c])}else{this.config.menuSettings.renderer=d;if(c==null){c="jax/mml"}var a=this.outputJax;if(a[c]&amp;&amp;a[c].length){if(d!==a[c][0].id){a[c].unshift(MathJax.OutputJax[d]);return this.signal.Post(["Renderer Selected",d])}}return null}},Queue:function(){return this.queue.Push.apply(this.queue,arguments)},Typeset:function(c,d){if(!MathJax.isReady){return null}var b=this.elementCallback(c,d);if(b.count){var a=MathJax.Callback.Queue(["PreProcess",this,b.elements],["Process",this,b.elements])}return a.Push(b.callback)},PreProcess:function(e,g){var c=this.elementCallback(e,g);var b=MathJax.Callback.Queue();if(c.count){var f=(c.count===1?[c.elements]:c.elements);b.Push(["Post",this.signal,["Begin PreProcess",c.elements]]);for(var d=0,a=f.length;d&lt;a;d++){if(f[d]){b.Push(["Execute",this.preProcessors,f[d]])}}b.Push(["Post",this.signal,["End PreProcess",c.elements]])}return b.Push(c.callback)},Process:function(a,b){return this.takeAction("Process",a,b)},Update:function(a,b){return this.takeAction("Update",a,b)},Reprocess:function(a,b){return this.takeAction("Reprocess",a,b)},Rerender:function(a,b){return this.takeAction("Rerender",a,b)},takeAction:function(g,d,h){var c=this.elementCallback(d,h);var f=c.elements;var a=MathJax.Callback.Queue(["Clear",this.signal]);var e={scripts:[],start:new Date().getTime(),i:0,j:0,jax:{},jaxIDs:[]};if(c.count){var b=["Delay",MathJax.Callback,this.processSectionDelay];if(!b[2]){b={}}a.Push(["clearCounts",MathJax.Message],["Post",this.signal,["Begin "+g,f]],["Post",this.signal,["Begin Math",f,g]],["prepareScripts",this,g,f,e],["Post",this.signal,["Begin Math Input",f,g]],["processInput",this,e],["Post",this.signal,["End Math Input",f,g]],b,["prepareOutput",this,e,"preProcess"],b,["Post",this.signal,["Begin Math Output",f,g]],["processOutput",this,e],["Post",this.signal,["End Math Output",f,g]],b,["prepareOutput",this,e,"postProcess"],b,["Post",this.signal,["End Math",f,g]],["Post",this.signal,["End "+g,f]],["clearCounts",MathJax.Message])}return a.Push(c.callback)},scriptAction:{Process:function(a){},Update:function(b){var a=b.MathJax.elementJax;if(a&amp;&amp;a.needsUpdate()){a.Remove(true);b.MathJax.state=a.STATE.UPDATE}else{b.MathJax.state=a.STATE.PROCESSED}},Reprocess:function(b){var a=b.MathJax.elementJax;if(a){a.Remove(true);b.MathJax.state=a.STATE.UPDATE}},Rerender:function(b){var a=b.MathJax.elementJax;if(a){a.Remove(true);b.MathJax.state=a.STATE.OUTPUT}}},prepareScripts:function(h,e,g){if(arguments.callee.disabled){return}var b=this.elementScripts(e);var f=MathJax.ElementJax.STATE;for(var d=0,a=b.length;d&lt;a;d++){var c=b[d];if(c.type&amp;&amp;this.inputJax[c.type.replace(/ *;(.|\n)*/,"")]){if(c.MathJax){if(c.MathJax.elementJax&amp;&amp;c.MathJax.elementJax.hover){MathJax.Extension.MathEvents.Hover.ClearHover(c.MathJax.elementJax)}if(c.MathJax.state!==f.PENDING){this.scriptAction[h](c)}}if(!c.MathJax){c.MathJax={state:f.PENDING}}if(c.MathJax.error){delete c.MathJax.error}if(c.MathJax.state!==f.PROCESSED){g.scripts.push(c)}}}},checkScriptSiblings:function(a){if(a.MathJax.checked){return}var b=this.config,f=a.previousSibling;if(f&amp;&amp;f.nodeName==="#text"){var d,e,c=a.nextSibling;if(c&amp;&amp;c.nodeName!=="#text"){c=null}if(b.preJax){if(typeof(b.preJax)==="string"){b.preJax=new RegExp(b.preJax+"$")}d=f.nodeValue.match(b.preJax)}if(b.postJax&amp;&amp;c){if(typeof(b.postJax)==="string"){b.postJax=new RegExp("^"+b.postJax)}e=c.nodeValue.match(b.postJax)}if(d&amp;&amp;(!b.postJax||e)){f.nodeValue=f.nodeValue.replace(b.preJax,(d.length&gt;1?d[1]:""));f=null}if(e&amp;&amp;(!b.preJax||d)){c.nodeValue=c.nodeValue.replace(b.postJax,(e.length&gt;1?e[1]:""))}if(f&amp;&amp;!f.nodeValue.match(/\S/)){f=f.previousSibling}}if(b.preRemoveClass&amp;&amp;f&amp;&amp;f.className===b.preRemoveClass){a.MathJax.preview=f}a.MathJax.checked=1},processInput:function(a){var b,i=MathJax.ElementJax.STATE;var h,e,d=a.scripts.length;try{while(a.i&lt;d){h=a.scripts[a.i];if(!h){a.i++;continue}e=h.previousSibling;if(e&amp;&amp;e.className==="MathJax_Error"){e.parentNode.removeChild(e)}if(!h.parentNode||!h.MathJax||h.MathJax.state===i.PROCESSED){a.i++;continue}if(!h.MathJax.elementJax||h.MathJax.state===i.UPDATE){this.checkScriptSiblings(h);var g=h.type.replace(/ *;(.|\s)*/,"");var j=this.inputJax[g];b=j.Process(h,a);if(typeof b==="function"){if(b.called){continue}this.RestartAfter(b)}b=b.Attach(h,j.id);this.saveScript(b,a,h,i);this.postInputHooks.Execute(b,j.id,h)}else{if(h.MathJax.state===i.OUTPUT){this.saveScript(h.MathJax.elementJax,a,h,i)}}a.i++;var c=new Date().getTime();if(c-a.start&gt;this.processUpdateTime&amp;&amp;a.i&lt;a.scripts.length){a.start=c;this.RestartAfter(MathJax.Callback.Delay(1))}}}catch(f){return this.processError(f,a,"Input")}if(a.scripts.length&amp;&amp;this.config.showProcessingMessages){MathJax.Message.Set(["ProcessMath","Processing math: %1%%",100],0)}a.start=new Date().getTime();a.i=a.j=0;return null},postInputHooks:MathJax.Callback.Hooks(true),saveScript:function(a,d,b,c){if(!this.outputJax[a.mimeType]){b.MathJax.state=c.UPDATE;throw Error("No output jax registered for "+a.mimeType)}a.outputJax=this.outputJax[a.mimeType][0].id;if(!d.jax[a.outputJax]){if(d.jaxIDs.length===0){d.jax[a.outputJax]=d.scripts}else{if(d.jaxIDs.length===1){d.jax[d.jaxIDs[0]]=d.scripts.slice(0,d.i)}d.jax[a.outputJax]=[]}d.jaxIDs.push(a.outputJax)}if(d.jaxIDs.length&gt;1){d.jax[a.outputJax].push(b)}b.MathJax.state=c.OUTPUT},prepareOutput:function(c,f){while(c.j&lt;c.jaxIDs.length){var e=c.jaxIDs[c.j],d=MathJax.OutputJax[e];if(d[f]){try{var a=d[f](c);if(typeof a==="function"){if(a.called){continue}this.RestartAfter(a)}}catch(b){if(!b.restart){MathJax.Message.Set(["PrepError","Error preparing %1 output (%2)",e,f],null,600);MathJax.Hub.lastPrepError=b;c.j++}return MathJax.Callback.After(["prepareOutput",this,c,f],b.restart)}}c.j++}return null},processOutput:function(h){var b,g=MathJax.ElementJax.STATE,d,a=h.scripts.length;try{while(h.i&lt;a){d=h.scripts[h.i];if(!d||!d.parentNode||!d.MathJax||d.MathJax.error){h.i++;continue}var c=d.MathJax.elementJax;if(!c){h.i++;continue}b=MathJax.OutputJax[c.outputJax].Process(d,h);if(b!==false){d.MathJax.state=g.PROCESSED;if(d.MathJax.preview){d.MathJax.preview.innerHTML="";d.MathJax.preview.style.display="none"}this.signal.Post(["New Math",c.inputID])}h.i++;var e=new Date().getTime();if(e-h.start&gt;this.processUpdateTime&amp;&amp;h.i&lt;h.scripts.length){h.start=e;this.RestartAfter(MathJax.Callback.Delay(this.processUpdateDelay))}}}catch(f){return this.processError(f,h,"Output")}if(h.scripts.length&amp;&amp;this.config.showProcessingMessages){MathJax.Message.Set(["TypesetMath","Typesetting math: %1%%",100],0);MathJax.Message.Clear(0)}h.i=h.j=0;return null},processMessage:function(d,b){var a=Math.floor(d.i/(d.scripts.length)*100);var c=(b==="Output"?["TypesetMath","Typesetting math: %1%%"]:["ProcessMath","Processing math: %1%%"]);if(this.config.showProcessingMessages){MathJax.Message.Set(c.concat(a),0)}},processError:function(b,c,a){if(!b.restart){if(!this.config.errorSettings.message){throw b}this.formatError(c.scripts[c.i],b);c.i++}this.processMessage(c,a);return MathJax.Callback.After(["process"+a,this,c],b.restart)},formatError:function(b,f){var h=function(l,k,j,i){return MathJax.Localization._(l,k,j,i)};var e=h("ErrorMessage","Error: %1",f.message)+"\n";if(f.sourceURL||f.fileName){e+="\n"+h("ErrorFile","file: %1",f.sourceURL||f.fileName)}if(f.line||f.lineNumber){e+="\n"+h("ErrorLine","line: %1",f.line||f.lineNumber)}e+="\n\n"+h("ErrorTips","Debugging tips: use %1, inspect %2 in the browser console","'unpacked/MathJax.js'","'MathJax.Hub.lastError'");b.MathJax.error=MathJax.OutputJax.Error.Jax(e,b);if(b.MathJax.elementJax){b.MathJax.error.inputID=b.MathJax.elementJax.inputID}var g=this.config.errorSettings;var a=h(g.messageId,g.message);var c=MathJax.HTML.Element("span",{className:"MathJax_Error",jaxID:"Error",isMathJax:true,id:b.MathJax.error.inputID+"-Frame"},[["span",null,a]]);MathJax.Ajax.Require("[MathJax]/extensions/MathEvents.js",function(){var j=MathJax.Extension.MathEvents.Event,i=MathJax.Hub;c.oncontextmenu=j.Menu;c.onmousedown=j.Mousedown;c.onkeydown=j.Keydown;c.tabIndex=i.getTabOrder(i.getJaxFor(b))});var d=document.getElementById(c.id);if(d){d.parentNode.removeChild(d)}if(b.parentNode){b.parentNode.insertBefore(c,b)}if(b.MathJax.preview){b.MathJax.preview.innerHTML="";b.MathJax.preview.style.display="none"}this.lastError=f;this.signal.Post(["Math Processing Error",b,f])},RestartAfter:function(a){throw this.Insert(Error("restart"),{restart:MathJax.Callback(a)})},elementCallback:function(c,f){if(f==null&amp;&amp;(MathJax.Object.isArray(c)||typeof c==="function")){try{MathJax.Callback(c);f=c;c=null}catch(d){}}if(c==null){c=this.config.elements||[]}if(this.isHTMLCollection(c)){c=this.HTMLCollection2Array(c)}if(!MathJax.Object.isArray(c)){c=[c]}c=[].concat(c);for(var b=0,a=c.length;b&lt;a;b++){if(typeof(c[b])==="string"){c[b]=document.getElementById(c[b])}}if(!document.body){document.body=document.getElementsByTagName("body")[0]}if(c.length==0){c.push(document.body)}if(!f){f={}}return{count:c.length,elements:(c.length===1?c[0]:c),callback:f}},elementScripts:function(e){var b=[];if(MathJax.Object.isArray(e)||this.isHTMLCollection(e)){for(var d=0,a=e.length;d&lt;a;d++){var f=0;for(var c=0;c&lt;d&amp;&amp;!f;c++){f=e[c].contains(e[d])}if(!f){b.push.apply(b,this.elementScripts(e[d]))}}return b}if(typeof(e)==="string"){e=document.getElementById(e)}if(!document.body){document.body=document.getElementsByTagName("body")[0]}if(e==null){e=document.body}if(e.tagName!=null&amp;&amp;e.tagName.toLowerCase()==="script"){return[e]}b=e.getElementsByTagName("script");if(this.msieHTMLCollectionBug){b=this.HTMLCollection2Array(b)}return b},isHTMLCollection:function(a){return("HTMLCollection" in window&amp;&amp;typeof(a)==="object"&amp;&amp;a instanceof HTMLCollection)},HTMLCollection2Array:function(c){if(!this.msieHTMLCollectionBug){return[].slice.call(c)}var b=[];for(var d=0,a=c.length;d&lt;a;d++){b[d]=c[d]}return b},Insert:function(c,a){for(var b in a){if(a.hasOwnProperty(b)){if(typeof a[b]==="object"&amp;&amp;!(MathJax.Object.isArray(a[b]))&amp;&amp;(typeof c[b]==="object"||typeof c[b]==="function")){this.Insert(c[b],a[b])}else{c[b]=a[b]}}}return c},getTabOrder:function(a){return this.config.menuSettings.inTabOrder?0:-1},SplitList:("trim" in String.prototype?function(a){return a.trim().split(/\s+/)}:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"").split(/\s+/)})};MathJax.Hub.Insert(MathJax.Hub.config.styles,MathJax.Message.styles);MathJax.Hub.Insert(MathJax.Hub.config.styles,{".MathJax_Error":MathJax.Hub.config.errorSettings.style});MathJax.Extension={};MathJax.Hub.Configured=MathJax.Callback({});MathJax.Hub.Startup={script:"",queue:MathJax.Callback.Queue(),signal:MathJax.Callback.Signal("Startup"),params:{},Config:function(){this.queue.Push(["Post",this.signal,"Begin Config"]);if(MathJax.AuthorConfig&amp;&amp;MathJax.AuthorConfig.root){MathJax.Ajax.config.root=MathJax.AuthorConfig.root}if(this.params.locale){MathJax.Localization.resetLocale(this.params.locale);MathJax.Hub.config.menuSettings.locale=this.params.locale}if(this.params.config){var c=this.params.config.split(/,/);for(var b=0,a=c.length;b&lt;a;b++){if(!c[b].match(/\.js$/)){c[b]+=".js"}this.queue.Push(["Require",MathJax.Ajax,this.URL("config",c[b])])}}this.queue.Push(["Config",MathJax.Hub,MathJax.AuthorConfig]);if(this.script.match(/\S/)){this.queue.Push(this.script+";\n1;")}this.queue.Push(["ConfigDelay",this],["ConfigBlocks",this],[function(d){return d.loadArray(MathJax.Hub.config.config,"config",null,true)},this],["Post",this.signal,"End Config"])},ConfigDelay:function(){var a=this.params.delayStartupUntil||MathJax.Hub.config.delayStartupUntil;if(a==="onload"){return this.onload}if(a==="configured"){return MathJax.Hub.Configured}return a},ConfigBlocks:function(){var c=document.getElementsByTagName("script");var b=MathJax.Callback.Queue();for(var d=0,a=c.length;d&lt;a;d++){var e=String(c[d].type).replace(/ /g,"");if(e.match(/^text\/x-mathjax-config(;.*)?$/)&amp;&amp;!e.match(/;executed=true/)){c[d].type+=";executed=true";b.Push(c[d].innerHTML+";\n1;")}}return b.Push(function(){MathJax.Ajax.config.root=MathJax.Hub.config.root})},Cookie:function(){return this.queue.Push(["Post",this.signal,"Begin Cookie"],["Get",MathJax.HTML.Cookie,"menu",MathJax.Hub.config.menuSettings],[function(e){var d=e.menuSettings;if(d.locale){MathJax.Localization.resetLocale(d.locale)}var g=e.menuSettings.renderer,b=e.jax;if(g){var c="output/"+g;b.sort();for(var f=0,a=b.length;f&lt;a;f++){if(b[f].substr(0,7)==="output/"){break}}if(f==a-1){b.pop()}else{while(f&lt;a){if(b[f]===c){b.splice(f,1);break}f++}}b.unshift(c)}if(d.CHTMLpreview!=null){if(d.FastPreview==null){d.FastPreview=d.CHTMLpreview}delete d.CHTMLpreview}if(d.FastPreview&amp;&amp;!MathJax.Extension["fast-preview"]){MathJax.Hub.config.extensions.push("fast-preview.js")}if(e.menuSettings.assistiveMML&amp;&amp;!MathJax.Extension.AssistiveMML){MathJax.Hub.config.extensions.push("AssistiveMML.js")}},MathJax.Hub.config],["Post",this.signal,"End Cookie"])},Styles:function(){return this.queue.Push(["Post",this.signal,"Begin Styles"],["loadArray",this,MathJax.Hub.config.styleSheets,"config"],["Styles",MathJax.Ajax,MathJax.Hub.config.styles],["Post",this.signal,"End Styles"])},Jax:function(){var f=MathJax.Hub.config,c=MathJax.Hub.outputJax;for(var g=0,b=f.jax.length,d=0;g&lt;b;g++){var e=f.jax[g].substr(7);if(f.jax[g].substr(0,7)==="output/"&amp;&amp;c.order[e]==null){c.order[e]=d;d++}}var a=MathJax.Callback.Queue();return a.Push(["Post",this.signal,"Begin Jax"],["loadArray",this,f.jax,"jax","config.js"],["Post",this.signal,"End Jax"])},Extensions:function(){var a=MathJax.Callback.Queue();return a.Push(["Post",this.signal,"Begin Extensions"],["loadArray",this,MathJax.Hub.config.extensions,"extensions"],["Post",this.signal,"End Extensions"])},Message:function(){MathJax.Message.Init(true)},Menu:function(){var b=MathJax.Hub.config.menuSettings,a=MathJax.Hub.outputJax,d;for(var c in a){if(a.hasOwnProperty(c)){if(a[c].length){d=a[c];break}}}if(d&amp;&amp;d.length){if(b.renderer&amp;&amp;b.renderer!==d[0].id){d.unshift(MathJax.OutputJax[b.renderer])}b.renderer=d[0].id}},Hash:function(){if(MathJax.Hub.config.positionToHash&amp;&amp;document.location.hash&amp;&amp;document.body&amp;&amp;document.body.scrollIntoView){var d=document.location.hash.substr(1);var f=document.getElementById(d);if(!f){var c=document.getElementsByTagName("a");for(var e=0,b=c.length;e&lt;b;e++){if(c[e].name===d){f=c[e];break}}}if(f){while(!f.scrollIntoView){f=f.parentNode}f=this.HashCheck(f);if(f&amp;&amp;f.scrollIntoView){setTimeout(function(){f.scrollIntoView(true)},1)}}}},HashCheck:function(b){var a=MathJax.Hub.getJaxFor(b);if(a&amp;&amp;MathJax.OutputJax[a.outputJax].hashCheck){b=MathJax.OutputJax[a.outputJax].hashCheck(b)}return b},MenuZoom:function(){if(MathJax.Hub.config.showMathMenu){if(!MathJax.Extension.MathMenu){setTimeout(function(){MathJax.Callback.Queue(["Require",MathJax.Ajax,"[MathJax]/extensions/MathMenu.js",{}],["loadDomain",MathJax.Localization,"MathMenu"])},1000)}else{setTimeout(MathJax.Callback(["loadDomain",MathJax.Localization,"MathMenu"]),1000)}if(!MathJax.Extension.MathZoom){setTimeout(MathJax.Callback(["Require",MathJax.Ajax,"[MathJax]/extensions/MathZoom.js",{}]),2000)}}},onLoad:function(){var a=this.onload=MathJax.Callback(function(){MathJax.Hub.Startup.signal.Post("onLoad")});if(document.body&amp;&amp;document.readyState){if(MathJax.Hub.Browser.isMSIE){if(document.readyState==="complete"){return[a]}}else{if(document.readyState!=="loading"){return[a]}}}if(window.addEventListener){window.addEventListener("load",a,false);if(!this.params.noDOMContentEvent){window.addEventListener("DOMContentLoaded",a,false)}}else{if(window.attachEvent){window.attachEvent("onload",a)}else{window.onload=a}}return a},Typeset:function(a,b){if(MathJax.Hub.config.skipStartupTypeset){return function(){}}return this.queue.Push(["Post",this.signal,"Begin Typeset"],["Typeset",MathJax.Hub,a,b],["Post",this.signal,"End Typeset"])},URL:function(b,a){if(!a.match(/^([a-z]+:\/\/|\[|\/)/)){a="[MathJax]/"+b+"/"+a}return a},loadArray:function(b,f,c,a){if(b){if(!MathJax.Object.isArray(b)){b=[b]}if(b.length){var h=MathJax.Callback.Queue(),j={},e;for(var g=0,d=b.length;g&lt;d;g++){e=this.URL(f,b[g]);if(c){e+="/"+c}if(a){h.Push(["Require",MathJax.Ajax,e,j])}else{h.Push(MathJax.Ajax.Require(e,j))}}return h.Push({})}}return null}};(function(d){var b=window[d],e="["+d+"]";var c=b.Hub,a=b.Ajax,f=b.Callback;var g=MathJax.Object.Subclass({JAXFILE:"jax.js",require:null,config:{},Init:function(i,h){if(arguments.length===0){return this}return(this.constructor.Subclass(i,h))()},Augment:function(k,j){var i=this.constructor,h={};if(k!=null){for(var l in k){if(k.hasOwnProperty(l)){if(typeof k[l]==="function"){i.protoFunction(l,k[l])}else{h[l]=k[l]}}}if(k.toString!==i.prototype.toString&amp;&amp;k.toString!=={}.toString){i.protoFunction("toString",k.toString)}}c.Insert(i.prototype,h);i.Augment(null,j);return this},Translate:function(h,i){throw Error(this.directory+"/"+this.JAXFILE+" failed to define the Translate() method")},Register:function(h){},Config:function(){this.config=c.CombineConfig(this.id,this.config);if(this.config.Augment){this.Augment(this.config.Augment)}},Startup:function(){},loadComplete:function(i){if(i==="config.js"){return a.loadComplete(this.directory+"/"+i)}else{var h=f.Queue();h.Push(c.Register.StartupHook("End Config",{}),["Post",c.Startup.signal,this.id+" Jax Config"],["Config",this],["Post",c.Startup.signal,this.id+" Jax Require"],[function(j){return MathJax.Hub.Startup.loadArray(j.require,this.directory)},this],[function(j,k){return MathJax.Hub.Startup.loadArray(j.extensions,"extensions/"+k)},this.config||{},this.id],["Post",c.Startup.signal,this.id+" Jax Startup"],["Startup",this],["Post",c.Startup.signal,this.id+" Jax Ready"]);if(this.copyTranslate){h.Push([function(j){j.preProcess=j.preTranslate;j.Process=j.Translate;j.postProcess=j.postTranslate},this.constructor.prototype])}return h.Push(["loadComplete",a,this.directory+"/"+i])}}},{id:"Jax",version:"2.7.1",directory:e+"/jax",extensionDir:e+"/extensions"});b.InputJax=g.Subclass({elementJax:"mml",sourceMenuTitle:["Original","Original Form"],copyTranslate:true,Process:function(l,q){var j=f.Queue(),o;var k=this.elementJax;if(!b.Object.isArray(k)){k=[k]}for(var n=0,h=k.length;n&lt;h;n++){o=b.ElementJax.directory+"/"+k[n]+"/"+this.JAXFILE;if(!this.require){this.require=[]}else{if(!b.Object.isArray(this.require)){this.require=[this.require]}}this.require.push(o);j.Push(a.Require(o))}o=this.directory+"/"+this.JAXFILE;var p=j.Push(a.Require(o));if(!p.called){this.constructor.prototype.Process=function(){if(!p.called){return p}throw Error(o+" failed to load properly")}}k=c.outputJax["jax/"+k[0]];if(k){j.Push(a.Require(k[0].directory+"/"+this.JAXFILE))}return j.Push({})},needsUpdate:function(h){var i=h.SourceElement();return(h.originalText!==b.HTML.getScript(i))},Register:function(h){if(!c.inputJax){c.inputJax={}}c.inputJax[h]=this}},{id:"InputJax",version:"2.7.1",directory:g.directory+"/input",extensionDir:g.extensionDir});b.OutputJax=g.Subclass({copyTranslate:true,preProcess:function(j){var i,h=this.directory+"/"+this.JAXFILE;this.constructor.prototype.preProcess=function(k){if(!i.called){return i}throw Error(h+" failed to load properly")};i=a.Require(h);return i},Register:function(i){var h=c.outputJax;if(!h[i]){h[i]=[]}if(h[i].length&amp;&amp;(this.id===c.config.menuSettings.renderer||(h.order[this.id]||0)&lt;(h.order[h[i][0].id]||0))){h[i].unshift(this)}else{h[i].push(this)}if(!this.require){this.require=[]}else{if(!b.Object.isArray(this.require)){this.require=[this.require]}}this.require.push(b.ElementJax.directory+"/"+(i.split(/\//)[1])+"/"+this.JAXFILE)},Remove:function(h){}},{id:"OutputJax",version:"2.7.1",directory:g.directory+"/output",extensionDir:g.extensionDir,fontDir:e+(b.isPacked?"":"/..")+"/fonts",imageDir:e+(b.isPacked?"":"/..")+"/images"});b.ElementJax=g.Subclass({Init:function(i,h){return this.constructor.Subclass(i,h)},inputJax:null,outputJax:null,inputID:null,originalText:"",mimeType:"",sourceMenuTitle:["MathMLcode","MathML Code"],Text:function(i,j){var h=this.SourceElement();b.HTML.setScript(h,i);h.MathJax.state=this.STATE.UPDATE;return c.Update(h,j)},Reprocess:function(i){var h=this.SourceElement();h.MathJax.state=this.STATE.UPDATE;return c.Reprocess(h,i)},Update:function(h){return this.Rerender(h)},Rerender:function(i){var h=this.SourceElement();h.MathJax.state=this.STATE.OUTPUT;return c.Process(h,i)},Remove:function(h){if(this.hover){this.hover.clear(this)}b.OutputJax[this.outputJax].Remove(this);if(!h){c.signal.Post(["Remove Math",this.inputID]);this.Detach()}},needsUpdate:function(){return b.InputJax[this.inputJax].needsUpdate(this)},SourceElement:function(){return document.getElementById(this.inputID)},Attach:function(i,j){var h=i.MathJax.elementJax;if(i.MathJax.state===this.STATE.UPDATE){h.Clone(this)}else{h=i.MathJax.elementJax=this;if(i.id){this.inputID=i.id}else{i.id=this.inputID=b.ElementJax.GetID();this.newID=1}}h.originalText=b.HTML.getScript(i);h.inputJax=j;if(h.root){h.root.inputID=h.inputID}return h},Detach:function(){var h=this.SourceElement();if(!h){return}try{delete h.MathJax}catch(i){h.MathJax=null}if(this.newID){h.id=""}},Clone:function(h){var i;for(i in this){if(!this.hasOwnProperty(i)){continue}if(typeof(h[i])==="undefined"&amp;&amp;i!=="newID"){delete this[i]}}for(i in h){if(!h.hasOwnProperty(i)){continue}if(typeof(this[i])==="undefined"||(this[i]!==h[i]&amp;&amp;i!=="inputID")){this[i]=h[i]}}}},{id:"ElementJax",version:"2.7.1",directory:g.directory+"/element",extensionDir:g.extensionDir,ID:0,STATE:{PENDING:1,PROCESSED:2,UPDATE:3,OUTPUT:4},GetID:function(){this.ID++;return"MathJax-Element-"+this.ID},Subclass:function(){var h=g.Subclass.apply(this,arguments);h.loadComplete=this.prototype.loadComplete;return h}});b.ElementJax.prototype.STATE=b.ElementJax.STATE;b.OutputJax.Error={id:"Error",version:"2.7.1",config:{},errors:0,ContextMenu:function(){return b.Extension.MathEvents.Event.ContextMenu.apply(b.Extension.MathEvents.Event,arguments)},Mousedown:function(){return b.Extension.MathEvents.Event.AltContextMenu.apply(b.Extension.MathEvents.Event,arguments)},getJaxFromMath:function(h){return(h.nextSibling.MathJax||{}).error},Jax:function(j,i){var h=MathJax.Hub.inputJax[i.type.replace(/ *;(.|\s)*/,"")];this.errors++;return{inputJax:(h||{id:"Error"}).id,outputJax:"Error",inputID:"MathJax-Error-"+this.errors,sourceMenuTitle:["ErrorMessage","Error Message"],sourceMenuFormat:"Error",originalText:MathJax.HTML.getScript(i),errorText:j}}};b.InputJax.Error={id:"Error",version:"2.7.1",config:{},sourceMenuTitle:["Original","Original Form"]}})("MathJax");(function(o){var h=window[o];if(!h){h=window[o]={}}var d=h.Hub;var s=d.Startup;var w=d.config;var g=document.head||(document.getElementsByTagName("head")[0]);if(!g){g=document.childNodes[0]}var b=(document.documentElement||document).getElementsByTagName("script");if(b.length===0&amp;&amp;g.namespaceURI){b=document.getElementsByTagNameNS(g.namespaceURI,"script")}var f=new RegExp("(^|/)"+o+"\\.js(\\?.*)?$");for(var q=b.length-1;q&gt;=0;q--){if((b[q].src||"").match(f)){s.script=b[q].innerHTML;if(RegExp.$2){var t=RegExp.$2.substr(1).split(/\&amp;/);for(var p=0,l=t.length;p&lt;l;p++){var n=t[p].match(/(.*)=(.*)/);if(n){s.params[unescape(n[1])]=unescape(n[2])}else{s.params[t[p]]=true}}}w.root=b[q].src.replace(/(^|\/)[^\/]*(\?.*)?$/,"");h.Ajax.config.root=w.root;h.Ajax.params=s.params;break}}var k=navigator.userAgent;var a={isMac:(navigator.platform.substr(0,3)==="Mac"),isPC:(navigator.platform.substr(0,3)==="Win"),isMSIE:("ActiveXObject" in window&amp;&amp;"clipboardData" in window),isEdge:("MSGestureEvent" in window&amp;&amp;"chrome" in window&amp;&amp;window.chrome.loadTimes==null),isFirefox:(!!k.match(/Gecko\//)&amp;&amp;!k.match(/like Gecko/)),isSafari:(!!k.match(/ (Apple)?WebKit\//)&amp;&amp;!k.match(/ like iPhone /)&amp;&amp;(!window.chrome||window.chrome.app==null)),isChrome:("chrome" in window&amp;&amp;window.chrome.loadTimes!=null),isOpera:("opera" in window&amp;&amp;window.opera.version!=null),isKonqueror:("konqueror" in window&amp;&amp;navigator.vendor=="KDE"),versionAtLeast:function(y){var x=(this.version).split(".");y=(new String(y)).split(".");for(var z=0,j=y.length;z&lt;j;z++){if(x[z]!=y[z]){return parseInt(x[z]||"0")&gt;=parseInt(y[z])}}return true},Select:function(j){var i=j[d.Browser];if(i){return i(d.Browser)}return null}};var e=k.replace(/^Mozilla\/(\d+\.)+\d+ /,"").replace(/[a-z][-a-z0-9._: ]+\/\d+[^ ]*-[^ ]*\.([a-z][a-z])?\d+ /i,"").replace(/Gentoo |Ubuntu\/(\d+\.)*\d+ (\([^)]*\) )?/,"");d.Browser=d.Insert(d.Insert(new String("Unknown"),{version:"0.0"}),a);for(var v in a){if(a.hasOwnProperty(v)){if(a[v]&amp;&amp;v.substr(0,2)==="is"){v=v.slice(2);if(v==="Mac"||v==="PC"){continue}d.Browser=d.Insert(new String(v),a);var r=new RegExp(".*(Version/| Trident/.*; rv:)((?:\\d+\\.)+\\d+)|.*("+v+")"+(v=="MSIE"?" ":"/")+"((?:\\d+\\.)*\\d+)|(?:^|\\(| )([a-z][-a-z0-9._: ]+|(?:Apple)?WebKit)/((?:\\d+\\.)+\\d+)");var u=r.exec(e)||["","","","unknown","0.0"];d.Browser.name=(u[1]!=""?v:(u[3]||u[5]));d.Browser.version=u[2]||u[4]||u[6];break}}}try{d.Browser.Select({Safari:function(j){var i=parseInt((String(j.version).split("."))[0]);if(i&gt;85){j.webkit=j.version}if(i&gt;=538){j.version="8.0"}else{if(i&gt;=537){j.version="7.0"}else{if(i&gt;=536){j.version="6.0"}else{if(i&gt;=534){j.version="5.1"}else{if(i&gt;=533){j.version="5.0"}else{if(i&gt;=526){j.version="4.0"}else{if(i&gt;=525){j.version="3.1"}else{if(i&gt;500){j.version="3.0"}else{if(i&gt;400){j.version="2.0"}else{if(i&gt;85){j.version="1.0"}}}}}}}}}}j.webkit=(navigator.appVersion.match(/WebKit\/(\d+)\./))[1];j.isMobile=(navigator.appVersion.match(/Mobile/i)!=null);j.noContextMenu=j.isMobile},Firefox:function(j){if((j.version==="0.0"||k.match(/Firefox/)==null)&amp;&amp;navigator.product==="Gecko"){var m=k.match(/[\/ ]rv:(\d+\.\d.*?)[\) ]/);if(m){j.version=m[1]}else{var i=(navigator.buildID||navigator.productSub||"0").substr(0,8);if(i&gt;="20111220"){j.version="9.0"}else{if(i&gt;="20111120"){j.version="8.0"}else{if(i&gt;="20110927"){j.version="7.0"}else{if(i&gt;="20110816"){j.version="6.0"}else{if(i&gt;="20110621"){j.version="5.0"}else{if(i&gt;="20110320"){j.version="4.0"}else{if(i&gt;="20100121"){j.version="3.6"}else{if(i&gt;="20090630"){j.version="3.5"}else{if(i&gt;="20080617"){j.version="3.0"}else{if(i&gt;="20061024"){j.version="2.0"}}}}}}}}}}}}j.isMobile=(navigator.appVersion.match(/Android/i)!=null||k.match(/ Fennec\//)!=null||k.match(/Mobile/)!=null)},Chrome:function(i){i.noContextMenu=i.isMobile=!!navigator.userAgent.match(/ Mobile[ \/]/)},Opera:function(i){i.version=opera.version()},Edge:function(i){i.isMobile=!!navigator.userAgent.match(/ Phone/)},MSIE:function(j){j.isMobile=!!navigator.userAgent.match(/ Phone/);j.isIE9=!!(document.documentMode&amp;&amp;(window.performance||window.msPerformance));MathJax.HTML.setScriptBug=!j.isIE9||document.documentMode&lt;9;MathJax.Hub.msieHTMLCollectionBug=(document.documentMode&lt;9);if(document.documentMode&lt;10&amp;&amp;!s.params.NoMathPlayer){try{new ActiveXObject("MathPlayer.Factory.1");j.hasMathPlayer=true}catch(m){}try{if(j.hasMathPlayer){var i=document.createElement("object");i.id="mathplayer";i.classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987";g.appendChild(i);document.namespaces.add("m","http://www.w3.org/1998/Math/MathML");j.mpNamespace=true;if(document.readyState&amp;&amp;(document.readyState==="loading"||document.readyState==="interactive")){document.write('&lt;?import namespace="m" implementation="#MathPlayer"&gt;');j.mpImported=true}}else{document.namespaces.add("mjx_IE_fix","http://www.w3.org/1999/xlink")}}catch(m){}}}})}catch(c){console.error(c.message)}d.Browser.Select(MathJax.Message.browsers);if(h.AuthorConfig&amp;&amp;typeof h.AuthorConfig.AuthorInit==="function"){h.AuthorConfig.AuthorInit()}d.queue=h.Callback.Queue();d.queue.Push(["Post",s.signal,"Begin"],["Config",s],["Cookie",s],["Styles",s],["Message",s],function(){var i=h.Callback.Queue(s.Jax(),s.Extensions());return i.Push({})},["Menu",s],s.onLoad(),function(){MathJax.isReady=true},["Typeset",s],["Hash",s],["MenuZoom",s],["Post",s.signal,"End"])})("MathJax")}};
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.123">@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.124">function presentation(name, content, index, theme, codeTheme) {

  if (!name) { name = 'default' }
  if (!index) { index = 0 }
  if (!codeTheme) { codeTheme = 'zenburn'}
  if (!theme) { theme = 'black'}

  const html = `
&lt;!doctype html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;!--&lt;base href="static/reveal/"--&gt;
        &lt;base href="https://cdn.jsdelivr.net/npm/reveal.js@3.6.0/"&gt;
        
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;
        &lt;title&gt;${name}&lt;/title&gt;
        &lt;!--
        &lt;link rel="stylesheet" href="css/reveal.css"&gt;
        &lt;link id="theme" rel="stylesheet" href="css/theme/${theme}.css"&gt;
    --&gt;
    
&lt;!--
        &lt;link rel="stylesheet" href="css/reveal.css"&gt;
--&gt;
    &lt;style type="text/css"&gt;
    /*!
     * reveal.js
     * http://revealjs.com
     * MIT licensed
     *
     * Copyright (C) 2017 Hakim El Hattab, http://hakim.se
     */
    /*********************************************
     * RESET STYLES
     *********************************************/
    html, body, .reveal div, .reveal span, .reveal applet, .reveal object, .reveal iframe,
    .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6, .reveal p, .reveal blockquote, .reveal pre,
    .reveal a, .reveal abbr, .reveal acronym, .reveal address, .reveal big, .reveal cite, .reveal code,
    .reveal del, .reveal dfn, .reveal em, .reveal img, .reveal ins, .reveal kbd, .reveal q, .reveal s, .reveal samp,
    .reveal small, .reveal strike, .reveal strong, .reveal sub, .reveal sup, .reveal tt, .reveal var,
    .reveal b, .reveal u, .reveal center,
    .reveal dl, .reveal dt, .reveal dd, .reveal ol, .reveal ul, .reveal li,
    .reveal fieldset, .reveal form, .reveal label, .reveal legend,
    .reveal table, .reveal caption, .reveal tbody, .reveal tfoot, .reveal thead, .reveal tr, .reveal th, .reveal td,
    .reveal article, .reveal aside, .reveal canvas, .reveal details, .reveal embed,
    .reveal figure, .reveal figcaption, .reveal footer, .reveal header, .reveal hgroup,
    .reveal menu, .reveal nav, .reveal output, .reveal ruby, .reveal section, .reveal summary,
    .reveal time, .reveal mark, .reveal audio, .reveal video {
      margin: 0;
      padding: 0;
      border: 0;
      font-size: 100%;
      /* font: inherit; */
      vertical-align: baseline; }
    
    .reveal article, .reveal aside, .reveal details, .reveal figcaption, .reveal figure,
    .reveal footer, .reveal header, .reveal hgroup, .reveal menu, .reveal nav, .reveal section {
      display: block; }
    
    /*********************************************
     * GLOBAL STYLES
     *********************************************/
    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden; }
    
    body {
      position: relative;
      line-height: 1;
      background-color: #fff;
      color: #000; }
    
    /*********************************************
     * VIEW FRAGMENTS
     *********************************************/
    .reveal .slides section .fragment {
      opacity: 0;
      visibility: hidden;
      transition: all .2s ease; }
    .reveal .slides section .fragment.visible {
      opacity: 1;
      visibility: inherit; }
    
    .reveal .slides section .fragment.grow {
      opacity: 1;
      visibility: inherit; }
    .reveal .slides section .fragment.grow.visible {
      -webkit-transform: scale(1.3);
      transform: scale(1.3); }
    
    .reveal .slides section .fragment.shrink {
      opacity: 1;
      visibility: inherit; }
    .reveal .slides section .fragment.shrink.visible {
      -webkit-transform: scale(0.7);
      transform: scale(0.7); }
    
    .reveal .slides section .fragment.zoom-in {
      -webkit-transform: scale(0.1);
      transform: scale(0.1); }
    .reveal .slides section .fragment.zoom-in.visible {
      -webkit-transform: none;
      transform: none; }
    
    .reveal .slides section .fragment.fade-out {
      opacity: 1;
      visibility: inherit; }
    .reveal .slides section .fragment.fade-out.visible {
      opacity: 0;
      visibility: hidden; }
    
    .reveal .slides section .fragment.semi-fade-out {
      opacity: 1;
      visibility: inherit; }
    .reveal .slides section .fragment.semi-fade-out.visible {
      opacity: 0.5;
      visibility: inherit; }
    
    .reveal .slides section .fragment.strike {
      opacity: 1;
      visibility: inherit; }
    .reveal .slides section .fragment.strike.visible {
      text-decoration: line-through; }
    
    .reveal .slides section .fragment.fade-up {
      -webkit-transform: translate(0, 20%);
      transform: translate(0, 20%); }
    .reveal .slides section .fragment.fade-up.visible {
      -webkit-transform: translate(0, 0);
      transform: translate(0, 0); }
    
    .reveal .slides section .fragment.fade-down {
      -webkit-transform: translate(0, -20%);
      transform: translate(0, -20%); }
    .reveal .slides section .fragment.fade-down.visible {
      -webkit-transform: translate(0, 0);
      transform: translate(0, 0); }
    
    .reveal .slides section .fragment.fade-right {
      -webkit-transform: translate(-20%, 0);
      transform: translate(-20%, 0); }
    .reveal .slides section .fragment.fade-right.visible {
      -webkit-transform: translate(0, 0);
      transform: translate(0, 0); }
    
    .reveal .slides section .fragment.fade-left {
      -webkit-transform: translate(20%, 0);
      transform: translate(20%, 0); }
    .reveal .slides section .fragment.fade-left.visible {
      -webkit-transform: translate(0, 0);
      transform: translate(0, 0); }
    
    .reveal .slides section .fragment.current-visible {
      opacity: 0;
      visibility: hidden; }
    .reveal .slides section .fragment.current-visible.current-fragment {
      opacity: 1;
      visibility: inherit; }
    
    .reveal .slides section .fragment.highlight-red,
    .reveal .slides section .fragment.highlight-current-red,
    .reveal .slides section .fragment.highlight-green,
    .reveal .slides section .fragment.highlight-current-green,
    .reveal .slides section .fragment.highlight-blue,
    .reveal .slides section .fragment.highlight-current-blue {
      opacity: 1;
      visibility: inherit; }
    
    .reveal .slides section .fragment.highlight-red.visible {
      color: #ff2c2d; }
    
    .reveal .slides section .fragment.highlight-green.visible {
      color: #17ff2e; }
    
    .reveal .slides section .fragment.highlight-blue.visible {
      color: #1b91ff; }
    
    .reveal .slides section .fragment.highlight-current-red.current-fragment {
      color: #ff2c2d; }
    
    .reveal .slides section .fragment.highlight-current-green.current-fragment {
      color: #17ff2e; }
    
    .reveal .slides section .fragment.highlight-current-blue.current-fragment {
      color: #1b91ff; }
    
    /*********************************************
     * DEFAULT ELEMENT STYLES
     *********************************************/
    /* Fixes issue in Chrome where italic fonts did not appear when printing to PDF */
    .reveal:after {
      content: '';
      font-style: italic; }
    
    .reveal iframe {
      z-index: 1; }
    
    /** Prevents layering issues in certain browser/transition combinations */
    .reveal a {
      position: relative; }
    
    .reveal .stretch {
      max-width: none;
      max-height: none; }
    
    .reveal pre.stretch code {
      height: 100%;
      max-height: 100%;
      box-sizing: border-box; }
    
    /*********************************************
     * CONTROLS
     *********************************************/
    @-webkit-keyframes bounce-right {
      0%, 10%, 25%, 40%, 50% {
        -webkit-transform: translateX(0);
        transform: translateX(0); }
      20% {
        -webkit-transform: translateX(10px);
        transform: translateX(10px); }
      30% {
        -webkit-transform: translateX(-5px);
        transform: translateX(-5px); } }
    @keyframes bounce-right {
      0%, 10%, 25%, 40%, 50% {
        -webkit-transform: translateX(0);
        transform: translateX(0); }
      20% {
        -webkit-transform: translateX(10px);
        transform: translateX(10px); }
      30% {
        -webkit-transform: translateX(-5px);
        transform: translateX(-5px); } }
    
    @-webkit-keyframes bounce-down {
      0%, 10%, 25%, 40%, 50% {
        -webkit-transform: translateY(0);
        transform: translateY(0); }
      20% {
        -webkit-transform: translateY(10px);
        transform: translateY(10px); }
      30% {
        -webkit-transform: translateY(-5px);
        transform: translateY(-5px); } }
    
    @keyframes bounce-down {
      0%, 10%, 25%, 40%, 50% {
        -webkit-transform: translateY(0);
        transform: translateY(0); }
      20% {
        -webkit-transform: translateY(10px);
        transform: translateY(10px); }
      30% {
        -webkit-transform: translateY(-5px);
        transform: translateY(-5px); } }
    
    .reveal .controls {
      display: none;
      position: absolute;
      top: auto;
      bottom: 12px;
      right: 12px;
      left: auto;
      z-index: 1;
      color: #000;
      pointer-events: none;
      font-size: 10px; }
    .reveal .controls button {
      position: absolute;
      padding: 0;
      background-color: transparent;
      border: 0;
      outline: 0;
      cursor: pointer;
      color: currentColor;
      -webkit-transform: scale(0.9999);
      transform: scale(0.9999);
      transition: color 0.2s ease, opacity 0.2s ease, -webkit-transform 0.2s ease;
      transition: color 0.2s ease, opacity 0.2s ease, transform 0.2s ease;
      z-index: 2;
      pointer-events: auto;
      font-size: inherit;
      visibility: hidden;
      opacity: 0;
      -webkit-appearance: none;
      -webkit-tap-highlight-color: transparent; }
    .reveal .controls .controls-arrow:before,
    .reveal .controls .controls-arrow:after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 2.6em;
      height: 0.5em;
      border-radius: 0.25em;
      background-color: currentColor;
      transition: all 0.15s ease, background-color 0.8s ease;
      -webkit-transform-origin: 0.2em 50%;
      transform-origin: 0.2em 50%;
      will-change: transform; }
    .reveal .controls .controls-arrow {
      position: relative;
      width: 3.6em;
      height: 3.6em; }
    .reveal .controls .controls-arrow:before {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(45deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(45deg); }
    .reveal .controls .controls-arrow:after {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-45deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(-45deg); }
    .reveal .controls .controls-arrow:hover:before {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(40deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(40deg); }
    .reveal .controls .controls-arrow:hover:after {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-40deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(-40deg); }
    .reveal .controls .controls-arrow:active:before {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(36deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(36deg); }
    .reveal .controls .controls-arrow:active:after {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-36deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(-36deg); }
    .reveal .controls .navigate-left {
      right: 6.4em;
      bottom: 3.2em;
      -webkit-transform: translateX(-10px);
      transform: translateX(-10px); }
    .reveal .controls .navigate-right {
      right: 0;
      bottom: 3.2em;
      -webkit-transform: translateX(10px);
      transform: translateX(10px); }
    .reveal .controls .navigate-right .controls-arrow {
      -webkit-transform: rotate(180deg);
      transform: rotate(180deg); }
    .reveal .controls .navigate-right.highlight {
      -webkit-animation: bounce-right 2s 50 both ease-out;
      animation: bounce-right 2s 50 both ease-out; }
    .reveal .controls .navigate-up {
      right: 3.2em;
      bottom: 6.4em;
      -webkit-transform: translateY(-10px);
      transform: translateY(-10px); }
    .reveal .controls .navigate-up .controls-arrow {
      -webkit-transform: rotate(90deg);
      transform: rotate(90deg); }
    .reveal .controls .navigate-down {
      right: 3.2em;
      bottom: 0;
      -webkit-transform: translateY(10px);
      transform: translateY(10px); }
    .reveal .controls .navigate-down .controls-arrow {
      -webkit-transform: rotate(-90deg);
      transform: rotate(-90deg); }
    .reveal .controls .navigate-down.highlight {
      -webkit-animation: bounce-down 2s 50 both ease-out;
      animation: bounce-down 2s 50 both ease-out; }
    .reveal .controls[data-controls-back-arrows="faded"] .navigate-left.enabled,
    .reveal .controls[data-controls-back-arrows="faded"] .navigate-up.enabled {
      opacity: 0.3; }
    .reveal .controls[data-controls-back-arrows="faded"] .navigate-left.enabled:hover,
    .reveal .controls[data-controls-back-arrows="faded"] .navigate-up.enabled:hover {
      opacity: 1; }
    .reveal .controls[data-controls-back-arrows="hidden"] .navigate-left.enabled,
    .reveal .controls[data-controls-back-arrows="hidden"] .navigate-up.enabled {
      opacity: 0;
      visibility: hidden; }
    .reveal .controls .enabled {
      visibility: visible;
      opacity: 0.9;
      cursor: pointer;
      -webkit-transform: none;
      transform: none; }
    .reveal .controls .enabled.fragmented {
      opacity: 0.5; }
    .reveal .controls .enabled:hover,
    .reveal .controls .enabled.fragmented:hover {
      opacity: 1; }
    
    .reveal:not(.has-vertical-slides) .controls .navigate-left {
      bottom: 1.4em;
      right: 5.5em; }
    
    .reveal:not(.has-vertical-slides) .controls .navigate-right {
      bottom: 1.4em;
      right: 0.5em; }
    
    .reveal:not(.has-horizontal-slides) .controls .navigate-up {
      right: 1.4em;
      bottom: 5em; }
    
    .reveal:not(.has-horizontal-slides) .controls .navigate-down {
      right: 1.4em;
      bottom: 0.5em; }
    
    .reveal.has-dark-background .controls {
      color: #fff; }
    
    .reveal.has-light-background .controls {
      color: #000; }
    
    .reveal.no-hover .controls .controls-arrow:hover:before,
    .reveal.no-hover .controls .controls-arrow:active:before {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(45deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(45deg); }
    
    .reveal.no-hover .controls .controls-arrow:hover:after,
    .reveal.no-hover .controls .controls-arrow:active:after {
      -webkit-transform: translateX(0.5em) translateY(1.55em) rotate(-45deg);
      transform: translateX(0.5em) translateY(1.55em) rotate(-45deg); }
    
    @media screen and (min-width: 500px) {
      .reveal .controls[data-controls-layout="edges"] {
        top: 0;
        right: 0;
        bottom: 0;
        left: 0; }
      .reveal .controls[data-controls-layout="edges"] .navigate-left,
      .reveal .controls[data-controls-layout="edges"] .navigate-right,
      .reveal .controls[data-controls-layout="edges"] .navigate-up,
      .reveal .controls[data-controls-layout="edges"] .navigate-down {
        bottom: auto;
        right: auto; }
      .reveal .controls[data-controls-layout="edges"] .navigate-left {
        top: 50%;
        left: 8px;
        margin-top: -1.8em; }
      .reveal .controls[data-controls-layout="edges"] .navigate-right {
        top: 50%;
        right: 8px;
        margin-top: -1.8em; }
      .reveal .controls[data-controls-layout="edges"] .navigate-up {
        top: 8px;
        left: 50%;
        margin-left: -1.8em; }
      .reveal .controls[data-controls-layout="edges"] .navigate-down {
        bottom: 8px;
        left: 50%;
        margin-left: -1.8em; } }
    
    /*********************************************
     * PROGRESS BAR
     *********************************************/
    .reveal .progress {
      position: absolute;
      display: none;
      height: 3px;
      width: 100%;
      bottom: 0;
      left: 0;
      z-index: 10;
      background-color: rgba(0, 0, 0, 0.2);
      color: #fff; }
    
    .reveal .progress:after {
      content: '';
      display: block;
      position: absolute;
      height: 10px;
      width: 100%;
      top: -10px; }
    
    .reveal .progress span {
      display: block;
      height: 100%;
      width: 0px;
      background-color: currentColor;
      transition: width 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985); }
    
    /*********************************************
     * SLIDE NUMBER
     *********************************************/
    .reveal .slide-number {
      position: fixed;
      display: block;
      right: 8px;
      bottom: 8px;
      z-index: 31;
      font-family: Helvetica, sans-serif;
      font-size: 12px;
      line-height: 1;
      color: #fff;
      background-color: rgba(0, 0, 0, 0.4);
      padding: 5px; }
    
    .reveal .slide-number-delimiter {
      margin: 0 3px; }
    
    /*********************************************
     * SLIDES
     *********************************************/
    .reveal {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
      -ms-touch-action: none;
      touch-action: none; }
    
    @media only screen and (orientation: landscape) {
      .reveal.ua-iphone {
        position: fixed; } }
    
    .reveal .slides {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      margin: auto;
      pointer-events: none;
      overflow: visible;
      z-index: 1;
      text-align: center;
      -webkit-perspective: 600px;
      perspective: 600px;
      -webkit-perspective-origin: 50% 40%;
      perspective-origin: 50% 40%; }
    
    .reveal .slides &gt; section {
      -ms-perspective: 600px; }
    
    .reveal .slides &gt; section,
    .reveal .slides &gt; section &gt; section {
      display: none;
      position: absolute;
      width: 100%;
      padding: 20px 0px;
      pointer-events: auto;
      z-index: 10;
      -webkit-transform-style: flat;
      transform-style: flat;
      transition: -webkit-transform-origin 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), -webkit-transform 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), visibility 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), opacity 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985);
      transition: transform-origin 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), transform 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), visibility 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985), opacity 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985); }
    
    /* Global transition speed settings */
    .reveal[data-transition-speed="fast"] .slides section {
      transition-duration: 400ms; }
    
    .reveal[data-transition-speed="slow"] .slides section {
      transition-duration: 1200ms; }
    
    /* Slide-specific transition speed overrides */
    .reveal .slides section[data-transition-speed="fast"] {
      transition-duration: 400ms; }
    
    .reveal .slides section[data-transition-speed="slow"] {
      transition-duration: 1200ms; }
    
    .reveal .slides &gt; section.stack {
      padding-top: 0;
      padding-bottom: 0; }
    
    .reveal .slides &gt; section.present,
    .reveal .slides &gt; section &gt; section.present {
      display: block;
      z-index: 11;
      opacity: 1; }
    
    .reveal .slides &gt; section:empty,
    .reveal .slides &gt; section &gt; section:empty,
    .reveal .slides &gt; section[data-background-interactive],
    .reveal .slides &gt; section &gt; section[data-background-interactive] {
      pointer-events: none; }
    
    .reveal.center,
    .reveal.center .slides,
    .reveal.center .slides section {
      min-height: 0 !important; }
    
    /* Don't allow interaction with invisible slides */
    .reveal .slides &gt; section.future,
    .reveal .slides &gt; section &gt; section.future,
    .reveal .slides &gt; section.past,
    .reveal .slides &gt; section &gt; section.past {
      pointer-events: none; }
    
    .reveal.overview .slides &gt; section,
    .reveal.overview .slides &gt; section &gt; section {
      pointer-events: auto; }
    
    .reveal .slides &gt; section.past,
    .reveal .slides &gt; section.future,
    .reveal .slides &gt; section &gt; section.past,
    .reveal .slides &gt; section &gt; section.future {
      opacity: 0; }
    
    /*********************************************
     * Mixins for readability of transitions
     *********************************************/
    /*********************************************
     * SLIDE TRANSITION
     * Aliased 'linear' for backwards compatibility
     *********************************************/
    .reveal.slide section {
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden; }
    
    .reveal .slides &gt; section[data-transition=slide].past,
    .reveal .slides &gt; section[data-transition~=slide-out].past,
    .reveal.slide .slides &gt; section:not([data-transition]).past {
      -webkit-transform: translate(-150%, 0);
      transform: translate(-150%, 0); }
    
    .reveal .slides &gt; section[data-transition=slide].future,
    .reveal .slides &gt; section[data-transition~=slide-in].future,
    .reveal.slide .slides &gt; section:not([data-transition]).future {
      -webkit-transform: translate(150%, 0);
      transform: translate(150%, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=slide].past,
    .reveal .slides &gt; section &gt; section[data-transition~=slide-out].past,
    .reveal.slide .slides &gt; section &gt; section:not([data-transition]).past {
      -webkit-transform: translate(0, -150%);
      transform: translate(0, -150%); }
    
    .reveal .slides &gt; section &gt; section[data-transition=slide].future,
    .reveal .slides &gt; section &gt; section[data-transition~=slide-in].future,
    .reveal.slide .slides &gt; section &gt; section:not([data-transition]).future {
      -webkit-transform: translate(0, 150%);
      transform: translate(0, 150%); }
    
    .reveal.linear section {
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden; }
    
    .reveal .slides &gt; section[data-transition=linear].past,
    .reveal .slides &gt; section[data-transition~=linear-out].past,
    .reveal.linear .slides &gt; section:not([data-transition]).past {
      -webkit-transform: translate(-150%, 0);
      transform: translate(-150%, 0); }
    
    .reveal .slides &gt; section[data-transition=linear].future,
    .reveal .slides &gt; section[data-transition~=linear-in].future,
    .reveal.linear .slides &gt; section:not([data-transition]).future {
      -webkit-transform: translate(150%, 0);
      transform: translate(150%, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=linear].past,
    .reveal .slides &gt; section &gt; section[data-transition~=linear-out].past,
    .reveal.linear .slides &gt; section &gt; section:not([data-transition]).past {
      -webkit-transform: translate(0, -150%);
      transform: translate(0, -150%); }
    
    .reveal .slides &gt; section &gt; section[data-transition=linear].future,
    .reveal .slides &gt; section &gt; section[data-transition~=linear-in].future,
    .reveal.linear .slides &gt; section &gt; section:not([data-transition]).future {
      -webkit-transform: translate(0, 150%);
      transform: translate(0, 150%); }
    
    /*********************************************
     * CONVEX TRANSITION
     * Aliased 'default' for backwards compatibility
     *********************************************/
    .reveal .slides section[data-transition=default].stack,
    .reveal.default .slides section.stack {
      -webkit-transform-style: preserve-3d;
      transform-style: preserve-3d; }
    
    .reveal .slides &gt; section[data-transition=default].past,
    .reveal .slides &gt; section[data-transition~=default-out].past,
    .reveal.default .slides &gt; section:not([data-transition]).past {
      -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
      transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0); }
    
    .reveal .slides &gt; section[data-transition=default].future,
    .reveal .slides &gt; section[data-transition~=default-in].future,
    .reveal.default .slides &gt; section:not([data-transition]).future {
      -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
      transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=default].past,
    .reveal .slides &gt; section &gt; section[data-transition~=default-out].past,
    .reveal.default .slides &gt; section &gt; section:not([data-transition]).past {
      -webkit-transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
      transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=default].future,
    .reveal .slides &gt; section &gt; section[data-transition~=default-in].future,
    .reveal.default .slides &gt; section &gt; section:not([data-transition]).future {
      -webkit-transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
      transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0); }
    
    .reveal .slides section[data-transition=convex].stack,
    .reveal.convex .slides section.stack {
      -webkit-transform-style: preserve-3d;
      transform-style: preserve-3d; }
    
    .reveal .slides &gt; section[data-transition=convex].past,
    .reveal .slides &gt; section[data-transition~=convex-out].past,
    .reveal.convex .slides &gt; section:not([data-transition]).past {
      -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
      transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0); }
    
    .reveal .slides &gt; section[data-transition=convex].future,
    .reveal .slides &gt; section[data-transition~=convex-in].future,
    .reveal.convex .slides &gt; section:not([data-transition]).future {
      -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
      transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=convex].past,
    .reveal .slides &gt; section &gt; section[data-transition~=convex-out].past,
    .reveal.convex .slides &gt; section &gt; section:not([data-transition]).past {
      -webkit-transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0);
      transform: translate3d(0, -300px, 0) rotateX(70deg) translate3d(0, -300px, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=convex].future,
    .reveal .slides &gt; section &gt; section[data-transition~=convex-in].future,
    .reveal.convex .slides &gt; section &gt; section:not([data-transition]).future {
      -webkit-transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0);
      transform: translate3d(0, 300px, 0) rotateX(-70deg) translate3d(0, 300px, 0); }
    
    /*********************************************
     * CONCAVE TRANSITION
     *********************************************/
    .reveal .slides section[data-transition=concave].stack,
    .reveal.concave .slides section.stack {
      -webkit-transform-style: preserve-3d;
      transform-style: preserve-3d; }
    
    .reveal .slides &gt; section[data-transition=concave].past,
    .reveal .slides &gt; section[data-transition~=concave-out].past,
    .reveal.concave .slides &gt; section:not([data-transition]).past {
      -webkit-transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0);
      transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0); }
    
    .reveal .slides &gt; section[data-transition=concave].future,
    .reveal .slides &gt; section[data-transition~=concave-in].future,
    .reveal.concave .slides &gt; section:not([data-transition]).future {
      -webkit-transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0);
      transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=concave].past,
    .reveal .slides &gt; section &gt; section[data-transition~=concave-out].past,
    .reveal.concave .slides &gt; section &gt; section:not([data-transition]).past {
      -webkit-transform: translate3d(0, -80%, 0) rotateX(-70deg) translate3d(0, -80%, 0);
      transform: translate3d(0, -80%, 0) rotateX(-70deg) translate3d(0, -80%, 0); }
    
    .reveal .slides &gt; section &gt; section[data-transition=concave].future,
    .reveal .slides &gt; section &gt; section[data-transition~=concave-in].future,
    .reveal.concave .slides &gt; section &gt; section:not([data-transition]).future {
      -webkit-transform: translate3d(0, 80%, 0) rotateX(70deg) translate3d(0, 80%, 0);
      transform: translate3d(0, 80%, 0) rotateX(70deg) translate3d(0, 80%, 0); }
    
    /*********************************************
     * ZOOM TRANSITION
     *********************************************/
    .reveal .slides section[data-transition=zoom],
    .reveal.zoom .slides section:not([data-transition]) {
      transition-timing-function: ease; }
    
    .reveal .slides &gt; section[data-transition=zoom].past,
    .reveal .slides &gt; section[data-transition~=zoom-out].past,
    .reveal.zoom .slides &gt; section:not([data-transition]).past {
      visibility: hidden;
      -webkit-transform: scale(16);
      transform: scale(16); }
    
    .reveal .slides &gt; section[data-transition=zoom].future,
    .reveal .slides &gt; section[data-transition~=zoom-in].future,
    .reveal.zoom .slides &gt; section:not([data-transition]).future {
      visibility: hidden;
      -webkit-transform: scale(0.2);
      transform: scale(0.2); }
    
    .reveal .slides &gt; section &gt; section[data-transition=zoom].past,
    .reveal .slides &gt; section &gt; section[data-transition~=zoom-out].past,
    .reveal.zoom .slides &gt; section &gt; section:not([data-transition]).past {
      -webkit-transform: translate(0, -150%);
      transform: translate(0, -150%); }
    
    .reveal .slides &gt; section &gt; section[data-transition=zoom].future,
    .reveal .slides &gt; section &gt; section[data-transition~=zoom-in].future,
    .reveal.zoom .slides &gt; section &gt; section:not([data-transition]).future {
      -webkit-transform: translate(0, 150%);
      transform: translate(0, 150%); }
    
    /*********************************************
     * CUBE TRANSITION
     *
     * WARNING:
     * this is deprecated and will be removed in a
     * future version.
     *********************************************/
    .reveal.cube .slides {
      -webkit-perspective: 1300px;
      perspective: 1300px; }
    
    .reveal.cube .slides section {
      padding: 30px;
      min-height: 700px;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      box-sizing: border-box;
      -webkit-transform-style: preserve-3d;
      transform-style: preserve-3d; }
    
    .reveal.center.cube .slides section {
      min-height: 0; }
    
    .reveal.cube .slides section:not(.stack):before {
      content: '';
      position: absolute;
      display: block;
      width: 100%;
      height: 100%;
      left: 0;
      top: 0;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 4px;
      -webkit-transform: translateZ(-20px);
      transform: translateZ(-20px); }
    
    .reveal.cube .slides section:not(.stack):after {
      content: '';
      position: absolute;
      display: block;
      width: 90%;
      height: 30px;
      left: 5%;
      bottom: 0;
      background: none;
      z-index: 1;
      border-radius: 4px;
      box-shadow: 0px 95px 25px rgba(0, 0, 0, 0.2);
      -webkit-transform: translateZ(-90px) rotateX(65deg);
      transform: translateZ(-90px) rotateX(65deg); }
    
    .reveal.cube .slides &gt; section.stack {
      padding: 0;
      background: none; }
    
    .reveal.cube .slides &gt; section.past {
      -webkit-transform-origin: 100% 0%;
      transform-origin: 100% 0%;
      -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg);
      transform: translate3d(-100%, 0, 0) rotateY(-90deg); }
    
    .reveal.cube .slides &gt; section.future {
      -webkit-transform-origin: 0% 0%;
      transform-origin: 0% 0%;
      -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg);
      transform: translate3d(100%, 0, 0) rotateY(90deg); }
    
    .reveal.cube .slides &gt; section &gt; section.past {
      -webkit-transform-origin: 0% 100%;
      transform-origin: 0% 100%;
      -webkit-transform: translate3d(0, -100%, 0) rotateX(90deg);
      transform: translate3d(0, -100%, 0) rotateX(90deg); }
    
    .reveal.cube .slides &gt; section &gt; section.future {
      -webkit-transform-origin: 0% 0%;
      transform-origin: 0% 0%;
      -webkit-transform: translate3d(0, 100%, 0) rotateX(-90deg);
      transform: translate3d(0, 100%, 0) rotateX(-90deg); }
    
    /*********************************************
     * PAGE TRANSITION
     *
     * WARNING:
     * this is deprecated and will be removed in a
     * future version.
     *********************************************/
    .reveal.page .slides {
      -webkit-perspective-origin: 0% 50%;
      perspective-origin: 0% 50%;
      -webkit-perspective: 3000px;
      perspective: 3000px; }
    
    .reveal.page .slides section {
      padding: 30px;
      min-height: 700px;
      box-sizing: border-box;
      -webkit-transform-style: preserve-3d;
      transform-style: preserve-3d; }
    
    .reveal.page .slides section.past {
      z-index: 12; }
    
    .reveal.page .slides section:not(.stack):before {
      content: '';
      position: absolute;
      display: block;
      width: 100%;
      height: 100%;
      left: 0;
      top: 0;
      background: rgba(0, 0, 0, 0.1);
      -webkit-transform: translateZ(-20px);
      transform: translateZ(-20px); }
    
    .reveal.page .slides section:not(.stack):after {
      content: '';
      position: absolute;
      display: block;
      width: 90%;
      height: 30px;
      left: 5%;
      bottom: 0;
      background: none;
      z-index: 1;
      border-radius: 4px;
      box-shadow: 0px 95px 25px rgba(0, 0, 0, 0.2);
      -webkit-transform: translateZ(-90px) rotateX(65deg); }
    
    .reveal.page .slides &gt; section.stack {
      padding: 0;
      background: none; }
    
    .reveal.page .slides &gt; section.past {
      -webkit-transform-origin: 0% 0%;
      transform-origin: 0% 0%;
      -webkit-transform: translate3d(-40%, 0, 0) rotateY(-80deg);
      transform: translate3d(-40%, 0, 0) rotateY(-80deg); }
    
    .reveal.page .slides &gt; section.future {
      -webkit-transform-origin: 100% 0%;
      transform-origin: 100% 0%;
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0); }
    
    .reveal.page .slides &gt; section &gt; section.past {
      -webkit-transform-origin: 0% 0%;
      transform-origin: 0% 0%;
      -webkit-transform: translate3d(0, -40%, 0) rotateX(80deg);
      transform: translate3d(0, -40%, 0) rotateX(80deg); }
    
    .reveal.page .slides &gt; section &gt; section.future {
      -webkit-transform-origin: 0% 100%;
      transform-origin: 0% 100%;
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0); }
    
    /*********************************************
     * FADE TRANSITION
     *********************************************/
    .reveal .slides section[data-transition=fade],
    .reveal.fade .slides section:not([data-transition]),
    .reveal.fade .slides &gt; section &gt; section:not([data-transition]) {
      -webkit-transform: none;
      transform: none;
      transition: opacity 0.5s; }
    
    .reveal.fade.overview .slides section,
    .reveal.fade.overview .slides &gt; section &gt; section {
      transition: none; }
    
    /*********************************************
     * NO TRANSITION
     *********************************************/
    .reveal .slides section[data-transition=none],
    .reveal.none .slides section:not([data-transition]) {
      -webkit-transform: none;
      transform: none;
      transition: none; }
    
    /*********************************************
     * PAUSED MODE
     *********************************************/
    .reveal .pause-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      visibility: hidden;
      opacity: 0;
      z-index: 100;
      transition: all 1s ease; }
    
    .reveal.paused .pause-overlay {
      visibility: visible;
      opacity: 1; }
    
    /*********************************************
     * FALLBACK
     *********************************************/
    .no-transforms {
      overflow-y: auto; }
    
    .no-transforms .reveal .slides {
      position: relative;
      width: 80%;
      height: auto !important;
      top: 0;
      left: 50%;
      margin: 0;
      text-align: center; }
    
    .no-transforms .reveal .controls,
    .no-transforms .reveal .progress {
      display: none !important; }
    
    .no-transforms .reveal .slides section {
      display: block !important;
      opacity: 1 !important;
      position: relative !important;
      height: auto;
      min-height: 0;
      top: 0;
      left: -50%;
      margin: 70px 0;
      -webkit-transform: none;
      transform: none; }
    
    .no-transforms .reveal .slides section section {
      left: 0; }
    
    .reveal .no-transition,
    .reveal .no-transition * {
      transition: none !important; }
    
    /*********************************************
     * PER-SLIDE BACKGROUNDS
     *********************************************/
    .reveal .backgrounds {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      -webkit-perspective: 600px;
      perspective: 600px; }
    
    .reveal .slide-background {
      display: none;
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      visibility: hidden;
      overflow: hidden;
      background-color: transparent;
      background-position: 50% 50%;
      background-repeat: no-repeat;
      background-size: cover;
      transition: all 800ms cubic-bezier(0.26, 0.86, 0.44, 0.985); }
    
    .reveal .slide-background.stack {
      display: block; }
    
    .reveal .slide-background.present {
      opacity: 1;
      visibility: visible;
      z-index: 2; }
    
    .print-pdf .reveal .slide-background {
      opacity: 1 !important;
      visibility: visible !important; }
    
    /* Video backgrounds */
    .reveal .slide-background video {
      position: absolute;
      width: 100%;
      height: 100%;
      max-width: none;
      max-height: none;
      top: 0;
      left: 0;
      -o-object-fit: cover;
      object-fit: cover; }
    
    .reveal .slide-background[data-background-size="contain"] video {
      -o-object-fit: contain;
      object-fit: contain; }
    
    /* Immediate transition style */
    .reveal[data-background-transition=none] &gt; .backgrounds .slide-background,
    .reveal &gt; .backgrounds .slide-background[data-background-transition=none] {
      transition: none; }
    
    /* Slide */
    .reveal[data-background-transition=slide] &gt; .backgrounds .slide-background,
    .reveal &gt; .backgrounds .slide-background[data-background-transition=slide] {
      opacity: 1;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden; }
    
    .reveal[data-background-transition=slide] &gt; .backgrounds .slide-background.past,
    .reveal &gt; .backgrounds .slide-background.past[data-background-transition=slide] {
      -webkit-transform: translate(-100%, 0);
      transform: translate(-100%, 0); }
    
    .reveal[data-background-transition=slide] &gt; .backgrounds .slide-background.future,
    .reveal &gt; .backgrounds .slide-background.future[data-background-transition=slide] {
      -webkit-transform: translate(100%, 0);
      transform: translate(100%, 0); }
    
    .reveal[data-background-transition=slide] &gt; .backgrounds .slide-background &gt; .slide-background.past,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.past[data-background-transition=slide] {
      -webkit-transform: translate(0, -100%);
      transform: translate(0, -100%); }
    
    .reveal[data-background-transition=slide] &gt; .backgrounds .slide-background &gt; .slide-background.future,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.future[data-background-transition=slide] {
      -webkit-transform: translate(0, 100%);
      transform: translate(0, 100%); }
    
    /* Convex */
    .reveal[data-background-transition=convex] &gt; .backgrounds .slide-background.past,
    .reveal &gt; .backgrounds .slide-background.past[data-background-transition=convex] {
      opacity: 0;
      -webkit-transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0);
      transform: translate3d(-100%, 0, 0) rotateY(-90deg) translate3d(-100%, 0, 0); }
    
    .reveal[data-background-transition=convex] &gt; .backgrounds .slide-background.future,
    .reveal &gt; .backgrounds .slide-background.future[data-background-transition=convex] {
      opacity: 0;
      -webkit-transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0);
      transform: translate3d(100%, 0, 0) rotateY(90deg) translate3d(100%, 0, 0); }
    
    .reveal[data-background-transition=convex] &gt; .backgrounds .slide-background &gt; .slide-background.past,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.past[data-background-transition=convex] {
      opacity: 0;
      -webkit-transform: translate3d(0, -100%, 0) rotateX(90deg) translate3d(0, -100%, 0);
      transform: translate3d(0, -100%, 0) rotateX(90deg) translate3d(0, -100%, 0); }
    
    .reveal[data-background-transition=convex] &gt; .backgrounds .slide-background &gt; .slide-background.future,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.future[data-background-transition=convex] {
      opacity: 0;
      -webkit-transform: translate3d(0, 100%, 0) rotateX(-90deg) translate3d(0, 100%, 0);
      transform: translate3d(0, 100%, 0) rotateX(-90deg) translate3d(0, 100%, 0); }
    
    /* Concave */
    .reveal[data-background-transition=concave] &gt; .backgrounds .slide-background.past,
    .reveal &gt; .backgrounds .slide-background.past[data-background-transition=concave] {
      opacity: 0;
      -webkit-transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0);
      transform: translate3d(-100%, 0, 0) rotateY(90deg) translate3d(-100%, 0, 0); }
    
    .reveal[data-background-transition=concave] &gt; .backgrounds .slide-background.future,
    .reveal &gt; .backgrounds .slide-background.future[data-background-transition=concave] {
      opacity: 0;
      -webkit-transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0);
      transform: translate3d(100%, 0, 0) rotateY(-90deg) translate3d(100%, 0, 0); }
    
    .reveal[data-background-transition=concave] &gt; .backgrounds .slide-background &gt; .slide-background.past,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.past[data-background-transition=concave] {
      opacity: 0;
      -webkit-transform: translate3d(0, -100%, 0) rotateX(-90deg) translate3d(0, -100%, 0);
      transform: translate3d(0, -100%, 0) rotateX(-90deg) translate3d(0, -100%, 0); }
    
    .reveal[data-background-transition=concave] &gt; .backgrounds .slide-background &gt; .slide-background.future,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.future[data-background-transition=concave] {
      opacity: 0;
      -webkit-transform: translate3d(0, 100%, 0) rotateX(90deg) translate3d(0, 100%, 0);
      transform: translate3d(0, 100%, 0) rotateX(90deg) translate3d(0, 100%, 0); }
    
    /* Zoom */
    .reveal[data-background-transition=zoom] &gt; .backgrounds .slide-background,
    .reveal &gt; .backgrounds .slide-background[data-background-transition=zoom] {
      transition-timing-function: ease; }
    
    .reveal[data-background-transition=zoom] &gt; .backgrounds .slide-background.past,
    .reveal &gt; .backgrounds .slide-background.past[data-background-transition=zoom] {
      opacity: 0;
      visibility: hidden;
      -webkit-transform: scale(16);
      transform: scale(16); }
    
    .reveal[data-background-transition=zoom] &gt; .backgrounds .slide-background.future,
    .reveal &gt; .backgrounds .slide-background.future[data-background-transition=zoom] {
      opacity: 0;
      visibility: hidden;
      -webkit-transform: scale(0.2);
      transform: scale(0.2); }
    
    .reveal[data-background-transition=zoom] &gt; .backgrounds .slide-background &gt; .slide-background.past,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.past[data-background-transition=zoom] {
      opacity: 0;
      visibility: hidden;
      -webkit-transform: scale(16);
      transform: scale(16); }
    
    .reveal[data-background-transition=zoom] &gt; .backgrounds .slide-background &gt; .slide-background.future,
    .reveal &gt; .backgrounds .slide-background &gt; .slide-background.future[data-background-transition=zoom] {
      opacity: 0;
      visibility: hidden;
      -webkit-transform: scale(0.2);
      transform: scale(0.2); }
    
    /* Global transition speed settings */
    .reveal[data-transition-speed="fast"] &gt; .backgrounds .slide-background {
      transition-duration: 400ms; }
    
    .reveal[data-transition-speed="slow"] &gt; .backgrounds .slide-background {
      transition-duration: 1200ms; }
    
    /*********************************************
     * OVERVIEW
     *********************************************/
    .reveal.overview {
      -webkit-perspective-origin: 50% 50%;
      perspective-origin: 50% 50%;
      -webkit-perspective: 700px;
      perspective: 700px; }
    .reveal.overview .slides {
      -moz-transform-style: preserve-3d; }
    .reveal.overview .slides section {
      height: 100%;
      top: 0 !important;
      opacity: 1 !important;
      overflow: hidden;
      visibility: visible !important;
      cursor: pointer;
      box-sizing: border-box; }
    .reveal.overview .slides section:hover,
    .reveal.overview .slides section.present {
      outline: 10px solid rgba(150, 150, 150, 0.4);
      outline-offset: 10px; }
    .reveal.overview .slides section .fragment {
      opacity: 1;
      transition: none; }
    .reveal.overview .slides section:after,
    .reveal.overview .slides section:before {
      display: none !important; }
    .reveal.overview .slides &gt; section.stack {
      padding: 0;
      top: 0 !important;
      background: none;
      outline: none;
      overflow: visible; }
    .reveal.overview .backgrounds {
      -webkit-perspective: inherit;
      perspective: inherit;
      -moz-transform-style: preserve-3d; }
    .reveal.overview .backgrounds .slide-background {
      opacity: 1;
      visibility: visible;
      outline: 10px solid rgba(150, 150, 150, 0.1);
      outline-offset: 10px; }
    .reveal.overview .backgrounds .slide-background.stack {
      overflow: visible; }
    
    .reveal.overview .slides section,
    .reveal.overview-deactivating .slides section {
      transition: none; }
    
    .reveal.overview .backgrounds .slide-background,
    .reveal.overview-deactivating .backgrounds .slide-background {
      transition: none; }
    
    /*********************************************
     * RTL SUPPORT
     *********************************************/
    .reveal.rtl .slides,
    .reveal.rtl .slides h1,
    .reveal.rtl .slides h2,
    .reveal.rtl .slides h3,
    .reveal.rtl .slides h4,
    .reveal.rtl .slides h5,
    .reveal.rtl .slides h6 {
      direction: rtl;
      font-family: sans-serif; }
    
    .reveal.rtl pre,
    .reveal.rtl code {
      direction: ltr; }
    
    .reveal.rtl ol,
    .reveal.rtl ul {
      text-align: right; }
    
    .reveal.rtl .progress span {
      float: right; }
    
    /*********************************************
     * PARALLAX BACKGROUND
     *********************************************/
    .reveal.has-parallax-background .backgrounds {
      transition: all 0.8s ease; }
    
    /* Global transition speed settings */
    .reveal.has-parallax-background[data-transition-speed="fast"] .backgrounds {
      transition-duration: 400ms; }
    
    .reveal.has-parallax-background[data-transition-speed="slow"] .backgrounds {
      transition-duration: 1200ms; }
    
    /*********************************************
     * LINK PREVIEW OVERLAY
     *********************************************/
    .reveal .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000;
      background: rgba(0, 0, 0, 0.9);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease; }
    
    .reveal .overlay.visible {
      opacity: 1;
      visibility: visible; }
    
    .reveal .overlay .spinner {
      position: absolute;
      display: block;
      top: 50%;
      left: 50%;
      width: 32px;
      height: 32px;
      margin: -16px 0 0 -16px;
      z-index: 10;
      background-image: url(data:image/gif;base64,R0lGODlhIAAgAPMAAJmZmf%2F%2F%2F6%2Bvr8nJybW1tcDAwOjo6Nvb26ioqKOjo7Ozs%2FLy8vz8%2FAAAAAAAAAAAACH%2FC05FVFNDQVBFMi4wAwEAAAAh%2FhpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh%2BQQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ%2FV%2FnmOM82XiHRLYKhKP1oZmADdEAAAh%2BQQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY%2FCZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB%2BA4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6%2BHo7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq%2BB6QDtuetcaBPnW6%2BO7wDHpIiK9SaVK5GgV543tzjgGcghAgAh%2BQQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK%2B%2BG%2Bw48edZPK%2BM6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE%2BG%2BcD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm%2BFNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk%2BaV%2BoJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0%2FVNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc%2BXiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30%2FiI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE%2FjiuL04RGEBgwWhShRgQExHBAAh%2BQQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR%2BipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq%2BE71SRQeyqUToLA7VxF0JDyIQh%2FMVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY%2BYip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd%2BMFCN6HAAIKgNggY0KtEBAAh%2BQQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1%2BvsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d%2BjYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg%2BygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0%2Bbm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h%2BKr0SJ8MFihpNbx%2B4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX%2BBP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA%3D%3D);
      visibility: visible;
      opacity: 0.6;
      transition: all 0.3s ease; }
    
    .reveal .overlay header {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 40px;
      z-index: 2;
      border-bottom: 1px solid #222; }
    
    .reveal .overlay header a {
      display: inline-block;
      width: 40px;
      height: 40px;
      line-height: 36px;
      padding: 0 10px;
      float: right;
      opacity: 0.6;
      box-sizing: border-box; }
    
    .reveal .overlay header a:hover {
      opacity: 1; }
    
    .reveal .overlay header a .icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      background-position: 50% 50%;
      background-size: 100%;
      background-repeat: no-repeat; }
    
    .reveal .overlay header a.close .icon {
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABkklEQVRYR8WX4VHDMAxG6wnoJrABZQPYBCaBTWAD2g1gE5gg6OOsXuxIlr40d81dfrSJ9V4c2VLK7spHuTJ/5wpM07QXuXc5X0opX2tEJcadjHuV80li/FgxTIEK/5QBCICBD6xEhSMGHgQPgBgLiYVAB1dpSqKDawxTohFw4JSEA3clzgIBPCURwE2JucBR7rhPJJv5OpJwDX+SfDjgx1wACQeJG1aChP9K/IMmdZ8DtESV1WyP3Bt4MwM6sj4NMxMYiqUWHQu4KYA/SYkIjOsm3BXYWMKFDwU2khjCQ4ELJUJ4SmClRArOCmSXGuKma0fYD5CbzHxFpCSGAhfAVSSUGDUk2BWZaff2g6GE15BsBQ9nwmpIGDiyHQddwNTMKkbZaf9fajXQca1EX44puJZUsnY0ObGmITE3GVLCbEhQUjGVt146j6oasWN+49Vph2w1pZ5EansNZqKBm1txbU57iRRcZ86RWMDdWtBJUHBHwoQPi1GV+JCbntmvok7iTX4/Up9mgyTc/FJYDTcndgH/AA5A/CHsyEkVAAAAAElFTkSuQmCC); }
    
    .reveal .overlay header a.external .icon {
      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAcElEQVRYR+2WSQoAIQwEzf8f7XiOMkUQxUPlGkM3hVmiQfQR9GYnH1SsAQlI4DiBqkCMoNb9y2e90IAEJPAcgdznU9+engMaeJ7Azh5Y1U67gAho4DqBqmB1buAf0MB1AlVBek83ZPkmJMGc1wAR+AAqod/B97TRpQAAAABJRU5ErkJggg==); }
    
    .reveal .overlay .viewport {
      position: absolute;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      top: 40px;
      right: 0;
      bottom: 0;
      left: 0; }
    
    .reveal .overlay.overlay-preview .viewport iframe {
      width: 100%;
      height: 100%;
      max-width: 100%;
      max-height: 100%;
      border: 0;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease; }
    
    .reveal .overlay.overlay-preview.loaded .viewport iframe {
      opacity: 1;
      visibility: visible; }
    
    .reveal .overlay.overlay-preview.loaded .viewport-inner {
      position: absolute;
      z-index: -1;
      left: 0;
      top: 45%;
      width: 100%;
      text-align: center;
      letter-spacing: normal; }
    
    .reveal .overlay.overlay-preview .x-frame-error {
      opacity: 0;
      transition: opacity 0.3s ease 0.3s; }
    
    .reveal .overlay.overlay-preview.loaded .x-frame-error {
      opacity: 1; }
    
    .reveal .overlay.overlay-preview.loaded .spinner {
      opacity: 0;
      visibility: hidden;
      -webkit-transform: scale(0.2);
      transform: scale(0.2); }
    
    .reveal .overlay.overlay-help .viewport {
      overflow: auto;
      color: #fff; }
    
    .reveal .overlay.overlay-help .viewport .viewport-inner {
      width: 600px;
      margin: auto;
      padding: 20px 20px 80px 20px;
      text-align: center;
      letter-spacing: normal; }
    
    .reveal .overlay.overlay-help .viewport .viewport-inner .title {
      font-size: 20px; }
    
    .reveal .overlay.overlay-help .viewport .viewport-inner table {
      border: 1px solid #fff;
      border-collapse: collapse;
      font-size: 16px; }
    
    .reveal .overlay.overlay-help .viewport .viewport-inner table th,
    .reveal .overlay.overlay-help .viewport .viewport-inner table td {
      width: 200px;
      padding: 14px;
      border: 1px solid #fff;
      vertical-align: middle; }
    
    .reveal .overlay.overlay-help .viewport .viewport-inner table th {
      padding-top: 20px;
      padding-bottom: 20px; }
    
    /*********************************************
     * PLAYBACK COMPONENT
     *********************************************/
    .reveal .playback {
      position: absolute;
      left: 15px;
      bottom: 20px;
      z-index: 30;
      cursor: pointer;
      transition: all 400ms ease;
      -webkit-tap-highlight-color: transparent; }
    
    .reveal.overview .playback {
      opacity: 0;
      visibility: hidden; }
    
    /*********************************************
     * ROLLING LINKS
     *********************************************/
    .reveal .roll {
      display: inline-block;
      line-height: 1.2;
      overflow: hidden;
      vertical-align: top;
      -webkit-perspective: 400px;
      perspective: 400px;
      -webkit-perspective-origin: 50% 50%;
      perspective-origin: 50% 50%; }
    
    .reveal .roll:hover {
      background: none;
      text-shadow: none; }
    
    .reveal .roll span {
      display: block;
      position: relative;
      padding: 0 2px;
      pointer-events: none;
      transition: all 400ms ease;
      -webkit-transform-origin: 50% 0%;
      transform-origin: 50% 0%;
      -webkit-transform-style: preserve-3d;
      transform-style: preserve-3d;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden; }
    
    .reveal .roll:hover span {
      background: rgba(0, 0, 0, 0.5);
      -webkit-transform: translate3d(0px, 0px, -45px) rotateX(90deg);
      transform: translate3d(0px, 0px, -45px) rotateX(90deg); }
    
    .reveal .roll span:after {
      content: attr(data-title);
      display: block;
      position: absolute;
      left: 0;
      top: 0;
      padding: 0 2px;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      -webkit-transform-origin: 50% 0%;
      transform-origin: 50% 0%;
      -webkit-transform: translate3d(0px, 110%, 0px) rotateX(-90deg);
      transform: translate3d(0px, 110%, 0px) rotateX(-90deg); }
    
    /*********************************************
     * SPEAKER NOTES
     *********************************************/
    .reveal aside.notes {
      display: none; }
    
    .reveal .speaker-notes {
      display: none;
      position: absolute;
      width: 25vw;
      height: 100%;
      top: 0;
      left: 100%;
      padding: 14px 18px 14px 18px;
      z-index: 1;
      font-size: 18px;
      line-height: 1.4;
      border: 1px solid rgba(0, 0, 0, 0.05);
      color: #222;
      background-color: #f5f5f5;
      overflow: auto;
      box-sizing: border-box;
      text-align: left;
      font-family: Helvetica, sans-serif;
      -webkit-overflow-scrolling: touch; }
    .reveal .speaker-notes .notes-placeholder {
      color: #ccc;
      font-style: italic; }
    .reveal .speaker-notes:focus {
      outline: none; }
    .reveal .speaker-notes:before {
      content: 'Speaker notes';
      display: block;
      margin-bottom: 10px;
      opacity: 0.5; }
    
    .reveal.show-notes {
      max-width: 75vw;
      overflow: visible; }
    
    .reveal.show-notes .speaker-notes {
      display: block; }
    
    @media screen and (min-width: 1600px) {
      .reveal .speaker-notes {
        font-size: 20px; } }
    
    @media screen and (max-width: 1024px) {
      .reveal.show-notes {
        border-left: 0;
        max-width: none;
        max-height: 70%;
        overflow: visible; }
      .reveal.show-notes .speaker-notes {
        top: 100%;
        left: 0;
        width: 100%;
        height: 42.8571428571%; } }
    
    @media screen and (max-width: 600px) {
      .reveal.show-notes {
        max-height: 60%; }
      .reveal.show-notes .speaker-notes {
        top: 100%;
        height: 66.6666666667%; }
      .reveal .speaker-notes {
        font-size: 14px; } }
    
    /*********************************************
     * ZOOM PLUGIN
     *********************************************/
    .zoomed .reveal *,
    .zoomed .reveal *:before,
    .zoomed .reveal *:after {
      -webkit-backface-visibility: visible !important;
      backface-visibility: visible !important; }
    
    .zoomed .reveal .progress,
    .zoomed .reveal .controls {
      opacity: 0; }
    
    .zoomed .reveal .roll span {
      background: none; }
    
    .zoomed .reveal .roll span:after {
      visibility: hidden; }


  &lt;/style&gt;
    &lt;style&gt;
     .table-component INPUT {
       display:none;
     }
     .table-component TD, .table-component TH {
       font-size: 90%;
     }
     .reveal CANVAS {
       margin-left: auto;
       margin-right: auto;
     }
     .reveal .flip-container {
       margin-left: auto;
       margin-right: auto;
       width: 80%;
     }
    &lt;/style&gt;
        &lt;link id="theme" rel="stylesheet" href="css/theme/${theme}.css"&gt;
    
        &lt;!-- Theme used for syntax highlighting of code --&gt;
        &lt;!--
        &lt;link rel="stylesheet" href="lib/css/${codeTheme}.css"&gt;
        --&gt;
        &lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/${codeTheme}.css"&gt;
        
    &lt;style type="text/css"&gt;
    .section-link {
      color: #4cb986;
      font-weight: bold;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
    }
    &lt;/style&gt;
  &lt;script&gt;
    window.lconfig = {
      "presentationName": '${name}',
      "index": ${index},
      "appBase": true,
      "showAppTitle": true,
      "showHeader": true,
      "docTitle": "",
      "filename": "docs",
      "firstNodeAsTitle": true,
      "baseMode": "t",
      "viewTypes": [
        {"name": "Outline", "type": "t"},
        {"name": "Inline", "type": "a"},
        {"name": "Graphic Tree", "type": "d"},
        {"name": "Dendrogram", "type": "z"},
        {"name": "Nested Menu", "type": "n"}
      ]
    }
  &lt;/script&gt;

    &lt;/head&gt;
    &lt;body&gt;
      &lt;script type="template" id="slideContent"&gt;
      ${content}	  
    &lt;/script&gt;
      &lt;div id="app-base"&gt;&lt;/div&gt;
    &lt;script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML'&gt;&lt;/script&gt;
    &lt;script src='https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js'&gt;&lt;/script&gt;
    
        &lt;script src="lib/js/head.min.js"&gt;&lt;/script&gt;
        &lt;script src="js/reveal.min.js"&gt;&lt;/script&gt;
    &lt;!--
        &lt;script src="https://cdn.jsdelivr.net/npm/reveal.js@3.6.0/js/manifest.js"&gt;&lt;/script&gt;
        &lt;script src="js/vendor.js"&gt;&lt;/script&gt;
        &lt;script src="js/app.js"&gt;&lt;/script&gt;
    --&gt;
    
    &lt;!-- reveal.js if local
        &lt;script src="js/reveal.js"&gt;&lt;/script&gt;
        &lt;script src="lib/js/head.min.js"&gt;&lt;/script&gt;
        --&gt;
        
        &lt;script src="https://cdn.rawgit.com/kaleguy/leovue/master/dist/static/js/manifest.js"&gt;&lt;/script&gt;
        &lt;script src="https://cdn.rawgit.com/kaleguy/leovue/master/dist/static/js/vendor.js"&gt;&lt;/script&gt;
        &lt;script src="https://cdn.rawgit.com/kaleguy/leovue/master/dist/static/js/app.js"&gt;&lt;/script&gt;
        &lt;script&gt;
          Reveal.addEventListener( 'slidechanged', function( event ) {
        MathJax.Hub.Rerender(event.currentSlide);
      });
    &lt;/script&gt;
    
    &lt;/body&gt;
&lt;/html&gt;

  `
  return html
}

export {
  presentation
}
</t>
<t tx="ekr.20180130165259.125">@language html
&lt;template&gt;
&lt;div&gt;
    &lt;div class="main"&gt;
      &lt;form novalidate="novalidate" onsubmit="return false;" :class="getFormClass"&gt;
        &lt;div role="search" :class="getClassWrapper"&gt;
          &lt;input type="search" name="search" :placeholder="getPlaceholder" autocomplete="off" required="required" :class="getClassInputPlaceholder" tabindex="-1"&gt;
          &lt;input :disabled="disabled" @click="emitClickInput" @keyup='changeText' v-model='textVal' type="search" :name="name" placeholder="" autocomplete="off" required="required" :class="getClassInput" :autofocus="autofocus"&gt;
          &lt;button @click="emitClickButton" type="submit" :class="getClassSubmit" tabindex="-1"&gt;
            &lt;svg role="img" aria-label="Search"&gt;
              &lt;use xmlns:xlink="http://www.w3.org/1999/xlink" :xlink:href="getSVGSearch"&gt;&lt;/use&gt;
            &lt;/svg&gt;
          &lt;/button&gt;
          &lt;button @click="reset" type="reset" :class="getClassReset" tabindex="-1"&gt;
            &lt;svg role="img" aria-label="Reset"&gt;
              &lt;use xmlns:xlink="http://www.w3.org/1999/xlink" :xlink:href="getSVGClear"&gt;&lt;/use&gt;
            &lt;/svg&gt;
          &lt;/button&gt;
           &lt;div v-if="modeIsFull" class='el-input-group__append'&gt;
             &lt;ul v-on-clickaway="away"
                 v-if="suggestionsIsVisible &amp;&amp; showSuggestions"
                 class="vue-instant__suggestions"&gt;
                 &lt;li @click="selectedAction(index)"
                     v-for="(item, index) in similiarData"
                     :class="getClassHighlighted(index)"&gt;xx{{item[suggestionAttribute]}}&lt;/li&gt;
             &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/form&gt;
      &lt;/div&gt;

    &lt;svg xmlns="http://www.w3.org/2000/svg" style="display:none"&gt;
      &lt;symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-8" viewBox="0 0 40 40"&gt;
        &lt;path d="M16 32c8.835 0 16-7.165 16-16 0-8.837-7.165-16-16-16C7.162 0 0 7.163 0 16c0 8.835 7.163 16 16 16zm0-5.76c5.654 0 10.24-4.586 10.24-10.24 0-5.656-4.586-10.24-10.24-10.24-5.656 0-10.24 4.584-10.24 10.24 0 5.654 4.584 10.24 10.24 10.24zM28.156 32.8c-1.282-1.282-1.278-3.363.002-4.643 1.282-1.284 3.365-1.28 4.642-.003l6.238 6.238c1.282 1.282 1.278 3.363-.002 4.643-1.283 1.283-3.366 1.28-4.643.002l-6.238-6.238z"
        fill-rule="evenodd" /&gt;
      &lt;/symbol&gt;
      &lt;symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-clear-4" viewBox="0 0 20 20"&gt;
        &lt;path d="M11.664 9.877l4.485 4.485-1.542 1.54-4.485-4.485-4.485 4.485-1.54-1.54 4.485-4.485-4.485-4.485 1.54-1.54 4.485 4.484 4.485-4.485 1.54 1.542-4.484 4.485zM10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10z" fill-rule="evenodd"
        /&gt;
      &lt;/symbol&gt;
    &lt;/svg&gt;
&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  import { mixin as clickaway } from 'vue-clickaway'
  export default {
    name: 'vueInstant',
    mixins: [ clickaway ],
    props: {
      'value': {
        type: String,
        required: true
      },
      'suggestions': {
        type: Array,
        required: true
      },
      'suggestionAttribute': {
        type: String,
        required: true
      },
      'placeholder': {
        type: String,
        default: 'write something...'
      },
      'minMatch': {
        type: Number,
        default: 2
      },
      'name': {
        type: String,
        default: 'vueInstant'
      },
      'autofocus': {
        type: Boolean,
        default: true
      },
      'disabled': {
        type: Boolean
      },
      'type': {
        type: String,
        default: 'facebook'
      },
      'showAutocomplete': {
        type: Boolean,
        default: true
      }
    },
    data () {
      return {
        selectedEvent: null,
        selectedSuggest: null,
        inputChanged: false,
        suggestionsIsVisible: true,
        highlightedIndex: 0,
        highlightedIndexMax: 7,
        similiarData: [],
        placeholderVal: this.placeholder,
        types: [{
          name: 'facebook',
          formClass: 'searchbox sbx-facebook',
          classWrapper: 'sbx-facebook__wrapper',
          classInput: 'sbx-facebook__input',
          classInputPlaceholder: 'sbx-facebook__input-placeholder',
          classSubmit: 'sbx-facebook__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-facebook__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__facebook'
        },
        {
          name: 'google',
          formClass: 'searchbox sbx-google',
          classWrapper: 'sbx-google__wrapper',
          classInput: 'sbx-google__input',
          classInputPlaceholder: 'sbx-google__input-placeholder',
          classSubmit: 'sbx-google__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-google__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__google'
        },
        {
          name: 'amazon',
          formClass: 'searchbox sbx-amazon',
          classWrapper: 'sbx-amazon__wrapper',
          classInput: 'sbx-amazon__input',
          classInputPlaceholder: 'sbx-amazon__input-placeholder',
          classSubmit: 'sbx-amazon__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-amazon__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__amazon'
        },
        {
          name: 'twitter',
          formClass: 'searchbox sbx-twitter',
          classWrapper: 'sbx-twitter__wrapper',
          classInput: 'sbx-twitter__input',
          classInputPlaceholder: 'sbx-twitter__input-placeholder',
          classSubmit: 'sbx-twitter__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-twitter__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__twitter'
        },
        {
          name: 'spotify',
          formClass: 'searchbox sbx-spotify',
          classWrapper: 'sbx-spotify__wrapper',
          classInput: 'sbx-spotify__input',
          classInputPlaceholder: 'sbx-spotify__input-placeholder',
          classSubmit: 'sbx-spotify__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-spotify__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__spotify'
        },
        {
          name: 'custom',
          formClass: 'searchbox sbx-custom',
          classWrapper: 'sbx-custom__wrapper',
          classInput: 'sbx-custom__input',
          classInputPlaceholder: 'sbx-custom__input-placeholder',
          classSubmit: 'sbx-custom__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-custom__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__custom'
        }
        ]
      }
    },
    watch: {
      placeholder: function (val) {
        if (this.textValIsEmpty()) {
          this.placeholderVal = val
        }
      }
    },
    computed: {
      getPlaceholder () {
        if (this.inputChanged || this.textValIsEmpty()) {
          return this.placeholderVal
        }
      },
      modeIsFull () {
        return this.showAutocomplete
      },
      showSuggestions () {
        return this.similiarData.length &gt;= this.minMatch
      },
      getPropertiesClass () {
        var type = this.getType()
        return type.properties
      },
      getFormClass () {
        var type = this.getType()
        return type.formClass
      },
      getClassWrapper () {
        var type = this.getType()
        return type.classWrapper
      },
      getClassInput () {
        var type = this.getType()
        return type.classInput
      },
      getClassInputPlaceholder () {
        var type = this.getType()
        return type.classInputPlaceholder
      },
      getClassSubmit () {
        var type = this.getType()
        return type.classSubmit
      },
      getSVGSearch () {
        var type = this.getType()
        return type.svgSearch
      },
      getClassReset () {
        var type = this.getType()
        return type.classReset
      },
      getSVGClear () {
        var type = this.getType()
        return type.svgClear
      },

      textVal: {
        get () {
          return this.value
        },
        set (v) {
          this.$emit('input', v)
        }
      }
    },
    methods: {
      decrementHighlightedIndex () {
        this.highlightedIndex -= 1
      },
      incrementHighlightedIndex () {
        this.highlightedIndex += 1
      },
      escapeAction () {
        this.clearHighlightedIndex()
        this.clearSimilarData()
        this.clearSelected()
        this.setBlur()
        this.emitEscape()
      },
      arrowRightAction () {
        this.setPlaceholderAndTextVal()
        this.emitKeyRight()
      },
      arrowDownAction () {
        if (this.arrowDownValidation()) {
          this.incrementHighlightedIndex()
          this.setPlaceholderAndTextVal()
          this.emitKeyDown()
        } else {
          this.clearHighlightedIndex()
        }
      },
      arrowUpAction () {
        if (this.highlightedIndex &gt; 0) {
          this.decrementHighlightedIndex()
          this.setPlaceholderAndTextVal()
          this.emitKeyUp()
        } else {
          this.clearHighlightedIndex()
        }
      },
      enterAction () {
        this.setFinalTextValue()
        this.clearHighlightedIndex()
        this.clearSimilarData()
        this.emitEnter()
      },
      selectedAction (index) {
        this.highlightedIndex = index
        this.setFinalTextValue()
        this.clearPlaceholder()
        this.clearSimilarData()
        this.emitSelected()
      },
      addRegister (o) {
        if (this.isSimilar(o) &amp;&amp; this.textValIsNotEmpty()) {
          this.addSuggestion(o)
        }
      },
      addSuggestion (o) {
        if (!this.findSuggestionTextIsRepited(o)) {
          this.addToSimilarData(o)
        }
      },
      addToSimilarData (o) {
        debugger
        if (this.canAddToSimilarData()) {
          this.placeholderVal = this.letterProcess(o)
          this.selectedSuggest = o
          this.emitSelected()
          this.similiarData.unshift(o)
        }
      },
      setTextValue (e) {
        if (e.target.value.trim()) {
          this.textVal = e.target.value
          this.emitChange()
        }
      },
      setSelectedAsTextValue () {
        this.textVal = this.selected
      },
      setInitialTextValue () {
        this.textVal = this.value
      },
      setFinalTextValue () {
        if (this.finalTextValueValidation()) {
          this.setPlaceholderAndTextVal()
          this.emitChange()
        } else {
          this.clearAll()
        }
      },
      setPlaceholderAndTextVal () {
        if (typeof this.similiarData[this.highlightedIndex] !== 'undefined') {
          var suggest = this.similiarData[this.highlightedIndex]
          this.placeholderVal = suggest[this.suggestionAttribute]
          this.textVal = suggest[this.suggestionAttribute]
          this.selectedSuggest = suggest
          this.emitSelected()
        }
      },
      setInitialPlaceholder () {
        this.placeholderVal = this.placeholder
      },
      setBlur () {
        this.$el.blur()
      },
      getType () {
        return this.types.find(this.isSameType)
      },
      getClassHighlighted (index) {
        if (this.highlightedIndex === index) {
          var type = this.getType()
          return type.highlighClass
        }
      },
      letterProcess (o) {
        debugger
        var remoteText = o[this.suggestionAttribute].split('')
        var inputText = this.textVal.split('')
        inputText.forEach(function (letter, key) {
          if (letter !== remoteText[key]) {
            remoteText[key] = letter
          }
        })
        return remoteText.join('')
      },
      findSuggests () {
        if (this.suggestionsPropIsDefined()) {
          this.suggestions.forEach(this.addRegister)
        }
      },
      arrowDownValidation () {
        return this.highlightedIndex &lt; this.highlightedIndexMax &amp;&amp;
               this.highlightedIndex &lt; (this.similiarData.length - 1)
      },
      lowerFirst (string) {
        return string.charAt(0).toLowerCase() + string.slice(1)
      },
      controlEvents () {
        var uncaptz = this.lowerFirst(this.selectedEvent + 'Action')
        var fnName = (this[uncaptz])
        if (this.fnExists(fnName)) {
          fnName()
        }
      },
      findRepited (similarItem, o) {
        return (similarItem[this.suggestionAttribute] ===
        o[this.suggestionAttribute])
      },
      findSuggestionTextIsRepited (o) {
        return this.similiarData.find(this.findRepited.bind(this, o))
      },
      finalTextValueValidation () {
        return typeof this.similiarData[this.highlightedIndex] !== 'undefined' ||
            this.placeholderVal === '' &amp;&amp; this.highlightedIndex !== 0
      },
      isSimilar (o) {
        if (o) {
          return o[this.suggestionAttribute]
                  .toLowerCase()
                  .startsWith(this.textVal.toLowerCase())
        }
      },
      isSameType (o) {
        return o.name === this.type
      },
      fnExists (fnName) {
        return typeof fnName === 'function'
      },
      canAddToSimilarData () {
        return this.similiarData.length &lt; this.highlightedIndexMax
      },
      suggestionsPropIsDefined () {
        return typeof this.suggestions !== 'undefined'
      },
      notArrowKeysEvent () {
        return this.selectedEvent !== 'ArrowUp' &amp;&amp;
                this.selectedEvent !== 'ArrowDown' &amp;&amp; this.selectedEvent !== 'ArrowRight'
      },
      notEnterKeyEvent () {
        return this.selectedEvent !== 'Enter'
      },
      textValIsEmpty () {
        return this.textVal === ''
      },
      textValIsNotEmpty () {
        return this.textVal !== ''
      },
      reset () {
        this.clearValue()
        this.clearSelected()
        this.clearPlaceholder()
        this.clearSimilarData()
        this.clearSelectedSuggest()
        this.emitClear()
        this.emitSelected()
      },
      clearAll () {
        this.clearSelected()
        this.clearPlaceholder()
        this.clearSimilarData()
        this.clearSelectedSuggest()
      },
      clearValue () {
        this.textVal = ''
      },
      clearSelected () {
        this.selected = null
      },
      clearSelectedSuggest () {
        this.selectedSuggest = null
      },
      clearSimilarData () {
        this.similiarData = []
      },
      clearPlaceholder () {
        if (this.textValIsEmpty()) {
          this.clearSimilarData()
          this.setInitialPlaceholder()
        } else {
          this.placeholderVal = ''
        }
      },
      clearHighlightedIndex () {
        this.highlightedIndex = 0
      },
      changeText (e) {
        this.selectedEvent = e.code
        this.setTextValue(e)
        this.processChangeText()
        this.controlEvents(e)
      },
      processChangeText (e) {
        if (this.notEnterKeyEvent()) {
          this.inputChanged = true
          this.suggestionsIsVisible = true
          this.clearAllAndFindSuggest()
        }
      },
      clearAllAndFindSuggest () {
        if (this.notArrowKeysEvent()) {
          this.clearAll()
          this.findSuggests()
        }
      },
      away () {
        this.suggestionsIsVisible = false
        this.emitSelected()
      },
      emitChange () {
        // this.$emit('input', this.textVal)
      },
      emitClickInput (event) {
        this.$emit('click-input', event)
      },
      emitClickButton (event) {
        this.$emit('click-button', this.textVal)
      },
      emitEnter () {
        this.$emit('enter')
      },
      emitKeyUp () {
        this.$emit('key-up')
      },
      emitKeyDown () {
        this.$emit('key-down', this.selectedSuggest)
      },
      emitKeyRight () {
        this.$emit('key-right')
      },
      emitClear () {
        this.$emit('clear')
      },
      emitEscape () {
        this.$emit('escape')
      },
      emitSelected () {
        this.$emit('selected', this.selectedSuggest)
      }
    }
}

&lt;/script&gt;

&lt;style&gt;
  .sbx-facebook {
  display: inline-block;
  position: relative;
  width: 450px;
  height: 27px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 13px;
}

.sbx-facebook__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-facebook__input {
  position: absolute !important;
  left:0 !important;
  top: 0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 0px #CCCCCC;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 62px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-facebook__input-placeholder {
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 0px #CCCCCC;
  background: #FFFFFF;
  padding: 0;
  padding-right: 62px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}




.sbx-facebook__input::-webkit-search-decoration, .sbx-facebook__input::-webkit-search-cancel-button, .sbx-facebook__input::-webkit-search-results-button, .sbx-facebook__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-facebook__input:hover {
  box-shadow: inset 0 0 0 0px #b3b3b3;
}

.sbx-facebook__input:focus, .sbx-facebook__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 0px #3E82F7;
  background: rgba(255, 255, 255, 0)
}

.sbx-facebook__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-facebook__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-facebook__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-facebook__input::placeholder {
  color: #AAAAAA;
}

.sbx-facebook__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 3px 3px 0;
  background-color: #f6f7f8;
  padding: 0;
  width: 35px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-facebook__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-facebook__submit:hover, .sbx-facebook__submit:active {
  cursor: pointer;
}

.sbx-facebook__submit:focus {
  outline: 0;
}

.sbx-facebook__submit svg {
  width: 15px;
  height: 15px;
  vertical-align: middle;
  fill: #3C5BA2;
}

.sbx-facebook__reset {
  display: none;
  position: absolute;
  top: 3px;
  right: 41px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-facebook__reset:focus {
  outline: 0;
}

.sbx-facebook__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-facebook__input:valid ~ .sbx-facebook__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}



/* amazon*/

.sbx-amazon {
  display: inline-block;
  position: relative;
  width: 600px;
  height: 39px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 14px;
}

.sbx-amazon__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-amazon__input {
  display: inline-block;
  position: absolute !important;
  left:0 !important;
  top:0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #FFFFFF;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 75px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-amazon__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #FFFFFF;
  background: #FFFFFF;
  padding: 0;
  padding-right: 75px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-amazon__input::-webkit-search-decoration, .sbx-amazon__input::-webkit-search-cancel-button, .sbx-amazon__input::-webkit-search-results-button, .sbx-amazon__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-amazon__input:hover {
  box-shadow: inset 0 0 0 1px #e6e6e6;
}

.sbx-amazon__input:focus, .sbx-amazon__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 1px #FFBF58;
  background: rgba(255, 255, 255, 0)
}

.sbx-amazon__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-amazon__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-amazon__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-amazon__input::placeholder {
  color: #AAAAAA;
}

.sbx-amazon__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 3px 3px 0;
  background-color: #ffbf58;
  padding: 0;
  width: 47px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-amazon__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-amazon__submit:hover, .sbx-amazon__submit:active {
  cursor: pointer;
}

.sbx-amazon__submit:focus {
  outline: 0;
}

.sbx-amazon__submit svg {
  width: 21px;
  height: 21px;
  vertical-align: middle;
  fill: #202F40;
}

.sbx-amazon__reset {
  display: none;
  position: absolute;
  top: 9px;
  right: 54px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-amazon__reset:focus {
  outline: 0;
}

.sbx-amazon__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-amazon__input:valid ~ .sbx-amazon__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

/*  google */
.sbx-google {
  display: inline-block;
  position: relative;
  width: 500px;
  height: 41px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 14px;
}

.sbx-google__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-google__input {
  display: inline-block;
  position: absolute !important;
  left: 0 !important;
  top:0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #CCCCCC;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 77px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-google__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #CCCCCC;
  background: #FFFFFF;
  padding: 0;
  padding-right: 77px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-google__input::-webkit-search-decoration, .sbx-google__input::-webkit-search-cancel-button, .sbx-google__input::-webkit-search-results-button, .sbx-google__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-google__input:hover {
  box-shadow: inset 0 0 0 1px #b3b3b3;
}

.sbx-google__input:focus, .sbx-google__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 1px #3E82F7;
  background: rgba(255, 255, 255, 0)
}

.sbx-google__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-google__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-google__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-google__input::placeholder {
  color: #AAAAAA;
}

.sbx-google__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 3px 3px 0;
  background-color: #3e82f7;
  padding: 0;
  width: 49px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-google__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-google__submit:hover, .sbx-google__submit:active {
  cursor: pointer;
}

.sbx-google__submit:focus {
  outline: 0;
}

.sbx-google__submit svg {
  width: 21px;
  height: 21px;
  vertical-align: middle;
  fill: #FFFFFF;
}

.sbx-google__reset {
  display: none;
  position: absolute;
  top: 10px;
  right: 56px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-google__reset:focus {
  outline: 0;
}

.sbx-google__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-google__input:valid ~ .sbx-google__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}


/* twitter */

.sbx-twitter {
  display: inline-block;
  position: relative;
  width: 200px;
  height: 33px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 12px;
}

.sbx-twitter__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-twitter__input {
  display: inline-block;
  position: absolute;
  left: 0 !important;
  top: 0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 17px;
  box-shadow: inset 0 0 0 1px #E1E8ED;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 52px;
  padding-left: 16px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-twitter__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 17px;
  box-shadow: inset 0 0 0 1px #E1E8ED;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 52px;
  padding-left: 16px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-twitter__input::-webkit-search-decoration, .sbx-twitter__input::-webkit-search-cancel-button, .sbx-twitter__input::-webkit-search-results-button, .sbx-twitter__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-twitter__input:hover {
  box-shadow: inset 0 0 0 1px #c1d0da;
}

.sbx-twitter__input:focus, .sbx-twitter__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 1px #D6DEE3;
  background: rgba(255, 255, 255, 0)
}

.sbx-twitter__input::-webkit-input-placeholder {
  color: #9AAEB5;
}

.sbx-twitter__input::-moz-placeholder {
  color: #9AAEB5;
}

.sbx-twitter__input:-ms-input-placeholder {
  color: #9AAEB5;
}

.sbx-twitter__input::placeholder {
  color: #9AAEB5;
}

.sbx-twitter__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 16px 16px 0;
  background-color: rgba(62, 130, 247, 0);
  padding: 0;
  width: 33px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-twitter__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-twitter__submit:hover, .sbx-twitter__submit:active {
  cursor: pointer;
}

.sbx-twitter__submit:focus {
  outline: 0;
}

.sbx-twitter__submit svg {
  width: 13px;
  height: 13px;
  vertical-align: middle;
  fill: #657580;
}

.sbx-twitter__reset {
  display: none;
  position: absolute;
  top: 7px;
  right: 33px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-twitter__reset:focus {
  outline: 0;
}

.sbx-twitter__reset svg {
  display: block;
  margin: 4px;
  width: 11px;
  height: 11px;
}

.sbx-twitter__input:valid ~ .sbx-twitter__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}


/* spotify */

.sbx-spotify {
  display: inline-block;
  position: relative;
  width: 200px;
  height: 25px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 12px;
}

.sbx-spotify__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-spotify__input {
  display: inline-block;
  position: absolute;
  left: 0 !important;
  top: 0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 13px;
  box-shadow: inset 0 0 0 0px #FFFFFF;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 20px;
  padding-left: 25px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-spotify__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 13px;
  box-shadow: inset 0 0 0 0px #FFFFFF;
  background: #FFFFFF;
  padding: 0;
  padding-right: 20px;
  padding-left: 25px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-spotify__input::-webkit-search-decoration, .sbx-spotify__input::-webkit-search-cancel-button, .sbx-spotify__input::-webkit-search-results-button, .sbx-spotify__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-spotify__input:hover {
  box-shadow: inset 0 0 0 0px #e6e6e6;
}

.sbx-spotify__input:focus, .sbx-spotify__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 0px #FFFFFF;
  background: rgba(255, 255, 255, 0)
}

.sbx-spotify__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-spotify__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-spotify__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-spotify__input::placeholder {
  color: #AAAAAA;
}

.sbx-spotify__submit {
  position: absolute;
  top: 0;
  right: inherit;
  left: 0;
  margin: 0;
  border: 0;
  border-radius: 12px 0 0 12px;
  background-color: rgba(255, 255, 255, 0);
  padding: 0;
  width: 25px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-spotify__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-spotify__submit:hover, .sbx-spotify__submit:active {
  cursor: pointer;
}

.sbx-spotify__submit:focus {
  outline: 0;
}

.sbx-spotify__submit svg {
  width: 17px;
  height: 17px;
  vertical-align: middle;
  fill: #222222;
}

.sbx-spotify__reset {
  display: none;
  position: absolute;
  top: 2px;
  right: 2px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-spotify__reset:focus {
  outline: 0;
}

.sbx-spotify__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-spotify__input:valid ~ .sbx-spotify__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}


.vue-instant__suggestions {
     position: absolute;
     left: 0;
     top: 110%;
     margin: 0;
     background-color: #fff;
     border: 1px solid #D3DCE6;
     width: 100%;
     padding: 6px 0;
     z-index: 10;
     border-radius: 2px;
     max-height: 280px;
     box-sizing: border-box;
     overflow: auto;
     box-shadow: 0 0 6px 0 rgba(0,0,0,.04), 0 2px 4px 0 rgba(0,0,0,.12);
     margin-top:3px;
 }

 .vue-instant__suggestions li {
     list-style: none;
     line-height: 36px;
     padding: 0 10px;
     margin: 0;
     cursor: pointer;
     color: #475669;
     font-size: 14px;
     white-space: nowrap;
     overflow: hidden;
     text-overflow: ellipsis;
 }

 .vue-instant__suggestions li.highlighted__spotify {
     background-color: black;
     color: #fff;
 }

 .vue-instant__suggestions li.highlighted__twitter {
     background-color: #20a0ff;
     color: #fff;
 }

 .vue-instant__suggestions li.highlighted__google {
     background-color: #EEEEEE;
     color: black;
 }

 .vue-instant__suggestions li.highlighted__facebook {
     background-color: #3e5da0;
     color: #fff;
 }

 .vue-instant__suggestions li.highlighted__amazon {
     background-color: #232F3E;
     color: #fff;
 }


 .el-input-group__append {
   border: 0px !important;
 }

.sbx-custom__input {
  position: absolute;
  left: 0 !important;
  background: rgba(255, 255, 255, 0) !important;
}
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.127">&lt;&lt; imports &gt;&gt;
Vue.use(Router)

let baseMode = window.lconfig.baseMode
if (!baseMode) { baseMode = 't' }

// TODO: add not found link
export default new Router({
  routes: [
    &lt;&lt; routes &gt;&gt;
  ]
})
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.129">// import escape from 'escape-html'
import axios from 'axios'
&lt;&lt; xslTemplate &gt;&gt;
@others
export {getLeoJSON, transformLeoXML, transformLeoXML2XML, transform}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.13">function getFileExtension (filename) {
  const re = /(?:\.([^.]+))?$/
  const ext = re.exec(filename)[1]
  return ext
}

</t>
<t tx="ekr.20180130165259.130">function transform (xml, xslString, transformer, serializer) {
  @others  // Define client/serverTransform.

  const p = new Promise((resolve, reject) =&gt; {
    if (transformer) {
      return serverTransform(resolve, reject)
    } else {
      return clientTransform(resolve, reject)
    }
  })
  return p
}

</t>
<t tx="ekr.20180130165259.131">// EKR: args: xml, xslString, transformer, serializer

function serverTransform(resolve, reject) {
  const xmlString = new serializer().serializeToString(xml)
  const config = {
    xslt: xslString,
    source: xmlString,
    result: String,
    props: {
      indent: 'yes'
    }
  }
  transformer.transform(config, (err, result) =&gt; {
    if (err) {
      console.log('ERROR:', err)
      return reject()
    }
    resolve(result)
  })
}
</t>
<t tx="ekr.20180130165259.132">function clientTransform(resolve, reject) {

  const oParser = new DOMParser()
  const xsl = oParser.parseFromString(xslString, 'text/xml')
  const xsltProcessor = new XSLTProcessor()
  xsltProcessor.importStylesheet(xsl)
  const resultDocument = xsltProcessor.transformToFragment(xml, document)
  resolve(resultDocument.textContent)
}

</t>
<t tx="ekr.20180130165259.133">function loadDoc (filename) {
  console.log('loading file:', filename)
  var p = new Promise((resolve, reject) =&gt; {
    axios.get(filename)
    .then(function (response) {
      resolve(response.data)
    })
    .catch(function (error) {
      console.log(error)
      reject()
    })
  })
  return p
}
</t>
<t tx="ekr.20180130165259.136">function cleanText(data, startId){
  data.name = data.name.replace(/&lt;&lt;/g, '\u00AB')
  data.name = data.name.replace(/&gt;&gt;/g, '\u00BB')
  data.name = data.name.replace(/'/g, '\x27')
  data.name = data.name.replace(/"/g, '\x22')
  //data.name = escape(data.name)
  data.name = data.name.replace(/&amp;#39;/g,'\x27')
  data.id = data.id + ''; // probably unneeded now
  let children = data.children;
  if (!children) { return }
  for (let i = 0; i &lt; children.length; i++){
    cleanText(children[i], startId)
  }
  data.t = data.t.replace(/^.*?_/,'') // remove file uid
  if (startId) {
    data.t = startId + '-' + data.t + ''
  }
}
</t>
<t tx="ekr.20180130165259.137">/**
 * TODO: move to util, also is in store/index, review logic for relative / subtrees
 * Is url relative
 * @param url {string}
 * @returns {boolean} - if is relative
 */
function isRelative (url) {
  var ok = true
  if (/^http/.test(url)) {
    ok = false
  }
  return ok
}
</t>
<t tx="ekr.20180130165259.138">function getLeoJSON (filename, id) {
  if (filename.indexOf('#') &gt; 0) {
    filename = filename.substring(0, filename.indexOf('#'))
  }
  var p = new Promise((resolve, reject) =&gt; {
    if (!filename.match(/static/) &amp;&amp; isRelative(filename)) {
      // filename = 'static/' + filename
    }
    if (!filename.match(/\.leo$/)) {
      filename = filename + '.leo'
    }
    loadDoc(filename, 'Text')
      .then(xmlString =&gt; {
        return transformLeoXML(xmlString, id)
      })
      .then(data =&gt; {resolve(data)})
  })
  return p
}
</t>
<t tx="ekr.20180130165259.139">function transformLeoXML2XML(xmlString, startId, parser) {

  const p = new Promise((resolve, reject) =&gt; {
    &lt;&lt; Create the parser &gt;&gt;
    // Parse the string into an xml *object*.
    const xml = oParser.parseFromString(xmlString, 'text/xml')
    &lt;&lt; Create tnodes in textItems &gt;&gt;
    &lt;&lt; Create vnodes &gt;&gt;
    resolve({xml, textItems})
  })
  return p  // Return the promise.
}
</t>
<t tx="ekr.20180130165259.14">function getLanguage (text) {
  let language = ''
  const re = /^@language (\w+)/
  let languageTokens = re.exec(text)
  if (languageTokens) {
    language = languageTokens[1]
  }
  return language
}

</t>
<t tx="ekr.20180130165259.140">function transformLeoXML2JSON (data, startId, parser, transformer, serializer) {
    const p = new Promise((resolve, reject) =&gt; {
      const xml = data.xml
      const textItems = data.textItems
      transform(xml, xslTemplate, transformer, serializer).then(jsdata =&gt; {
        jsdata = jsdata.replace(/&lt;\?xml version="1\.0" encoding="UTF-8"\?&gt;/,'')
        jsdata = jsdata.replace(/,\s?$/, '') // kludge to get rid of trailing comma
        jsdata = '[' + jsdata + ']'
        jsdata = JSON.parse(jsdata)
        jsdata.forEach(d =&gt; cleanText(d, startId))
        const xdata = {}
        xdata.data = jsdata
        xdata.textItems = textItems
        return (xdata)
      }).then(data =&gt; resolve(data))
    })
    return p
}
</t>
<t tx="ekr.20180130165259.141">function transformLeoXML(xmlString, startId, parser, transformer, serializer){

  return transformLeoXML2XML(xmlString, startId, parser)
    .then(data =&gt; transformLeoXML2JSON(data, startId, parser, transformer, serializer))
}

</t>
<t tx="ekr.20180130165259.143">import Vue from 'vue'
import Vuex from 'vuex'
import {getLeoJSON, transformLeoXML} from '../services/leo.js'
import router from '../router'
import axios from 'axios'
import _ from 'lodash'
// import CSV from 'csv-string'
import Papa from 'papaparse'
const util = require('../util.js')
const md = require('markdown-it')({
  html: true,
  linkify: true,
  typographer: true
})
const lunr = require('lunr')

@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.144">function loadIndex (titles, text) {
  const docs = loadIndexItems([], titles, text)
  // return indexItems
  let idx = lunr(function () {
    this.ref('id')
    this.field('text')
    docs.forEach(function (doc) {
      this.add(doc)
    }, this)
  })
  return {idx, docs}
}
</t>
<t tx="ekr.20180130165259.145">function loadIndexItems (arr, titles, textItems) {
  if (!titles) { return arr }
  titles.forEach(item =&gt; {
    arr.push(
      {
        id: item.id,
        name: item.name,
        text: textItems[item.t]
      }
    )
    loadIndexItems(arr, item.children, textItems)
  })
  return arr
}

Vue.use(Vuex)

</t>
<t tx="ekr.20180130165259.146">function showText (context, text, id) {
  context.commit('CONTENT_PANE', {type: 'text'})
  if (!text) {
    text = ''
    context.commit('CURRENT_ITEM_CONTENT', { text })
    return
  }
  text = util.formatText(text)
  // current (user selected) content item
  context.commit('CURRENT_ITEM_CONTENT', { text })
  // hash of all content items
  const newItem = { id, t: text }
  context.commit('CONTENT_ITEM', {item: newItem})
  context.commit('CONTENT_ITEM_UPDATE')
}
</t>
<t tx="ekr.20180130165259.147">/**
 * Get subtree names for preloading bookmarked nodes
 * @param acc {array} - accumulator
 * @param p {string} - path, e.g. 28-2-10-5
 * @param startIndex {integer} - start with O to get all
 */

function getRoots (acc, p, startIndex) {
  const i = p.indexOf('-', startIndex)
  if (i &lt; 0) { return acc }
  acc.push(p.substring(0, i))
  return getRoots(acc, p, i + 1)
}
</t>
<t tx="ekr.20180130165259.148">/**
 * Is url relative
 * @param url {string}
 * @returns {boolean} - if is relative
 */
function isRelative (url) {
  let ok = true
  if (/^[xh]ttp/.test(url)) { // xhttp is to indicate xframe header should be ignored
    return false
  }
  if (/^\//.test(url)) {
  //  return false
  }
  if (window.lconfig.filename) {
    return false
  }
  return ok
}
</t>
<t tx="ekr.20180130165259.149">/**
 * Chop the end of a string off
 * @param s {string} The input string
 * @param c {string} The character from which the string will be chopped
 * @returns {string} The chopped string
 */
function chop (s, c) {
  if (s.indexOf(c) &lt; 0) { return s }
  return s.substring(0, s.lastIndexOf(c))
}

</t>
<t tx="ekr.20180130165259.15">function removeFirstLine (text) {
  return text.split(/[\n]/).splice(1).join('\n')
}

</t>
<t tx="ekr.20180130165259.150">// load subtree - separate leo file loaded into node
function loadLeoNode (context, item) {
  console.log('LOADING SUBTREE')
  const p = new Promise((resolve, reject) =&gt; {
    const title = item.name
    const id = item.id
    let {url, label} = getUrlFromTitle(title)
    getLeoJSON(url, id).then(data =&gt; {
      let text = data.textItems
      data = data.data
      context.commit('ADDTEXT', {text})
      if (data.length === 1) {
        context.commit('RESET') // content item has not been drawn
        console.log('RESET')
        context.dispatch('setCurrentItem', {id})
        data = data[0]
        item.children = data.children
        item.t = data.t
        item.name = label // convert to regular title so won't reload
      } else { // TODO: trunkless load logic in complete
        item.name = label
        item.children = data
      }
      resolve(true)
    })
  }).catch(e =&gt; console.log('Error: ', e))
  return p
}
</t>
<t tx="ekr.20180130165259.151">function getUrlFromTitle (title) {
  const re = /^\[(.*?)\]\((.*?)\)$/
  const match = re.exec(title)
  let url = match[2]
  let label = match[1]
  if (!url) { return null }
  if (isRelative(url)) {
    // url = 'static/' + url
  }
  // absolute urls require no further processing
  if (/^[xh]ttp/.test(url)) { // xttp will result in http call via proxy
    return {url, label}
  }
  let cname = window.lconfig.filename
  if (cname.indexOf('/') &lt; 0) {
    cname = ''
  }
  if (cname) {
    let u = window.lconfig.filename
    u = chop(u, '#')
    u = chop(u, '?')
    u = chop(u, '/')
    url = u + '/' + url
  }
  return {url, label}
}
</t>
<t tx="ekr.20180130165259.152">function showPresentation (context, title, id) {
  const dummy = Math.random()
  const iframeHTML = `
    &lt;div style="width:100%"&gt;
    &lt;iframe
       src="about:blank" height="100%" width="100%"
       marginwidth="0" marginheight="0"
       hspace="0" vspace="0"
       dummy="${dummy}"
       frameBorder="0" /&gt;
    &lt;/div&gt;
  `
  context.commit('IFRAME_HTML', { iframeHTML })
  context.commit('CONTENT_PANE', { type: 'site' })
}

</t>
<t tx="ekr.20180130165259.153">function showSite (context, title, id) {
  let {url, label} = getUrlFromTitle(title) // eslint-disable-line
  if (!url) { return }
  const ext = util.getFileExtension(url)
  const base = url.substring(0, url.lastIndexOf('/'))
  // TODO: add spinner
  if (ext === 'md') {
    axios.get(url)
      .then((response) =&gt; {
        let html = md.render(response.data)
        html = '@language md\n&lt;div class="md"&gt;' + html + '&lt;/div&gt;'
        html = util.replaceRelUrls(html, base)
        // html = util.formatText(html)
        showText(context, html, id)
        context.commit('CONTENT_PANE', {type: 'text'})
      })
      .catch(function (error) {
        console.log(error)
      })
    return
  }
  const iframeHTML = `
    &lt;div style="width:100%"&gt;
    &lt;iframe
       src="${url}" height="100%" width="100%"
       marginwidth="0" marginheight="0"
       hspace="0" vspace="0"
       frameBorder="0" /&gt;
    &lt;/div&gt;
  `
  context.commit('IFRAME_HTML', {iframeHTML})
  context.commit('CONTENT_PANE', {type: 'site'})
  // context.commit('CONTENT_ITEM_UPDATE')
}

</t>
<t tx="ekr.20180130165259.154">function setSiteItem (context, title, id) {
  let {url, label} = getUrlFromTitle(title)
  console.log(label) // TODO: remove this, it is here for eshint
  const ext = util.getFileExtension(url)
  const base = url.substring(0, url.lastIndexOf('/'))
  // TODO: add spinner
  if (ext === 'md') {
    axios.get(url)
      .then((response) =&gt; {
        let html = md.render(response.data)
        html = '@language md\n&lt;div class="md"&gt;' + html + '&lt;/div&gt;'
        html = util.replaceRelUrls(html, base)
        html = util.formatText(html)
        const newItem = {
          id: id,
          t: html
        }
        context.commit('CONTENT_ITEM_UPDATE')
        context.commit('CONTENT_ITEM', {item: newItem})
      })
      .catch(function (error) {
        console.log(error)
      })
    return
  }
  const iframeHTML = `
    &lt;div class="vinline"&gt;
    &lt;iframe
       src="${url}" height="100%" width="100%"
       marginwidth="0" marginheight="0"
       hspace="0" vspace="0"
       frameBorder="0" /&gt;
    &lt;/div&gt;
  `
  const newItem = {
    id: id,
    t: iframeHTML
  }
  // context.commit('IFRAME_HTML', {iframeHTML})
  context.commit('CONTENT_ITEM', {item: newItem})
  context.commit('CONTENT_ITEM_UPDATE')
}

/**
 * setData Set data loaded from the Leo file, get content for open items (from path).
 * @param context
 * @param ldata
 * @param filename
 * @param route
 */
</t>
<t tx="ekr.20180130165259.155">function setData (context, ldata, filename, route) {
  context.commit('RESET') // content item has not been drawn
  context.commit('INIT_DATA') // loaded the leo data
  context.commit('LEO', {
    data: ldata.data,
    text: ldata.textItems,
    filename: filename
  })
  loadDataSets(context, ldata)
  loadDataTables(context, ldata)
  loadPresentations(ldata.data[0])
  setLanguageNodes(context, ldata)
  let id = route.params.id
  if (!id) {
    id = '1'
  }
  // TODO: use vuex-router
  const match = route.path.match(/\/(\w+)\//)
  let pathType = 't'
  if (match) {
    pathType = match[0]
  }
  pathType = pathType.replace(/\//g, '')
  context.commit('VIEW_TYPE', {type: pathType})
  const path = route.path
  let npath = null
  if (path) {
    npath = path.substring(path.indexOf(2, '/'))
  }
  let subtrees = []
  if (npath) {
    subtrees = getRoots([], npath)
  }
  loadSubtrees(context, subtrees, ldata.data).then(() =&gt; {
    const openItems = JSON.search(ldata.data, '//*[id="' + id + '"]/ancestor::*')
    if (!openItems) { return }
    if (!openItems.length) { return }
    const openItemIds = openItems.reduce((acc, o) =&gt; {
      if (o.id) { acc.push(o.id + '') }
      return acc
    }, [])
    openItemIds.push(id + '')
    context.commit('OPEN_ITEMS', {openItemIds})
    const ids = openItemIds
    context.dispatch('setContentItems', {ids})
    context.dispatch('setCurrentItem', {id})
  })
}
</t>
<t tx="ekr.20180130165259.156">function loadPresentations (data, loadSections) {
  let p = /@presentation ([a-zA-Z0-9]*)(.*)$/.test(data.name)
  if (p) { loadSections = true }
  let a = /^« /.test(data.name)
  if (p || (a &amp;&amp; loadSections)) {
  // if (p) {
    console.log('loading', data.name)
    loadPresentation(data.id, data.children)
  }
  data.children.forEach(d =&gt; loadPresentations(d, loadSections))
}
</t>
<t tx="ekr.20180130165259.157">function loadPresentation (id, pages) {
  if (!pages) { return }
  pages.forEach((page, index) =&gt; {
    page.presentation = { pid: id, index }
  })
}

</t>
<t tx="ekr.20180130165259.158">function loadSubtrees (context, trees, data) {
  if (!trees.length) { return Promise.resolve() }
  const p = new Promise((resolve, reject) =&gt; {
    // TODO: this just loads the first subtree, need to load all
    let item = JSON.search(data, '//*[id="' + trees[0] + '"]')[0]
    loadLeoNode(context, item).then(res =&gt; resolve(res))
  })
  return p
}
</t>
<t tx="ekr.20180130165259.159">// for @clean nodes, set children with @language of extension
function setLanguageNodes (context, data) {
  const textItems = data.textItems
  data.data.forEach(d =&gt; {
    setLanguageNode(context, d, textItems)
  })
  // window.lconfig.dataSets = context.state.dataSets
}
</t>
<t tx="ekr.20180130165259.16">function parseQueryString (config, url) {
  var urlParams = {}
  url.replace(
    new RegExp('([^?=&amp;]+)(=([^&amp;]*))?', 'g'),
    function ($0, $1, $2, $3) {
      urlParams[$1] = $3
    }
  )
  for (let k in urlParams) {
    let v = urlParams[k]
    if (/#/.test(v)){
      v = v.substring(0, v.indexOf('#'))
    }
    if (typeof v !== 'undefined') {
      config[k] = v.replace(/%2F/g, '/').replace(/%27/g, "'")
    }
  }
  const hash = window.location.hash
  let baseMode = 't'
  if (window.lconfig.baseMode) { baseMode = window.lconfig.baseMode }
  if (!hash || hash.length &lt; 3) {
    //window.location.hash = baseMode + '/1'
    //window.location = window.location
  }
  return urlParams
}
/**
 * return formatted text, e.g. markdown or html
 * @param text {string}
 * @returns {string}
 */
</t>
<t tx="ekr.20180130165259.160">function setLanguageNode (context, d, textItems) {
  const title = d.name
  let language = ''
  if (/^\s*@clean/.test(title)) {
    var re = /(?:\.([^.]+))?$/
    var ext = re.exec(title)[1]
    var ng = ['txt', 'md', 'html']
    if (ng.indexOf(ext) === -1) {
      language = ext
    }
    const langs = {
      js: 'javascript',
      ts: 'typescript',
      py: 'python',
      java: 'java',
      c: 'c'
    }
    if (langs[ext]) {
      language = langs[ext]
    }
  }
  if (language) {
    return addDirectiveToSubTree(d, '@language ' + language, textItems)
  }
  d.children.forEach(child =&gt; {
    setLanguageNode(context, child, textItems)
  })
}

/**
 * e.g. add '@language javascript' to this item and all below
 * @param subtree
 * @param directive
 * @param textItems
 */
</t>
<t tx="ekr.20180130165259.161">function addDirectiveToSubTree (subtree, directive, textItems) {
  const text = textItems[subtree.t]
  if (!/^@/.test(text)) {
    textItems[subtree.t] = directive + '\n' + text
  }
  subtree.children.forEach(child =&gt; {
    addDirectiveToSubTree(child, directive, textItems)
  })
}
</t>
<t tx="ekr.20180130165259.162">function loadDataSets (context, data) {
  const textItems = data.textItems
  data.data.forEach(d =&gt; {
    loadDataSet(context, d, textItems)
  })
  window.lconfig.dataSets = context.state.dataSets
}
</t>
<t tx="ekr.20180130165259.163">function loadDataSet (context, item, textItems) {
  const text = textItems[item.t]
  const matches = item.name.match(/@dataSet ([a-zA-Z0-9]*)(.*)$/)
  if (matches) {
    const k = _.trim(matches[1])
    let v = text.replace(/^@language (\w+)/, '') // get rid of language directive
    try {
      v = JSON.parse(v)
    } catch (e) {
      console.log('Unable to parse data for: ' + item.name + ' ' + e)
    }
    context.commit('ADDDATASET', {k, v})
  }
  item.children.forEach(child =&gt; {
    loadDataSet(context, child, textItems)
  })
}
</t>
<t tx="ekr.20180130165259.164">function loadDataTables (context, data) {
  const textItems = data.textItems
  data.data.forEach(d =&gt; {
    loadDataTable(context, d, textItems)
  })
  window.lconfig.dataTables = context.state.dataTables
}
</t>
<t tx="ekr.20180130165259.165">function loadDataTable (context, item, textItems) {
  const text = textItems[item.t]
  const matches = item.name.match(/@dataTable ([a-zA-Z0-9]*)(.*)$/i)
  if (matches) {
    const k = _.trim(matches[1])
    const title = matches[2] || ''
    let v = text.replace(/^@language (\w+)/, '') // get rid of language directive
    let arr = null
    try {
      arr = Papa.parse(v).data
    } catch (e) {
      arr = []
      console.log('Unable to parse dataTable for: ' + item.name + ' ' + e)
    }
    arr.forEach(r =&gt; {
      r.forEach((c, i) =&gt; {
        r[i] = _.trim(c)
      })
    })
    const objArr = []
    const cols = arr[0]
    for (let r = 1; r &lt; arr.length; r++) {
      let row = arr[r]
      let rowObj = {}
      for (let c = 0; c &lt; row.length; c++) {
        let colName = cols[c]
        if (colName.indexOf('$') === -1) {
          rowObj[colName] = row[c]
        }
      }
      // let obj = arr[r].reduce((acc, v, i) =&gt; { acc[cols[i]] = v; return acc }, {})
      objArr.push(rowObj)
    }
    v = {title, arr, objArr}
    context.commit('ADDDATATABLE', {k, v})
  }
  item.children.forEach(child =&gt; {
    loadDataTable(context, child, textItems)
  })
}

</t>
<t tx="ekr.20180130165259.17">function formatText (text, noWrapper) {
  if (!text) { return '' }
  let language = getLanguage(text)

  // text = text.replace(/&lt;&lt;/g, '\u00AB')
  // text = text.replace(/&gt;&gt;/g, '\u00BB')
  text = text.replace(/&lt;&lt;(.*?)&gt;&gt;/g, '&lt;sectionlink :title="\'$1\'"/&gt;')
  // text = text.replace(/&lt;&lt;(.*?)&gt;&gt;/g, '&lt;div class=section-link"&gt;«$1»&lt;/div&gt;')
  text = text.replace(/\[\[(.*?)\]\]/g, '&lt;nodelink :title="\'$1\'"/&gt;')

  // just plain text
  if (!language) {
    language = 'plaintext'
  }
  // remove directives from first line
  if (/^\s*?@/.test(text)) {
    text = removeFirstLine(text)
  }
  switch (language) {
    case 'plaintext':
      text = `&lt;div class="text"&gt;${text}&lt;/div&gt;`
      break
    case 'md':
      text = md.render(text)
      break
    case 'pug': // eslint-disable-line
      text = window.pug.render(text) //
    case 'html':
      break
    case 'VueComponent':
      const muv = hljs.highlight('javascript', text)
      text = muv.value
      text = `&lt;pre&gt;${text}&lt;/pre&gt;`
      break
    default:
      text = text.replace(/&lt;sectionlink :title="'(.*?)'"\/&gt;/g, '«$1»')
      text = text.replace(/&lt;sectionlink title="(.*?)"\/&gt;/g, '«$1»')
      const mu = hljs.highlight(language, text)
      text = mu.value
      text = `&lt;pre v-pre&gt;${text}&lt;/pre&gt;`
      //debugger
      text = text.replace(/«(.*?)»/g, '&lt;span class="csection-link"&gt;«$1»&lt;/span&gt;')
      //  &amp;lt;div class=section-link"&amp;gt;« templates »&amp;lt;/div&amp;gt
      // text = text.replace(/&amp;lt;div class=section-link"&amp;gt;«(.*?)»&amp;lt;\/div&amp;gt;/g, '&lt;div class="section-link"&gt;«$1»&lt;/div&gt;')
  }

  if (noWrapper) {
    return text
  }
  text = `&lt;div class='content'&gt;${text}&lt;/div&gt;`
  return text
}

</t>
<t tx="ekr.20180130165259.18">function getObjectByKeyFromTree (d, k, v) {
  if (d[k].indexOf(v) &gt; -1) {
    return d
  }
  if (!d.children) { return '' }
  for (let i = 0; i &lt; d.children.length; i++) {
    let o = getObjectByKeyFromTree(d.children[i], k, v)
    if (o) { return o }
  }
}

// parseQueryString(window.location.href)

module.exports = {
  replaceRelUrls,
  getFileExtension,
  getLanguage,
  removeFirstLine,
  parseQueryString,
  formatText,
  getObjectByKeyFromTree
}

/*
 showContent: function () {
 let targetEl = this.targetEl
 if (!targetEl) {
 this.inline = true
 }
 // test for presence of url in title, if so it is external content
 if (/^\[/.test(this.model.name)) {
 return showSite.call(this, this.model.name, this.inline)
 } else {
 this.$store.commit('CONTENT_PANE', {type: 'text'})
 showText.call(this, this.textItems[this.model.t])
 }
 }
 */

/* ,
 setContent: function () {
 if (this.model.t &amp;&amp; !this.initialized &amp;&amp; (this.$store.state.currentItem.id === this.model.id)) {
 this.$store.commit('INIT') // set that current item has been shown
 this.showContent()
 }
 if ((!this.targetEl) &amp;&amp; this.isOpen &amp;&amp; (this.$store.state.currentItem.id !== this.model.id)) {
 this.showContent()
 }
 }
 */

/*
 function getParentEls (arr, el) {
 if (el.parentElement) {
 arr.push(el.parentElement)
 getParentEls(arr, el.parentElement)
 } else {
 return arr
 }
 }
 */


</t>
<t tx="ekr.20180130165259.19"></t>
<t tx="ekr.20180130165259.2"></t>
<t tx="ekr.20180130165259.20">@language html
&lt;template&gt;
  &lt;div class="accordionviewer"&gt;
    &lt;div class="panes-container"&gt;
      &lt;div class="center-pane" id="center-pane"&gt;
        &lt;ul&gt;
          &lt;div v-for="itemdata in data"&gt;
          &lt;item
            class="item"
            :top="true"
            :model="itemdata"
            :textItems="text"
            :targetEl="false"
            :open="false"&gt;
          &lt;/item&gt;
          &lt;/div&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;

@language javascript
import Item from './Item'

let target = {el: null}
export default {
  name: 'accordionviewer',
  props: {},
  components: {
    item: Item
  },
  data: function () {
    return {
      target: target,
      open: false,
      active: false,
      lhandle: true
    }
  },
  watch: {
    '$route': {
      handler: function (val, oldVal, changed) {
      //  this.id = val.params.id
      },
      immediate: true
    }
  },
  computed: {
    data () {
      return this.$store.state.leodata
    },
    text () {
      return this.$store.state.leotext
    }
  },
  mounted: function () {
  }
}
&lt;/script&gt;

@language html

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style&gt;
  .accordionviewer{
    height: 100%
  }
  .accordionviewer UL {
    list-style-type: none;
  }
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.21">@language html
&lt;template&gt;
  &lt;div class="pane"&gt;
    &lt;div v-show="textContent" id="tlayout"&gt;
      &lt;div id="lhandle"
           class="handle"&gt;
        &lt;div class="handle-button"
             v-show="hasPrev"
             @click="goPrev"&gt;
          &lt;icon class="icon"
                name="chevron-left"&gt;&lt;/icon&gt;
        &lt;/div&gt;
      &lt;/div&gt; &lt;!-- end lhandle --&gt;
      &lt;div class="right-cpane"&gt;
        &lt;component :is="dynComponent" v-bind="$props"/&gt;
      &lt;/div&gt;
      &lt;div id="rhandle"
           class="handle"&gt;
        &lt;div class="handle-button"
             v-show="hasNext"
             @click="goNext"&gt;
          &lt;icon class="icon"
                name="chevron-right"&gt;&lt;/icon&gt;
        &lt;/div&gt; &lt;!-- end rhandle --&gt;
      &lt;/div&gt;
    &lt;/div&gt; &lt;!-- end textContent --&gt;
    &lt;div v-show="iframeContent"
         style="min-height:100%; display:flex; background:#fff; width: 100%"
         v-html="iframeHTML"
         id="vpane"&gt;
    &lt;/div&gt;
&lt;/div&gt; &lt;!-- end pane --&gt;
&lt;/template&gt; 
&lt;script&gt;

@language javascript
import router from '../router'
import {presentation} from '../lib/presentation'
const util = require('../util.js')

&lt;&lt; functions &gt;&gt;

export default {
  &lt;&lt; default components &gt;&gt;
}
@language html
&lt;/script&gt;
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style&gt;
@language css
  .handle-button {
    height:20px;
    width: 20px;
    margin-left: auto;
    margin-right: auto;
    cursor: pointer;
    text-align: center;
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    color: #ccf;
    margin-left: 9px;
  }
  #lhandle {
    max-width: 50px;
  }
  .handle {
    width:50px;
    align-items: center;
    flex: auto;
    display: flex;
  }
  .right-cpane {
    flex: auto;
    background: #fff;
    padding:0px;
    padding-top: 33px;
    max-width: 620px;
    width: 620px;
    min-width: 500px;
    height: calc(100vh - 33px);
    overflow: auto;
  }
  p {
    line-height:1.3em;
  }
  #vpane {
    width: 100%;
    background: #fff;
    height: 100%;
  }
  #tlayout {
    background: #fff;
    min-height: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    flex-wrap: nowrap;
  }
  .pane {
    height: 100%;
    background: #fff;
    width: 100%;
    position: relative;
  }
  .voutline {
  }
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.22">@language html
&lt;template&gt;
  &lt;div class="treeviewer"&gt;
    &lt;splitpane leftPaneStyle="width:900px"&gt;
      &lt;div slot="left"&gt;
          &lt;d3tree
                  style="height:calc(100vh - 26px)"
                  :reset="reset"
                  :openDepth="openDepth"
                  ref="tree"
                  :zoomable="zoomable"
                  :data="data"
                  :node-text="nodeText"
                  :margin-x="Marginx" :margin-y="Marginy"
                  :type="type"
                  :layout-type="layoutType"
                  :duration="duration"
                  @clicked="onClick"
                  class="tree"&gt;&lt;/d3tree&gt;

      &lt;/div&gt;
      &lt;contentpane slot="right"&gt;&lt;/contentpane&gt;
    &lt;/splitpane&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  import D3tree from '../lib/D3tree'
  import SplitPane from './SplitPane'
  import ContentPane from './ContentPane'

  let target = {el: null}
  export default {
    name: 'd3viewer',
    props: {
    },
    components: {
      D3tree,
      splitpane: SplitPane,
      contentpane: ContentPane
    },
    data: function () {
      return {
        target: target,
        open: false,
        active: false,
        lhandle: true,
        duration: 750,
        nodeText: 'name',
        currentNode: null,
        zoomable: true,
        isLoading: false,
        events: [],
        reset: 0
      }
    },
    methods: {
      onClick (evt) {
        this.currentNode = evt.element
        this.onEvent('onClick', evt)
      },
      onEvent (eventName, data) {
        this.events.push({eventName, data: data.data})
        const id = data.data.id
        this.$store.dispatch('setCurrentItem', {id})
      }
    },
    watch: {
      '$route': {
        handler: function (val, oldVal, changed) {
        //  this.id = val.params.id
        },
        immediate: true
      }
    },
    computed: {
      data () {
        let d = this.$store.state.leodata
        if (d.length &gt; 1) {
          const root = {
            name: 'test',
            id: 0,
            children: d
          }
          return root
        } else {
          return d[0]
        }
      },
      text () {
        return this.$store.state.leotext
      },
      openDepth () {
        if (this.$store.state.viewType === 'd') {
          return 2
        }
        return -1
      },
      type () {
        this.reset = this.reset + 1
        if (this.$store.state.viewType === 'z') { return 'cluster' }
        return 'tree'
      },
      layoutType () {
        if (this.$store.state.viewType === 'r') { return 'circular' }
        return 'euclidean'
      },
      Marginx () {
        if (this.$store.state.viewType === 'r') { return -300 }
        return 80
      },
      Marginy () {
        if (this.$store.state.viewType === 'r') { return -200 }
        return 30
      }
    },
    mounted: function () {
    },
    updated () {
      // console.log('updated')
    }
  }
&lt;/script&gt;
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;
  .d3viewer {
    height: 100%;
    width: 100%;
  }
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.23">@language html
&lt;template&gt;
  &lt;div class="dashboard"&gt;
    &lt;appheader/&gt;
    &lt;div id="main" :class="{'header-space': config.showHeader}"&gt;
      &lt;router-view :id="id"&gt;&lt;/router-view&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import AppHeader from './Header'

export default {
  name: 'dashboard',
  components: {
    appheader: AppHeader
  },
  data () {
    return {
    }
  },
  computed: {
    id: function () {
      if (!this.$route.params.id) {
        return +1
      } else {
        return this.$route.params.id
      }
    },
    config () {
      return window.lconfig
    }
  },
  watch: {
    '$route' (to, from) {
    // console.log(to, from)
    }
  }
}
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;
h1, h2 {
  font-weight: normal;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  display: inline-block;
  margin: 0 10px;
}
#main {
  height: 100%;
  position: relative;
}
a {
  color: #42b983;
}
.dashboard{
  height: 100%;
}
.header-space {
  // padding-top: 33px;
}
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.24">@language html
&lt;template&gt;
  &lt;div&gt;
    &lt;div class="holder"&gt;
      &lt;div class="header" v-if="config.showHeader"&gt;
        &lt;span v-if="config.showAppTitle" class="app-title"&gt;Leo Vue&lt;/span&gt;
        &lt;span v-if="config.showAppTitle &amp;&amp; config.docTitle"&gt;: &lt;/span&gt;
        &lt;span class="doc-title"&gt;{{ config.docTitle }}&lt;/span&gt;
        &lt;div @click="toggle" class="icon icon-button"&gt;
          &lt;icon class="icon" name="bars"&gt;&lt;/icon&gt;
        &lt;/div&gt;
        &lt;div class="button-shim"&gt;&lt;/div&gt;
        &lt;div @click="goForward"
             class="icon icon-button"&gt;
          &lt;icon class="icon"
                :class="{disabled: noForward}"
                name="arrow-right"&gt;&lt;/icon&gt;
        &lt;/div&gt;
        &lt;div @click="goBack"
             class="icon icon-button disabled"&gt;
          &lt;icon class="icon"
                :class="{disabled: noBack}"
                name="arrow-left"&gt;&lt;/icon&gt;
        &lt;/div&gt;
        &lt;div class="hshim"&gt;&lt;/div&gt;
        &lt;searchbar class="searchbar"&gt;&lt;/searchbar&gt;
        &lt;div class="vshim"&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id="menu" class="menu"&gt;
      &lt;div class="menu-header"&gt;View Type&lt;/div&gt;
      &lt;div  v-for="v in viewTypes"
            class="menu-item"
            @click="setViewType(v.type)"&gt;
        &lt;div class="icon-box"&gt;
          &lt;icon
            name="check"
            v-show="viewType === v.type"
            class="check"&gt;&lt;/icon&gt;
        &lt;/div&gt;
        &lt;div class="menu-label"&gt;{{v.name}}&lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="menu-separator"&gt;&lt;/div&gt;
      &lt;div class="hshim"&gt;&lt;/div&gt;
      &lt;div @click="setAccordion()"
           class="menu-item"&gt;
        &lt;div class="icon-box"&gt;
          &lt;icon
            name="check"
            v-show="accordion"
            class="check"&gt;&lt;/icon&gt;
        &lt;/div&gt;
        &lt;div class="menu-label"&gt;Accordion&lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="menu-footer" @click="settings"&gt;Leo Vue&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  import SearchBar from './SearchBar'
  export default {
    name: 'appheader',
    components: {
      searchbar: SearchBar
    },
    data () {
      return {
        menu: false
      }
    },
    methods: {
      settings () {
        this.$router.replace({path: '/settings'})
      },
      setAccordion () {
        this.$store.commit('TOGGLEACCORDION')
      },
      toggle () {
        const menuEl = document.getElementById('menu')
        if (this.menu) {
          menuEl.style.width = 0
          menuEl.style.borderLeft = 'none'
        } else {
          menuEl.style.width = '180px'
          menuEl.style.borderLeft = '1px solid #ccc'
        }
        this.menu = !this.menu
      },
      setViewType (type) {
        this.$store.commit('VIEW_TYPE', {type})
        this.$store.commit('RESET')
        this.$router.replace({path: '/' + type + '/' + this.$store.state.currentItem.id})
        // close the menu
        setTimeout(this.toggle, 500)
      },
      goBack () {
        if (this.noBack) { return }
        const history = this.$store.state.history
        let historyIndex = this.$store.state.historyIndex
        if (historyIndex &gt; 0) {
          historyIndex = historyIndex - 1
        }
        const id = history[historyIndex]
        this.$store.commit('CURRENT_ITEM', { id, historyIndex })
      },
      goForward () {
        if (this.noForward) { return }
        const history = this.$store.state.history
        let historyIndex = this.$store.state.historyIndex
        const id = history[historyIndex + 1]
        if (historyIndex &lt; history.length - 1) {
          historyIndex = historyIndex + 1
        }
        this.$store.commit('CURRENT_ITEM', { id, historyIndex })
      }
    },
    computed: {
      viewType () {
        return this.$store.state.viewType
      },
      accordion () {
        return this.$store.state.accordion
      },
      viewTypes () {
        let viewTypes = [
          {name: 'Outline', type: 't'},
          {name: 'Inline', type: 'a'},
          {name: 'Graphic Tree', type: 'd'},
          {name: 'Dendrogram', type: 'z'},
          {name: 'Nested Menu', type: 'n'},
          {name: 'Movable Panes', type: 'w'}
        ]
        if (this.config.viewTypes) {
          return this.config.viewTypes
        }
        return viewTypes
      },
      noBack () {
        return this.$store.state.historyIndex &lt; 2
      },
      noForward () {
        return this.$store.state.historyIndex &gt;= this.$store.state.history.length - 1
      },
      config () {
        return window.lconfig
      }

    }
  }
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
.check
  margin-top: 2px
  margin-bottom: -3px
.holder
  padding: 0
  margin: 0
  position: fixed
  width: 100%
  z-index: 111
.icon-box
  width: 20px
  margin-left: 20px
  display: inline-block
.menu-label
  width: 80px
  display: inline
.menu-header
  padding: 10px
  font-weight: bold
  text-align: center
  white-space: nowrap
.menu-item
  padding: 4px
  // text-align: center
  white-space: nowrap
  cursor: pointer
.menu
  position: fixed
  z-index: 111
  top: 33px
  overflow: hidden
  background: #ccc
  width: 0
  right: 0
  height: 100%
  //border-left: 1px solid #999
  border-top: 1px solid #ccc
  //-webkit-box-shadow: 10px 0 5px -2px #888;
  //box-shadow: 10px 0 5px -2px #888;
  //box-shadow: -4px 0 8px -4px rgba(31, 31, 31, 0.8)
  transition: width .5s
.menu-separator
  border-bottom: 1px solid #ddd
  margin-top: 10px
.header
  text-align: left
  background: #eee
  font-weight: normal
  padding: 2px
  padding-top: 6px
  padding-left: 6px
  color: #333
  border-bottom: 1px solid #ddd
  height: 24px
.search
  float: right
  font-family: Avenir
  margin-right: 10px
  font-size: 14px
  margin-top: -1px
  display: none
.icon
  float: right
  padding: 0
  padding-top: 2px
  padding-right: 7px
  color: #666
.icon-button
  cursor: pointer
  margin: 0
  padding: 0
.vshim
  width: 8px
  float: right
.disabled
  color: #ccc
.button-shim
  width: 8px
  float: right
  height: 16px
.app-title
  font-weight: normal
  color: #333
.doc-title
  font-weight: bold
.menu-footer
  color: #fff
  position: absolute
  bottom: 60px
  width: 100%
  text-align: center
  text-decoration: none
  cursor: pointer
.searchbar
  position: absolute
  right: 80px
  top: 0
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.25">@language html
&lt;template&gt;
  &lt;li :id="model.id" v-bind:class="{'unselected-sibling': hasOpenSibling}"&gt;
    &lt;div class="item-box"
         :class="{bold: isFolder, active: active, topItem: top}"&gt;
      &lt;div
        @click="toggle"&gt;
        &lt;div v-bind:class="{'icon-bracket': top}"
             style="display:inline-block;
             padding-left:3px;
             padding-right:3px;"
             v-if="isFolder"&gt;
          &lt;div class="arrow"
               v-bind:class="{arrowdown: isOpenA}"&gt;▶&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="leo-box"&gt;&lt;/div&gt;
        &lt;div v-if="!isFolder" class="leaf-button"&gt;&lt;/div&gt;
        &lt;span class="otitle"&gt;{{vtitle}}&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div v-show="isOpen" class="child-items"&gt;
      &lt;div v-html="myContent"
           class="inline"&gt;
      &lt;/div&gt;
      &lt;ul v-if="isFolder"&gt;
        &lt;item
          class="item"
          v-for="model in model.children"
          :model="model"
          :key="model.id"
          :textItems="textItems"
          :accordion="accordion"
          :targetEl="targetEl"&gt;
        &lt;/item&gt;
      &lt;/ul&gt;
      &lt;div v-show="isOpenInline" class="hshim"&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/template&gt;

&lt;script&gt;

@language javascript
import Velocity from 'velocity-animate'
export default {
  name: 'item',
  props: {
    model: Object,
    targetEl: Boolean,
    textItems: Object,
    top: Boolean,
    accordion: Boolean
  },
  data: function () {
    return {
      reset: true,
      openFlag: false,
      inline: false,
      closearrow: false,
      myContent: ''
    }
  },
  computed: {
    isFolder: function () {
      if (/\.leo\)$/.test(this.model.name)) { return true } // subtree
      return this.model.children &amp;&amp; this.model.children.length
    },
    isClosedSibling: function () {
      if (this.isOpen) { return ' open' }
      const nextSiblings = JSON.search(this.$store.state.leodata, '//*[id="' + this.model.id + '"]/following-sibling::*')
      const prevSiblings = JSON.search(this.$store.state.leodata, '//*[id="' + this.model.id + '"]/preceding-sibling::children')
      var foo = nextSiblings.length + '_' + prevSiblings.length
      return foo
      // check if any siblings are open
      // if yes then return true
      // else return false
    },
    hasOpenSibling: function () {
      if (!this.accordion) { return false }
      // TODO: this is slow, need to refactor, possibly replace defiant wth parent pointer on item
      // if (this.isOpen) { return ' open' }
      if (!this.isOpen) { return }
      const nextSiblings = JSON.search(this.$store.state.leodata, '//*[id="' + this.model.id + '"]/following-sibling::*')
      const prevSiblings = JSON.search(this.$store.state.leodata, '//*[id="' + this.model.id + '"]/preceding-sibling::children')
      let siblings = nextSiblings.concat(prevSiblings)
      siblings = siblings.map(s =&gt; s.id)
      let hasOpen = false
      const ids = this.$store.state.openItemIds
      siblings.forEach(sid =&gt; {
        if (ids.indexOf(sid + '') &gt; -1) { hasOpen = true }
      })
      hasOpen = false
      return hasOpen
      // check if any siblings are open
      // if yes then return true
      // else return false
    },
    isOpen: function () {
      const ids = this.$store.state.openItemIds
      let open = true
      if (ids.indexOf(this.model.id + '') === -1) { open = false }
      return open
    },
    isOpenInline: function () {
      return this.$route.name === 'ANode'
      // return true
      // return this.isOpen &amp;&amp; this.$route.name === 'ANode'
    },
    isOpenA: function () {
      return this.isOpen &amp;&amp; !this.closearrow
    },
    active: function () {
      // TODO: change ids to strings
      if (!this.model) { return }
      if (this.$store.state.currentPage.id) {
        return this.$store.state.currentPage.id === this.model.id
      }
      return this.$store.state.currentItem.id === this.model.id
    },
    vtitle: function () {
      const re = /^\[(.*?)\]\((.*?)\)$/
      const match = re.exec(this.model.name)
      if (!match) {
        return this.model.name
      }
      const title = match[1]
      if (title) {
        return title
      } else {
        return this.name
      }
    },
    initialized () {
      return this.$store.state.initialized
    }
  },
  methods: {
    toggle: function () {
      // toggle the tree node
      let duration = 300
      const easing = 'linear'
      this.reset = false // TODO: remove
      // toggle the open/close state of the item
      let openItemIds = this.$store.state.openItemIds.slice(0) // clone openid array
      if (!this.isOpen) {
        openItemIds.push(this.model.id)
      } else {
        openItemIds = openItemIds.filter(id =&gt; id !== this.model.id)
        this.closearrow = true
      }
      const ul = this.$el.getElementsByClassName('child-items')[0]
      if (!this.isOpen) {
        this.$store.commit('OPEN_ITEMS', {openItemIds})
        Velocity(ul, 'slideDown', {duration, easing}).then(els =&gt; {
          if (this.accordion) {
            this.closeSiblings(easing, 'Up')
          }
        })
      } else {
        Velocity(ul, 'slideUp', {duration, easing}).then(els =&gt; {
          this.$store.commit('OPEN_ITEMS', {openItemIds})
          this.closearrow = false
          if (this.accordion) {
            this.closeSiblings(easing, 'Down')
          }
        })
      }
      const id = this.model.id
      if (this.model.presentation) {
        let presentation = this.model.presentation
        let id = this.model.presentation.pid
        this.$store.dispatch('setCurrentItem', {id})

        let _toPageF = () =&gt; {
          const iframe = document.getElementsByTagName('iframe')[0]
          if (!presentation.hasOwnProperty('index')) { return }
          if (!iframe.contentWindow) {
            console.log('NO IFRAME CONTENT WINDOW')
          }
          if (iframe.contentWindow.Reveal) {
            console.log('going to page:', presentation.index)
            iframe.contentWindow.Reveal.slide(presentation.index, 0)
          } else {
            console.log(iframe.contentWindow.document)
            console.log('no reveal')
          }
        }
        window.setTimeout(_toPageF, 1)

        return
      }
      this.$store.dispatch('setCurrentItem', {id})
      // close siblings if in accordion mode
    },
    closeSiblings: function (easing, direction) {
      const duration = 500
      const nextSiblings = JSON.search(this.$store.state.leodata, '//*[id="' + this.model.id + '"]/following-sibling::*')
      const prevSiblings = JSON.search(this.$store.state.leodata, '//*[id="' + this.model.id + '"]/preceding-sibling::children')
      let siblings = nextSiblings.concat(prevSiblings)
      siblings = siblings.map(s =&gt; s.id)
      siblings.forEach(sid =&gt; {
        let el = document.getElementById(sid)
        Velocity(el, 'slide' + direction, {duration, easing}).then(els =&gt; {
        })
      })
    }
  },
  watch: {
    '$store.state.contentItemsUpdateCount': {
      handler: function (val, oldVal) {
        if (!this.isOpenInline) { return }
        if (val &gt; 0 &amp;&amp; val !== oldVal) {
          const text = this.$store.state.contentItems[this.model.id]
          // if (!text) { return }
          this.myContent = text
        }
      },
      deep: true,
      immediate: true
    }
  },
  mounted () {
  },
  updated () {
  }
}

@language html
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass"&gt;
@language css
$contentBorderColor: #ccc
.topItem
  margin-bottom: 10px
  SPAN
    font-size: 30px
    line-height: 1.5
.topItemIcon
  vertical-align: top
  padding-left: 20px
  margin-right: -10px
.icon-bracket
  display: inline-block
  height: 26px
  vertical-align: middle
  padding-bottom: 8px
  padding-left: 0
  .arrow
    display: inline-block
    height: 100%
    vertical-align: middle
    padding-bottom: 2px
    width: 20px
.arrow
  -webkit-transition: all .1s ease
  transition: all .1s ease
  text-align: center
  display: inline-block
  width: 11px
  height: 21px
  margin-top: 2px
.arrowdown
  -webkit-transform: rotate(90deg)
  transform: rotate(90deg)
.item
  cursor: pointer
  width: 100%
.bold
  font-weight: bold
.active
  background: #81ff00
  max-width: 772px
.activeb
  background: #81ff00
  font-weight: bold
.inline .content
  max-width: 700px
  white-space: normal
  padding: 30px
  padding-top: 20px
  padding-bottom: 20px
  //margin-top: 4px
  margin-bottom: 16px
  border: 6px solid $contentBorderColor
  border-radius: 4px
  // box-shadow: -4px 0 8px -4px rgba(31, 31, 31, 0.8)
.vinline
  max-width: 700px
  white-space: normal
  padding: 0
  padding-top: 0
  padding-bottom: 0
  margin-top: 4px
  margin-bottom: 16px
  height: 600px
  width: 760px
  border: 1px solid $contentBorderColor
  border-radius: 4px
  overflow: auto
// box-shadow: -4px 0 8px -4px rgba(31, 31, 31, 0.8)
.hshim
  height: 15px
.otitle
  padding-left: 4px
.child-items
  margin: 0
  padding: 0
.unselected-sibling
  background-color: yellow
  height: 0
  overflow: hidden
  -webkit-transition: height 4s ease
  transition: height 4s ease
.leo-box
  display: none
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.26">@language html
&lt;template&gt;
  &lt;div style="display:none"&gt;
    $$&lt;slot&gt;&lt;/slot&gt;$$
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript
export default {
  name: 'mathjax',
  data () { return {} },
  methods: {},
  components: {},
  mounted () {
    if (MathJax) {
      MathJax.Hub.Queue(['Typeset', MathJax.Hub, this.$el])
      MathJax.Hub.Queue(() =&gt; this.$el.style.display = 'block')
    }
  },
  updated () {}
}
@language html
&lt;/script&gt;

@language javascript
//MathJax.Hub.Queue(["Typeset",MathJax.Hub,"MathExample"]);
@language html
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.27">@language html
&lt;template&gt;
  &lt;div class="nestedviewer"&gt;
    &lt;splitpane leftPaneStyle="width:360px"&gt;
      &lt;ul slot="left"&gt;
        &lt;div v-for="itemdata in data"&gt;
        &lt;item
          class="item"
          :model="itemdata"
          :top="false"
          :textItems="text"
          :accordion="true"
          :targetEl="target.el"&gt;
        &lt;/item&gt;
        &lt;/div&gt;
      &lt;/ul&gt;
      &lt;contentpane slot="right"&gt;&lt;/contentpane&gt;
    &lt;/splitpane&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript
  import Item from './Item'
  import ContentPane from './ContentPane'
  import SplitPane from './SplitPane'

  let target = {el: true, v: null}
  export default {
    name: 'nestedviewer',
    components: {
      item: Item,
      contentpane: ContentPane,
      splitpane: SplitPane
    },
    data: function () {
      return {
        target: target
      }
    },
    computed: {
      data () {
        return this.$store.state.leodata
      },
      text () {
        return this.$store.state.leotext
      }
    }

  }
&lt;/script&gt;
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass"&gt;
.nestedviewer
  height: 100%
  margin-left: 6px
  .item-box
    border: 2px solid #ccc
    margin-right: 3px
    padding-left: 6px
    overflow: hidden
  ul
    list-style-type: none
    padding: 0
    padding-left: 0
    line-height: 1.4em
    list-style-type: none
    margin-bottom: 8px
  li
    white-space: nowrap
    margin-bottom: 4px
    margin-top: 4px
  li &gt; div
    padding-left: 0
  .leaf-button
    width: 10px
    padding-left: 4px
    height: 10px
    display: inline-block
  .leaf-button::after
    content: '○'
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.28">@language html
&lt;template&gt;
  &lt;div class="node-link"
       @click="gotoSection"&gt;{{title}}&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  import _ from 'lodash'
  export default {
    name: 'nodelink',
    props: {
      title: String
    },
    data () {
      return {
      }
    },
    methods: {
      gotoSection: function () {
        const title = _.trim(this.title)
        let leodata = this.$store.state.leodata
        if (window.parent !== window.self) {
          leodata = window.parent.lconfig.leodata
        }
        let titleObj = JSON.search(leodata, '//*[name="' + title + '"]')[0]
        if (!titleObj) {
          titleObj = JSON.search(leodata, '//*[contains(name, "' + title + '")]')[0]
        }
        if (!titleObj) { return }
        let id = null
        let index = null
        if (titleObj) {
          id = titleObj.id
          if (titleObj.index) {
            index = titleObj.index
          }
          this.$store.dispatch('setCurrentItem', {id})
          if (window.parent !== window.self) {
            console.log('posting message')
            window.parent.postMessage(JSON.stringify({
              namespace: 'leovue',
              eventName: 'setcurrentitem',
              state: {id, index}
            }), '*')
          }
        }
      }
    },
    components: {}
  }
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
.node-link
  color: #4cb986
  font-weight: bold
  cursor: pointer
  text-decoration: none
  display: inline-block
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.29">@language html
&lt;template&gt;
  &lt;div class="searchbar"&gt;
    &lt;div id="app"&gt;
      &lt;vue-instant :suggestion-attribute="suggestionAttribute"
                   v-model="value" :disabled="false"
                   @input="changed"
                   @click-input="clickInput"
                   @click-button="clickButton"
                   @selected="selected"
                   @enter="enter"
                   @key-up="keyUp"
                   @key-down="keyDown"
                   @key-right="keyRight"
                   @clear="clear"
                   @escape="escape"
                   :show-autocomplete="true"
                   :autofocus="false"
                   :suggestions="suggestions"
                   name="customName"
                   placeholder=""
                   type="twitter"&gt;&lt;/vue-instant&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  // import axios from 'axios'
  import _ from 'lodash'
  import VueInstant from './VueInstant'
  export default {
    name: 'searchbar',
    data () {
      return {
        value: '',
        suggestionAttribute: 'title',
        suggestions: [],
        selectedEvent: ''
      }
    },
    methods: {
      clickInput: function () {
        this.selectedEvent = 'click input'
      },
      clickButton: function () {
        this.selectedEvent = 'click button'
      },
      selected: function () {
        this.selectedEvent = 'selection changed'
      },
      enter: function () {
        this.selectedEvent = 'enter'
      },
      keyUp: function () {
        this.selectedEvent = 'keyup pressed'
      },
      keyDown: function () {
        this.selectedEvent = 'keyDown pressed'
      },
      keyRight: function () {
        this.selectedEvent = 'keyRight pressed'
      },
      clear: function () {
        this.selectedEvent = 'clear input'
      },
      escape: function () {
        this.selectedEvent = 'escape'
      },
      changed: function () {
        this.suggestions = []
        var that = this
        if (this.value.length &lt; 3) { return }
        const state = this.$store.state
        const terms = this.value.split(' ')
        let items = state.idx.search(this.value).filter(function (items) {
          return Object.keys(items.matchData.metadata).length === terms.length
        })
        items.forEach(item =&gt; {
          let doc = _.find(state.idxDocs, d =&gt; d.id === item.ref)
          that.suggestions.push(
            {
              title: doc.name,
              text: doc.text,
              id: doc.id
            })
        })

        /*
        // STANDARD 'OR' SEARCH
        const items = state.idx.search(this.value)
        items.forEach(item =&gt; {
          let doc = _.find(state.idxDocs, d =&gt; d.id === item.ref)
          that.suggestions.push(
            {
              title: doc.name,
              text: doc.text,
              id: doc.id
            })
        })
        */
      }
    },
    components: {
      'vue-instant': VueInstant
    }
  }
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass"&gt;
.settings
  padding: 40px
.sbx-twitter__input
   box-shadow: none
.sbx-twitter__input-placeholder
  box-shadow: none
  // background: #fff
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.3">@language html
&lt;template&gt;
  &lt;div id="app"
    @drop="drop_handler($event);"
    @dragover="dragover_handler($event);"
    @dragend="dragend_handler($event);"&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
&lt;&lt; export default &gt;&gt;
&lt;/script&gt;
&lt;style lang="sass"&gt;
&lt;&lt; sass style sheet &gt;&gt;
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.30">@language html
&lt;template&gt;
  &lt;div class="section-link"
       @click="gotoSection"&gt;« {{title}} »&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  import _ from 'lodash'
  import util from '../util'
  export default {
    name: 'sectionlink',
    props: {
      title: String
    },
    data () {
      return {
      }
    },
    methods: {
      gotoSection: function () {
        const plainTitle = _.trim(this.title)
        const searchTitle = '« ' + plainTitle + ' »'
        let leodata = this.$store.state.leodata
        if (window.parent !== window.self) {
          leodata = window.parent.lconfig.leodata
        }
        let titleObj = JSON.search(leodata, '//*[name="' + searchTitle + '"]')[0]
        if (!titleObj) {
          titleObj = util.getObjectByKeyFromTree(leodata[0], 'name', plainTitle)
        }
        let id = null
        let index = null
        if (titleObj) {
          id = titleObj.id
          if (titleObj.index) {
            index = titleObj.index
          }
          this.$store.dispatch('setCurrentItem', {id})
          if (window.parent !== window.self) {
            console.log('posting message')
            window.parent.postMessage(JSON.stringify({
              namespace: 'leovue',
              eventName: 'setcurrentitem',
              state: {id, index}
            }), '*')
          }
        }
      }
    },
    components: {}
  }
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
.section-link
  color: #4cb986
  font-weight: bold
  cursor: pointer
  text-decoration: none
  display: inline-block
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.31">@language html
&lt;template&gt;
  &lt;div class="settings"&gt;
    &lt;div&gt;
      &lt;h1 style="margin-left:0"&gt;Leo Viewer&lt;/h1&gt;
      &lt;div&gt;Version 1.4.0&lt;/div&gt;
      &lt;div class="hshim"&gt;&lt;/div&gt;
      &lt;div&gt;&lt;a href="https://github.com/kaleguy/leoviewer"&gt;Leo Viewer on Github&lt;/a&gt;&lt;/div&gt;
      &lt;div class="hshim"&gt;&lt;/div&gt;
      &lt;div v-if="staticSite"&gt;
        &lt;div&gt;&lt;a href="static/site/index.html"&gt;HTML Site&lt;/a&gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="hshim"&gt;&lt;/div&gt;
      &lt;div&gt;
        &lt;div class="link" @click="main"&gt;Return to Main&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    name: 'settings',
    components: {
    },
    methods: {
      main () {
        this.$router.replace({path: '/'})
      }
    },
    data () {
      return {
      }
    },
    computed: {
      id: function () {
        if (!this.$route.params.id) {
          return +1
        } else {
          return this.$route.params.id
        }
      },
      staticSite: function () {
        if (window.lconfig.staticSite) {
          return true
        }
        return false
      }
    },
    watch: {
      '$route' (to, from) {
        // console.log(to, from)
      }
    }
  }
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
  .settings
    padding: 40px
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.32">@language html
&lt;template&gt;
    &lt;div class="panes-container"&gt;
      &lt;div class="left-pane unselectable"
           :style="leftPaneStyle"
           id="left-pane"&gt;
         &lt;slot name="left"&gt;&lt;/slot&gt;
      &lt;/div&gt;
      &lt;div class="panes-separator"
           id="panes-separator"&gt;
           &lt;div class="split-left"
                @click="slide('left')"&gt;&lt;icon name="angle-double-left"&gt;&lt;/icon&gt;
           &lt;/div&gt;
           &lt;div class="split-right"
                v-show="showRightButton"
                @click="slide('right')"&gt;&lt;icon name="angle-double-right"&gt;&lt;/icon&gt;
           &lt;/div&gt;
      &lt;/div&gt;
      &lt;div id="right-pane" class="right-pane"&gt;
        &lt;slot name="right"&gt;&lt;/slot&gt;
      &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript
  let leftPane
  let rightPane
  let paneSep
  export default {
    name: 'splitpane',
    props: {
      leftPaneStyle: String
    },
    data: function () {
      return {
        showRightButton: false,
        leftPaneWidth: 0
      }
    },
    methods: {
      slide: function (direction) {
        if (direction === 'left') {
          this.leftPaneWidth = leftPane.style.width
          leftPane.style.width = 0
          this.showRightButton = true
        } else {
          leftPane.style.width = this.leftPaneWidth
          this.showRightButton = false
        }
      }
    },
    computed: {
      xshowRightButton: function () {
        if (!leftPane) { return }
        return !leftPane.style.width
      }
    },
    mounted: function () {
      leftPane = document.getElementById('left-pane')
      rightPane = document.getElementById('right-pane')
      paneSep = document.getElementById('panes-separator')
      // The script below constrains the target to move horizontally between a left and a right virtual boundaries.
      // - the left limit is positioned at 10% of the screen width
      // - the right limit is positioned at 90% of the screen width
      var leftLimit = 0
      var rightLimit = 90

      paneSep.sdrag(function (el, pageX, startX, pageY, startY, fix) {
        fix.skipX = true
        if (pageX &lt; window.innerWidth * leftLimit / 100) {
          pageX = window.innerWidth * leftLimit / 100
          fix.pageX = pageX
        }
        if (pageX &gt; window.innerWidth * rightLimit / 100) {
          pageX = window.innerWidth * rightLimit / 100
          fix.pageX = pageX
        }
        var cur = pageX / window.innerWidth * 100
        if (cur &lt; 0) {
          cur = 0
        }
        if (cur &gt; window.innerWidth) {
          cur = window.innerWidth
        }
        var right = (100 - cur - 2)
        leftPane.style.width = cur + '%'
        rightPane.style.width = right + '%'
      }, null, 'horizontal')
    },
    updated () {
    }
  }
&lt;/script&gt;
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;
@language css
  .panes-container {
    display: flex;
    width: 100%;
    height: 100%;
  }
  .left-pane {
    background: #fff;
    transition: width .3s
  }
  .panes-separator {
    width: 11px;
    background: #eee;
    position: relative;
    cursor: col-resize;
    background-image: url('../assets/vertical.png');
    background-repeat: no-repeat;
    background-position: 50% 46%;
  }
  .panes-container,
  .panes-separator,
  .left-pane,
  .right-pane {
    margin: 0;
    padding: 0;
  }
  .right-pane {
    width: 100%;
  }
  #left-pane {
    overflow-y: scroll;
    padding-top: 33px;
  }
  .split-left, .split-right {
    margin-left: 0px;
    text-align: center;
    color: #999;
    cursor: pointer;
    width: 11px;
  }
  .split-left {
    margin-top: calc(50vh - 116px);
  }
  .split-right {
    margin-top: calc(128px);
  }
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.33">@language html
&lt;template&gt;
  &lt;div&gt;
   &lt;table :style="style"&gt;
     &lt;caption&gt;{{caption}}&lt;/caption&gt;
     &lt;thead&gt;
       &lt;th v-for="(cell, c) in firstRow" v-if="dataCol(c)"&gt;{{ cell }}&lt;/th&gt;
     &lt;/thead&gt;
     &lt;tbody&gt;
       &lt;tr v-for="(row, r) in table" v-if="r"&gt;
          &lt;td v-for="(cell, c) in row" v-if="dataCol(c)"&gt;{{ cell }}&lt;/td&gt;
       &lt;/tr&gt;
     &lt;/tbody&gt;
   &lt;/table&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'vtable',
  props: {
    dataTable: String,
    hideTitle: Boolean,
    shadow: {
      type: Boolean,
      default: true
    },
    fontSize: {
      type: String,
      default: '14'
    }
  },
  components: {
  },
  methods: {
    main () {
      this.$router.replace({path: '/'})
    },
    dataCol (index) {
      if (this.firstRow[index].indexOf('$') &gt; -1) {
        return false
      }
      return true
    }
  },
  data () {
    return {
      table: Object,
      caption: String
    }
  },
  computed: {
    id: function () {
    },
    firstRow: function () {
      return this.table[0]
    },
    style: function () {
      let shadowStyle = 'box-shadow: 1px 1px 7px #ccc'
      if (!this.shadowStyle) {
        shadowStyle = ''
      }
      return `${shadowStyle}; font-size:${this.fontSize}px;`
    }
  },
  mounted () {
    let tableObj = this.$store.state.dataTables[this.dataTable]
    if (!tableObj) {
      tableObj = window.parent.lconfig.dataTables[this.dataTable]
    }
    if (tableObj) {
      this.table = tableObj.arr
      if (!this.hideTitle) { this.caption = tableObj.title }
    } else {
      this.table = [[]]
    }
  },
  watch: {
    '$route' (to, from) {
      // console.log(to, from)
    }
  }
}
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
TABLE
  border: 1px solid #ccc
  padding: 4px
  width: 100%
  padding-right: 8px
CAPTION
  font-weight: bold
TH
  text-align: right
  padding-left: 8px
TD
  text-align: right
  padding: 0
  padding-left: 4px
  white-space: nowrap
TR TD:first-child
  font-weight: bold
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.34">@language html

&lt;template&gt;
  &lt;div class="treeviewer"&gt;
    &lt;splitpane leftPaneStyle="width:360px"&gt;
      &lt;ul slot="left"&gt;
        &lt;div v-for="itemdata in data"&gt;
        &lt;item
          class="item"
          :model="itemdata"
          :top="top"
          :textItems="text"
          :targetEl="target.el"&gt;
        &lt;/item&gt;
        &lt;/div&gt;
      &lt;/ul&gt;
      &lt;contentpane slot="right"&gt;&lt;/contentpane&gt;
    &lt;/splitpane&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;br/&gt;

&lt;script&gt;
@language javascript

  // EKR: Item.vue, ContentPane.vue and SplitPane.vue define these...
  import Item from './Item'
  import ContentPane from './ContentPane'
  import SplitPane from './SplitPane'

  let target = {el: true, v: null}
  export default {
    name: 'treeviewer',
    components: {
      item: Item,
      contentpane: ContentPane,
      splitpane: SplitPane
    },
    data: function () {
      return {
        target: target
      }
    },
    computed: {

      top () {
        // if (this.$store.state.leodata.length &gt; 1) { return false }
        if (window.lconfig.firstNodeAsTitle === false) { return false }
        return true
      },
      data () {
        return this.$store.state.leodata
      },
      text () {
        return this.$store.state.leotext
      }
    }

  }
&lt;/script&gt;

@language html
&lt;br/&gt;
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass"&gt;
@language css
.treeviewer
  margin-left: 0
  height: 100%
  #left-pane
    ul
      list-style-type: none;
      padding: 0;
      padding-left: 10px;
      line-height: 1.4em
      list-style-type: none
      margin-bottom: 8px
    li
      white-space: nowrap
      min-width: 760px
      margin-bottom: 4px
      margin-top: 4px
    li &gt; div
      padding-left: 4px
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.35">
var app = angular.module('unQork');
console.log('LEO VERSION')
@others

@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.36">formioComponentsProvider.register('viewgrid', {
  fbtemplate: 'formio/formbuilder/viewgrids.html',
  title: 'ViewGrid',
  template: 'formio/components/viewgrids.html',
  group: 'advanced',
  controller: [
    '$scope',
    '$http',
    '$state',
    '$timeout',
    function(
      $scope,
      $http,
      $state,
      $timeout
    ) {
      if ($scope.builder) { return; }     // Don't do calculations in form builder.
      var data = $scope.submission ? $scope.submission.data : {};
      var viewgridData = $scope.component.viewgridData;
      var labelId = $scope.component.key;
      $scope.labelId = labelId;
      var filtering = $scope.component.viewgridData.showFilters;
      var height = $scope.component.viewgridData.height != "" ? $scope.component.viewgridData.height + 'px' : 'auto';
      var pageSize = $scope.component.viewgridData.pageSize || 10;

      // The action for the row button
      var action = $scope.component.viewgridData.action || 'Submit';
      var actionKey = action.replace(/\s/g, '');
      var event = $scope.component.viewgridData.event || actionKey;

      var noDataText = $scope.component.viewgridData.noDataText || 'Not found';

      var keys = viewgridData.dataInputObject;
      var url = viewgridData.sourceUrl || '';
      if (url &amp;&amp; url.substr(0, 1) === '/') {
        url = Formio.getBaseUrl() + url;
      }
      @others
    }
  ],
  icon: 'fa fa-table',
  settings: {
    multiple: true,
    input: false,
    key: 'viewgridField',
    label: '',
    protected: false,
    unique: false,
    persistent: true,
    showTitle: false,
    viewgridData: {
      dataDisplayObject: [],
      dataInputObject: [],
      dataOutputObject: []
    }
  },
  views: [
    {
      name: 'ViewGrid',
      template: 'formio/components/common/viewgrid.html'
    }
  ],
  documentation: ''
});
</t>
<t tx="ekr.20180130165259.37">var db = {
  loadData: function(filter) {
    return $.grep(this.records, function(row) {
      var f = true;
      Object.keys(filter).forEach(function (filterName) {
        var colFilter = filter[filterName];
        var colValue = row[filterName];
        if (!colFilter) { return }
        if($.type(colValue) !== "string") {
          return f = (colFilter === colValue);
        }
        if (colFilter &amp;&amp; colValue.toLowerCase().indexOf(colFilter.toLowerCase()) &lt; 0){
          return f = false;
        }
      });
      return f;
    });
  },
  records: []
};
</t>
<t tx="ekr.20180130165259.38">var setCurrentRow = function (item, index) {
    // change for demo
    var outputList = $scope.component.viewgridData.dataOutputObject;
    if (outputList.length &gt; 0) {
      for (var j = 0; j &lt; outputList.length; j++) {
          var output = outputList[j];
          var mapping = output.mapping;
          var dataValue = item[mapping];
          output.type = 'value';
          if (dataValue === undefined) {
              dataValue = ''; // reset the value if not found
          }
          setOutputValues(output, dataValue, data,  $scope.$parent.form);
      }
    }
};

</t>
<t tx="ekr.20180130165259.39">var executeViewgrid = function(fields) {
  if ($scope.builder) { return; }

  if (! viewgridData.dataDisplayObject){
    viewgridData.dataDisplayObject = [];
    viewgridData.dataInputObject = [];
    viewgridData.dataOutputObject = [];
  } // object not saved correctly
  var data = $scope.submission ? $scope.submission.data : {};
  var hasFormula = setDataValues(viewgridData.dataInputObject, data, false);
  if (hasFormula === undefined ) {
      //console.log('required fields not supplied, hasFormula/setDataValues returns undefined');
      return;
  }
  var buttonField = {
    type: 'control',
    width: 100,
    @others
};

</t>
<t tx="ekr.20180130165259.4">@language html
&lt;template&gt;
    &lt;div class="reveal"&gt;
      &lt;component :is="currentContent"/&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript
export default {
  name: 'appBase',
  data: function () {
    return {
      slideContent: '',
      initialized: false,
      currentContent: null
    }
  },
  methods: {
  },
  mounted () {
    // let filename = 'static/docs'
    if (window.lconfig.filename) {
    //  filename = window.lconfig.filename
    }
    // console.log('LOADING APP BASE')
    if (!this.$store.initializedData) {
    //  this.$store.dispatch('loadLeo', {filename, route: this.$route})
    }
    // const slideContent = document.getElementById('slideContent').innerHTML
    // this.slideContent = slideContent
    this.currentContent = this.dynComponent
    // Reveal.initialize({}) // eslint-disable-line
  },
  updated () {
    if (!this.initialized) {
      // Reveal.initialize({}) // eslint-disable-line
    }
    this.initialized = true
  },
  computed: {
    dynComponent () {
      const content = document.getElementById('slideContent').innerHTML
      const template = `&lt;div class="slides"&gt;${content}&lt;/div&gt;`
      return {
        &lt;&lt; value &gt;&gt;
      }
    }
  }
}
&lt;/script&gt;
@language css

&lt;style lang="sass"&gt;
@language css
@import './assets/global.sass'
@import './assets/vue-instant.css'
@import '~leaflet/dist/leaflet.css'

$mycolor: #2c3e50

HTML, BODY
  margin: 0
  padding: 0
  height: 100%
  width: 100%

H1
  margin: 4px

#app
  font-family: Avenir, Nunito, Helvetica, Arial, sans-serif
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale
  color: $mycolor
  margin: 0
  padding: 0
  height: 100%

.right-pane .text, .inline .text
  margin-top: 20px
  border: none
  background-color: transparent
  resize: none
  outline: none
  font-size: 16px
  // height: 100%
  white-space: pre-line
  width: 100%

.directive
  color: #990000

.md
  margin-left: 10px
  margin-top: 10px
  max-width: 700px
  padding-right: 10px

.unselectable
 -moz-user-select: -moz-none
 -khtml-user-select: none
 -webkit-user-select: none
 //  Introduced in IE 10.
 //  See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
 -ms-user-select: none
 user-select: none

A, .link
  color: #42b983
  cursor: pointer
  text-decoration: underline

.flip-container
  width: 80%
  max-width: 600px
  margin-left: 40px
  margin-bottom: 60px
  SVG
    height: inherit !important

&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.40">  itemTemplate: function (value, item) {
    var commandButton = '&lt;button type="button"  class="btn btn-secondary-3 pull-right"\&gt; ' + action + ' &lt;/button&gt;';
    return commandButton;
  }
};
if (action !== 'null') {
  fields.push(buttonField);
}
$("#jsGrid_" + labelId).jsGrid({
      autoload: true,
      width: "100%",
      height: height,
      filtering: filtering,
      sorting: true,
      paging: true,
      selecting: false,
      controller: db,
      pageSize: pageSize,
      pagerFormat: "{pages}",
      pagePrevText: "Prev",
      pageNextText: "Next",
      pageFirstText: "First",
      pageLastText: "Last",
      pageNavigatorNextText: "...",
      pageNavigatorPrevText: "...",
      noDataContent: noDataText,
      fields: fields,
</t>
<t tx="ekr.20180130165259.41">    rowClick: function(r) {
      setCurrentRow(r.item, r.index);
      if (r.event.target.tagName === 'BUTTON') {
        buttonClick(r.event, event)
        return console.log('Button clicked.')
      }
      // onclick="buttonClick(event, \'' + actionKey + '\')"&gt;' + action + '
      // $state.go('displaySubmission', {formId: formId, submissionId: r.item.id});
    }
});

// execute table filters on keydown
</t>
<t tx="ekr.20180130165259.42">$timeout(function () {
    $('#jsGrid_' + labelId + ' :input').keydown(function () {
        var self = this;
        if (self.timeoutPromise)
            $timeout.cancel(self.timeoutPromise);
        if (self.value.length == 0)
            $('#jsGrid_' + labelId).jsGrid('loadData');

        self.timeoutPromise =
$timeout(function () {
    $('#jsGrid_' + labelId).jsGrid('loadData');
}, 200);
    });
});

</t>
<t tx="ekr.20180130165259.43">var loadDataFromEvent = function () {
    if ($scope.builder) { return; }
    var data = $scope.submission ? $scope.submission.data : {};
    var viewgridData = $scope.component.viewgridData;
    var hasFormula = setDataValues(viewgridData.dataInputObject, data, false);
    if (hasFormula === undefined ) {
        //console.log('required fields not supplied');
        return;
    }
    return processResult({data:_.get(viewgridData, 'dataInputObject[0].value',[])});
}

</t>
<t tx="ekr.20180130165259.44">$scope.component.viewgridData.dataInputObject.forEach(function(key) {
  if (key.id) {
    $scope.$watch('submission.data.' + key.id, loadDataFromEvent, true);
  }
});

</t>
<t tx="ekr.20180130165259.45">var processResult =  function(result) {
  if (_.get(result, 'data.records')) {
    result.data = result.data.records
  }
  var formulaFields = [];
  @others
}

var options = { params: {} };
for (var i = 0; i &lt; keys.length; i++) {
  var inputField = keys[i];
  if (_.get(inputField,'exclude') !== true) {
    if (inputField.value) {
      options.params[inputField.mapping] = inputField.value;
    }
  }
};    
$scope.gotIt = false;
// dummy executes after jsGrid element is added to DOM
</t>
<t tx="ekr.20180130165259.46">_.each (viewgridData.dataDisplayObject, function (r) {
    if (r.formula) {
        // add to list of formula fields
        formulaFields.push(r);
    }
});
if (!result.data.reduce) {

    return;
}
</t>
<t tx="ekr.20180130165259.47">var fields = viewgridData.dataDisplayObject.reduce(function(acc, r){
  if (r.id) {
    acc.push({
      name: r.id,
      title: r.heading,
      type: 'text'
    });
  }
  return acc;
}, []);      
</t>
<t tx="ekr.20180130165259.48">var fieldIds = fields.reduce(function(acc, f){
  acc.push(f.name);
  return acc
}, [])

</t>
<t tx="ekr.20180130165259.49">db.records = result.data.reduce(function(acc, v){
    var row = {}
    if (v.data) {
       Object.assign(row, v.data); // in case of form data, rows under 'data' subkey
        if (v._id) {
            Object.assign(row, _.pick( v, ['_id', 'modified','created']));
        }
    } else {
      row = Object.assign(v, _.pick(fields));
    }
    Object.assign(row, _.pick(v, fieldIds));

    // debugger
    if (row._id) { row.id = row._id } // normalize
    if (formulaFields.length &gt; 0) {
        var parser = new formulaParser.Parser();
        @others
}, []);
// debugger

executeViewgrid(fields);
</t>
<t tx="ekr.20180130165259.5">&lt;&lt; imports &gt;&gt;
&lt;&lt; components &gt;&gt;

let template = '&lt;App/&gt;'
let el = '#app'
if (window.lconfig.appBase) {
  template = '&lt;AppBase /&gt;'
  el = '#app-base'
}

/* eslint-disable no-new */
require('./simpledrag.js')
new Vue({
  el,
  store,
  router,
  template: template,
  components: { App, AppBase }
})
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.50">_.each(row, function (value, key) {
    parser.setVariable(key, value);
});
</t>
<t tx="ekr.20180130165259.51">    _.each(formulaFields, function (r) {
        var result = parser.parse(r.formula.substring(1)).result;
        _.set( row, r.id, result);
    });
}

acc.push(row);
return acc;
</t>
<t tx="ekr.20180130165259.52">$scope.dummy = function () {
  if ($scope.gotIt) { return; }
  $scope.gotIt = true;
  if (!url) { return }
  $http.get(url, options)
    .then(processResult)
      .catch(function(e){ console.log(e.message) });
}

</t>
<t tx="ekr.20180130165259.53">// property panel (lower part)
app.directive('viewgridBuilder', function($parse, FormioUtils) {
  return {
    restrict: 'E',
    scope: {
      viewgridData: '='
    },
    template: '' +
        '&lt;div&gt;' +
        '  &lt;div class="row"&gt;' +
        '    &lt;div class="col-xs-6"&gt;' +
        '      &lt;h5&gt;Inputs&lt;/h5&gt;' +
        '      &lt;div class="hotInputs" /&gt;' +
        '    &lt;/div&gt;' +
        '    &lt;div class="col-xs-6"&gt;' +
        '      &lt;h5&gt;Outputs&lt;/h5&gt;' +
        '      &lt;div class="hotOutputs" /&gt;' +
        '    &lt;/div&gt;' +
        '  &lt;/div&gt;' +
        '  &lt;div class="row"&gt;' +
        '    &lt;div class="col-xs-12"&gt;' +
        '      &lt;h5&gt;Display&lt;/h5&gt;' +
        '      &lt;div class="hotDisplay" /&gt;' +
        '    &lt;/div&gt;' +
        '  &lt;/div&gt;' +
        '&lt;/div&gt;',
    @others
    });
};


</t>
<t tx="ekr.20180130165259.54">link: function(scope, element, attrs) { // jshint ignore:line
  var viewgridData = scope.viewgridData;
  var components = [];
  var fields = [];
  @others
},

</t>
<t tx="ekr.20180130165259.55">FormioUtils.eachComponent(scope.$parent.form.components, function(component) {
  // Only add input elements.
  if (['button', 'viewgrid'].indexOf(component.type) === -1 &amp;&amp; component.key.indexOf('panel') !== 0) {
    components.push(component);
    fields.push(component.key);
  }
}, true);
</t>
<t tx="ekr.20180130165259.56">scope.saveData = function() {
  if (viewgridData.dataInputObject == undefined) { return; } // jshint ignore:line
  viewgridData.dataOutputObject = getTableData(hotOutputs);
  viewgridData.dataInputObject = getTableData(hotInputs);
  viewgridData.dataDisplayObject = getTableData(hotDisplay);
  scope.viewgridData = viewgridData;
};
</t>
<t tx="ekr.20180130165259.57">function getTableData(hotTable) {
  var cellData = hotTable.getData();
  var headerData = hotTable.getColHeader();
  var dataTable = [];
  for (var k=0; k &lt; cellData.length; k++) {
    var dataRow = {};
    if (!hotTable.isEmptyRow(k)) {
      for (var i =0; i &lt; cellData[k].length; i++) {
        var key = headerData[i];
        var cellValue = cellData[k][i];
        if (cellValue === null ) {
          cellValue = '';
        }
        dataRow[key] = cellValue;
      }
      dataTable.push(dataRow);
    }
  }
  return dataTable;
}
</t>
<t tx="ekr.20180130165259.58">scope.loadData = function(viewgridData) {
  if (viewgridData.dataInputObject == undefined) { // jshint ignore:line
    return;
  }
  hotInputs.updateSettings({
    data: viewgridData.dataInputObject
  });
  hotOutputs.updateSettings({
    data: viewgridData.dataOutputObject
  });
  hotDisplay.updateSettings({
    data: viewgridData.dataDisplayObject
  });

};
var hotInputElement = element[0].querySelector('.hotInputs');
var hotInputSettings = {
  data: viewgridData.dataInputObject,
  columns: [
    {
      data: 'id',
      type: 'autocomplete',
      source: fields.sort(),
      strict: false
    },
    {
      data: 'required',
      type: 'checkbox'
    }
  ],
  colWidths: [175,160],
  rowHeights: 23,
  // performance tip: turn off calculations
  autoWrapRow: true,
  height: 117,
  rowHeaders: false,
  colHeaders: [
    'id',
    'required'
  ],
  manualColumnResize: true,
  minSpareRows: 4,
  stretchH: 'all'
};

var hotInputs = new Handsontable(hotInputElement, hotInputSettings);

var hotOutputElement = element[0].querySelector('.hotOutputs');
var hotOutputSettings = {
  data: viewgridData.dataOutputObject,
  columns: [
    {
      data: 'id',
      type: 'autocomplete',
      source: fields.sort(),
      strict: false
    },
    {
      data: 'mapping',
      type: 'text'
    }
  ],
  colWidths: [175, 175],
  rowHeights: 23,
  // performance tip: turn off calculations
  autoWrapRow: true,
  height: 117,
  rowHeaders: false,
  colHeaders: [
    'id',
    'mapping'
  ],
  manualColumnResize: true,
  minSpareRows: 4,
  stretchH: 'all'
};
var hotOutputs = new Handsontable(hotOutputElement, hotOutputSettings);
var hotDisplayElement = element[0].querySelector('.hotDisplay');
var hotDisplaySettings = {
  data: viewgridData.dataDisplayObject,
  columns: [
    {
      data: 'id',
      type: 'autocomplete',
      source: fields.sort(),
      strict: false
    },
    {
      data: 'formula',
      type: 'text'
    },
    {
      data: 'heading',
      type: 'text'
    }
  ],
  colWidths: [175, 175],
  rowHeights: 23,
  // performance tip: turn off calculations
  autoWrapRow: true,
  height: 117,
  rowHeaders: false,
  colHeaders: [
    'id',
    'formula',
    'heading'
  ],
  manualColumnResize: true,
  minSpareRows: 4,
  stretchH: 'all'
};

var hotDisplay = new Handsontable(hotDisplayElement, hotDisplaySettings);

</t>
<t tx="ekr.20180130165259.59">angular.element(function () {
  hotInputs.render();
  hotOutputs.render();
  hotDisplay.render();
});
</t>
<t tx="ekr.20180130165259.6">@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.60">controller: [
  '$scope',
  function($scope) {
    $scope.$watch('viewgridData', function(newData) {
      $scope.loadData(newData);
    }, true);
  }
]
</t>
<t tx="ekr.20180130165259.61">app.run([
  '$templateCache',

  function($templateCache) {

    // the template for Edit view
    $templateCache.put('formio/formbuilder/viewgrids.html', '&lt;span class="hidden-element-text"&gt;{{ component.label }}&lt;/span&gt;');

    // The property panel (top part)
    $templateCache.put('formio/components/common/viewgrid.html',
      '&lt;div class="row"&gt;' +
      ' &lt;div class="col-md-6"&gt;' +
      '   &lt;form-builder-option property="label" placeholder="Viewgrid Name"&gt;&lt;/form-builder-option&gt;' +
      ' &lt;/div&gt;' +
      ' &lt;div class="col-md-6"&gt;' +
      '   &lt;form-builder-option-key&gt;&lt;/form-builder-option-key&gt;' +
      ' &lt;/div&gt;' +
      '&lt;/div&gt;' +
      '&lt;div class="row"&gt;' +
      ' &lt;div class="col-md-6"&gt;' +
      '  &lt;form-builder-option type="checkbox" property="viewgridData.showTitle" label="Show Title" title="Whether to show a title over the view grid."&gt;&lt;/form-builder-option&gt;' +
      ' &lt;/div&gt;' +
      ' &lt;div class="col-md-6"&gt;' +
      '  &lt;form-builder-option property="viewgridData.showFilters" type="checkbox" label="Show Filters" title="Display grid with column filters."&gt;&lt;/form-builder-option&gt;' +
      ' &lt;/div&gt;' +
      '&lt;/div&gt;' +
      '&lt;div class="row"&gt;' +
              ' &lt;div class="col-md-6"&gt;' +
              '  &lt;form-builder-option property="viewgridData.height" label="Grid Height" title="Grid pixel height."&gt;&lt;/form-builder-option&gt;' +
              ' &lt;/div&gt;' +
              ' &lt;div class="col-md-6"&gt;' +
              '  &lt;form-builder-option property="viewgridData.pageSize" label="Page Size" title="Number of records to display per page."&gt;&lt;/form-builder-option&gt;' +
              ' &lt;/div&gt;' +
              '&lt;/div&gt;' +
      '&lt;div class="row"&gt;' +
      '  &lt;div class="col-md-6"&gt;' +
      '   &lt;form-builder-option property="viewgridData.action" label="Action" title="Add button with specified action."&gt;&lt;/form-builder-option&gt;' +
      '  &lt;/div&gt;' +
      '  &lt;div class="col-md-6"&gt;' +
      '   &lt;form-builder-option property="viewgridData.event" label="Event" title="Optional event to raise if clicked, otherwise uses Action."&gt;&lt;/form-builder-option&gt;' +
      '  &lt;/div&gt;' +
      '&lt;/div&gt;' +
      '&lt;div class="row"&gt;' +
      '  &lt;div class="col-md-6"&gt;' +
      '   &lt;form-builder-option property="viewgridData.noDataText" label="No Data Text" placeholder="Not found" title="Text for when there\'s no data to display"&gt;&lt;/form-builder-option&gt;' +
      '  &lt;/div&gt;' +
      ' &lt;div class="col-md-6"&gt;' +
      '  &lt;form-builder-option property="viewgridData.sourceUrl" label="Data Source URL" placeholder="Data Source URL" title="A URL that returns a JSON array to use as the data source."&gt;&lt;/form-builder-option&gt;' +
      ' &lt;/div&gt;' +
      '&lt;/div&gt;' +
      '&lt;div class="row" style="display:none"&gt;' +
      ' &lt;div class="col-md-6"&gt;' +
      '  &lt;label for="boundPanel" form-builder-tooltip="Panel containing the fields/edit components."&gt;Bound Panel&lt;/label&gt;' +
      '  &lt;select class="form-control" id="boundPanel" name="boundPanel" ng-change="setPanel(component.boundPanel)"  ng-options="field.key as field.key for field in panelFields" ng-model="component.boundPanel"&gt;&lt;/select&gt;' +
      '&lt;/div&gt;' +
      '&lt;/div&gt;' +
      '&lt;div class="row"&gt;' +
      '&lt;/div&gt;' +
      '  &lt;viewgrid-builder viewgrid-data="component.viewgridData" /&gt;' +
      '&lt;/div&gt;' +
      '&lt;div class="row"&gt;' +
      '  &lt;div class="col-md-12"&gt;' +
      '    &lt;form-builder-option-tags&gt;&lt;/form-builder-option-tags&gt;' +
      '  &lt;/div&gt;' +
      '&lt;/div&gt;'
    );
  }
]);

</t>
<t tx="ekr.20180130165259.63">@language html
&lt;template&gt;
&lt;div&gt;
    &lt;div class="main"&gt;
      &lt;form novalidate="novalidate" onsubmit="return false;" :class="getFormClass"&gt;
        &lt;div role="search" :class="getClassWrapper"&gt;
          &lt;input type="search" name="search"
                 :placeholder="getPlaceholder"
                 autocomplete="off" required="required"
                 :class="getClassInputPlaceholder" tabindex="-1"&gt;
          &lt;input :disabled="disabled" @click="emitClickInput"
                 @keyup='changeText' v-model='textVal'
                 type="search"
                 :name="name" placeholder="" autocomplete="off"
                 required="required" :class="getClassInput" :autofocus="autofocus"&gt;
          &lt;button @click="emitClickButton" type="submit"
                  :class="getClassSubmit" tabindex="-1"&gt;
            &lt;svg role="img" aria-label="Search"&gt;
              &lt;use xmlns:xlink="http://www.w3.org/1999/xlink"
                   :xlink:href="getSVGSearch"&gt;&lt;/use&gt;
            &lt;/svg&gt;
          &lt;/button&gt;
          &lt;button @click="reset" type="reset"
                  :class="getClassReset" tabindex="-1"&gt;
            &lt;svg role="img" aria-label="Reset"&gt;
              &lt;use xmlns:xlink="http://www.w3.org/1999/xlink"
                   :xlink:href="getSVGClear"&gt;&lt;/use&gt;
            &lt;/svg&gt;
          &lt;/button&gt;
           &lt;div v-if="modeIsFull" class='el-input-group__append'&gt;
             &lt;ul v-on-clickaway="away"
                 v-if="suggestionsIsVisible &amp;&amp; showSuggestions"
                 class="vue-instant__suggestions"&gt;
                 &lt;li @click="selectedAction(index)"
                     v-for="(item, index) in similiarData"
                     :class="getClassHighlighted(index)"&gt;
                   &lt;div&gt;
                   {{item[suggestionAttribute]}}
                   &lt;/div&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/form&gt;
      &lt;/div&gt;

    &lt;svg xmlns="http://www.w3.org/2000/svg" style="display:none"&gt;
      &lt;symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-search-8" viewBox="0 0 40 40"&gt;
        &lt;path d="M16 32c8.835 0 16-7.165 16-16 0-8.837-7.165-16-16-16C7.162 0 0 7.163 0 16c0 8.835 7.163 16 16 16zm0-5.76c5.654 0 10.24-4.586 10.24-10.24 0-5.656-4.586-10.24-10.24-10.24-5.656 0-10.24 4.584-10.24 10.24 0 5.654 4.584 10.24 10.24 10.24zM28.156 32.8c-1.282-1.282-1.278-3.363.002-4.643 1.282-1.284 3.365-1.28 4.642-.003l6.238 6.238c1.282 1.282 1.278 3.363-.002 4.643-1.283 1.283-3.366 1.28-4.643.002l-6.238-6.238z"
        fill-rule="evenodd" /&gt;
      &lt;/symbol&gt;
      &lt;symbol xmlns="http://www.w3.org/2000/svg" id="sbx-icon-clear-4" viewBox="0 0 20 20"&gt;
        &lt;path d="M11.664 9.877l4.485 4.485-1.542 1.54-4.485-4.485-4.485 4.485-1.54-1.54 4.485-4.485-4.485-4.485 1.54-1.54 4.485 4.484 4.485-4.485 1.54 1.542-4.484 4.485zM10 20c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10z" fill-rule="evenodd"
        /&gt;
      &lt;/symbol&gt;
    &lt;/svg&gt;
&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  import { mixin as clickaway } from 'vue-clickaway'
  export default {
    name: 'vueInstant',
    mixins: [ clickaway ],
    props: {
      'value': {
        type: String,
        required: true
      },
      'suggestions': {
        type: Array,
        required: true
      },
      'suggestionAttribute': {
        type: String,
        required: true
      },
      'placeholder': {
        type: String,
        default: 'write something...'
      },
      'minMatch': {
        type: Number,
        default: 1
      },
      'name': {
        type: String,
        default: 'vueInstant'
      },
      'autofocus': {
        type: Boolean,
        default: true
      },
      'disabled': {
        type: Boolean
      },
      'type': {
        type: String,
        default: 'facebook'
      },
      'showAutocomplete': {
        type: Boolean,
        default: true
      }
    },
    data () {
      return {
        selectedEvent: null,
        selectedSuggest: null,
        inputChanged: false,
        suggestionsIsVisible: true,
        highlightedIndex: 0,
        highlightedIndexMax: 7,
        similiarData: [],
        placeholderVal: this.placeholder,
        types: [{
          name: 'facebook',
          formClass: 'searchbox sbx-facebook',
          classWrapper: 'sbx-facebook__wrapper',
          classInput: 'sbx-facebook__input',
          classInputPlaceholder: 'sbx-facebook__input-placeholder',
          classSubmit: 'sbx-facebook__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-facebook__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__facebook'
        },
        {
          name: 'google',
          formClass: 'searchbox sbx-google',
          classWrapper: 'sbx-google__wrapper',
          classInput: 'sbx-google__input',
          classInputPlaceholder: 'sbx-google__input-placeholder',
          classSubmit: 'sbx-google__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-google__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__google'
        },
        {
          name: 'amazon',
          formClass: 'searchbox sbx-amazon',
          classWrapper: 'sbx-amazon__wrapper',
          classInput: 'sbx-amazon__input',
          classInputPlaceholder: 'sbx-amazon__input-placeholder',
          classSubmit: 'sbx-amazon__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-amazon__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__amazon'
        },
        {
          name: 'twitter',
          formClass: 'searchbox sbx-twitter',
          classWrapper: 'sbx-twitter__wrapper',
          classInput: 'sbx-twitter__input',
          classInputPlaceholder: 'sbx-twitter__input-placeholder',
          classSubmit: 'sbx-twitter__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-twitter__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__twitter'
        },
        {
          name: 'spotify',
          formClass: 'searchbox sbx-spotify',
          classWrapper: 'sbx-spotify__wrapper',
          classInput: 'sbx-spotify__input',
          classInputPlaceholder: 'sbx-spotify__input-placeholder',
          classSubmit: 'sbx-spotify__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-spotify__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__spotify'
        },
        {
          name: 'custom',
          formClass: 'searchbox sbx-custom',
          classWrapper: 'sbx-custom__wrapper',
          classInput: 'sbx-custom__input',
          classInputPlaceholder: 'sbx-custom__input-placeholder',
          classSubmit: 'sbx-custom__submit',
          svgSearch: '#sbx-icon-search-8',
          classReset: 'sbx-custom__reset',
          svgClear: '#sbx-icon-clear-4',
          highlighClass: 'highlighted__custom'
        }
        ]
      }
    },
    watch: {
      placeholder: function (val) {
        if (this.textValIsEmpty()) {
          this.placeholderVal = val
        }
      }
    },
    computed: {
      getPlaceholder () {
        return ''
/*
        if (this.inputChanged || this.textValIsEmpty()) {
          return this.placeholderVal
        }
*/
      },
      modeIsFull () {
        return this.showAutocomplete
      },
      showSuggestions () {
        return this.similiarData.length &gt;= this.minMatch
      },
      getPropertiesClass () {
        var type = this.getType()
        return type.properties
      },
      getFormClass () {
        var type = this.getType()
        return type.formClass
      },
      getClassWrapper () {
        var type = this.getType()
        return type.classWrapper
      },
      getClassInput () {
        var type = this.getType()
        return type.classInput
      },
      getClassInputPlaceholder () {
        var type = this.getType()
        return type.classInputPlaceholder
      },
      getClassSubmit () {
        var type = this.getType()
        return type.classSubmit
      },
      getSVGSearch () {
        var type = this.getType()
        return type.svgSearch
      },
      getClassReset () {
        var type = this.getType()
        return type.classReset
      },
      getSVGClear () {
        var type = this.getType()
        return type.svgClear
      },

      textVal: {
        get () {
          return this.value
        },
        set (v) {
          this.$emit('input', v)
        }
      }
    },
    methods: {
      decrementHighlightedIndex () {
        this.highlightedIndex -= 1
      },
      incrementHighlightedIndex () {
        this.highlightedIndex += 1
      },
      escapeAction () {
        this.clearHighlightedIndex()
        this.clearSimilarData()
        this.clearSelected()
        this.setBlur()
        this.emitEscape()
      },
      arrowRightAction () {
        this.setPlaceholderAndTextVal()
        this.emitKeyRight()
      },
      arrowDownAction () {
        if (this.arrowDownValidation()) {
          this.incrementHighlightedIndex()
          // this.setPlaceholderAndTextVal()
          this.emitKeyDown()
          const s = this.selectedSuggest
          this.$store.dispatch('setCurrentItem', {id: s.id})
          this.$store.commit('SELECTINGON')
          this.$store.commit('SETSEARCHFLAG')
        } else {
          this.clearHighlightedIndex()
        }
      },
      arrowUpAction () {
        if (this.highlightedIndex &gt; 0) {
          this.decrementHighlightedIndex()
          // this.setPlaceholderAndTextVal()
          this.emitKeyUp()
          const s = this.selectedSuggest
          this.$store.dispatch('setCurrentItem', {id: s.id})
          this.$store.commit('SELECTINGON')
          this.$store.commit('SETSEARCHFLAG')
        } else {
          this.clearHighlightedIndex()
        }
      },
      enterAction () {
        this.setFinalTextValue()
        this.clearHighlightedIndex()
        this.clearSimilarData()
        this.emitEnter()
      },
      selectedAction (index) {
        this.highlightedIndex = index
        this.setFinalTextValue()
        this.clearPlaceholder()
        this.clearSimilarData()
        this.emitSelected()
        const s = this.selectedSuggest
        this.$store.dispatch('setCurrentItem', {id: s.id})
        this.reset()
      },
      addRegister (o) {
        if (this.isSimilar(o) &amp;&amp; this.textValIsNotEmpty()) {
          this.addSuggestion(o)
        }
      },
      addSuggestion (o) {
        if (!this.findSuggestionTextIsRepited(o)) {
          this.addToSimilarData(o)
        }
      },
      addToSimilarData (o) {
        if (this.canAddToSimilarData()) {
          this.placeholderVal = this.letterProcess(o)
          this.selectedSuggest = o
          this.emitSelected()
          this.similiarData.unshift(o)
        }
      },
      setTextValue (e) {
        if (e.target.value.trim()) {
          this.textVal = e.target.value
          this.emitChange()
        }
      },
      setSelectedAsTextValue () {
        this.textVal = this.selected
      },
      setInitialTextValue () {
        this.textVal = this.value
      },
      setFinalTextValue () {
        if (this.finalTextValueValidation()) {
          this.setPlaceholderAndTextVal()
          this.emitChange()
        } else {
          this.clearAll()
        }
      },
      setPlaceholderAndTextVal () {
        if (typeof this.similiarData[this.highlightedIndex] !== 'undefined') {
          var suggest = this.similiarData[this.highlightedIndex]
          this.placeholderVal = suggest[this.suggestionAttribute]
          this.textVal = suggest[this.suggestionAttribute]
          this.selectedSuggest = suggest
          this.emitSelected()
        }
      },
      setInitialPlaceholder () {
        this.placeholderVal = this.placeholder
      },
      setBlur () {
        this.$el.blur()
      },
      getType () {
        return this.types.find(this.isSameType)
      },
      getClassHighlighted (index) {
        if (this.highlightedIndex === index) {
          var type = this.getType()
          return type.highlighClass
        }
      },
      letterProcess (o) {
        var remoteText = o[this.suggestionAttribute].split('')
        var inputText = this.textVal.split('')
        inputText.forEach(function (letter, key) {
          if (letter !== remoteText[key]) {
            remoteText[key] = letter
          }
        })
        return remoteText.join('')
      },
      findSuggests () {
        if (this.suggestionsPropIsDefined()) {
          this.suggestions.forEach(this.addRegister)
        }
      },
      arrowDownValidation () {
        return this.highlightedIndex &lt; this.highlightedIndexMax &amp;&amp;
               this.highlightedIndex &lt; (this.similiarData.length - 1)
      },
      lowerFirst (string) {
        return string.charAt(0).toLowerCase() + string.slice(1)
      },
      controlEvents () {
        var uncaptz = this.lowerFirst(this.selectedEvent + 'Action')
        var fnName = (this[uncaptz])
        if (this.fnExists(fnName)) {
          fnName()
        }
      },
      findRepited (similarItem, o) {
        return (similarItem[this.suggestionAttribute] ===
        o[this.suggestionAttribute])
      },
      findSuggestionTextIsRepited (o) {
        return this.similiarData.find(this.findRepited.bind(this, o))
      },
      finalTextValueValidation () {
        return typeof this.similiarData[this.highlightedIndex] !== 'undefined' ||
            this.placeholderVal === '' &amp;&amp; this.highlightedIndex !== 0
      },
      isSimilar (o) {
        if (o) { return true }
      },
      isSameType (o) {
        return o.name === this.type
      },
      fnExists (fnName) {
        return typeof fnName === 'function'
      },
      canAddToSimilarData () {
        return this.similiarData.length &lt; this.highlightedIndexMax
      },
      suggestionsPropIsDefined () {
        return typeof this.suggestions !== 'undefined'
      },
      notArrowKeysEvent () {
        return this.selectedEvent !== 'ArrowUp' &amp;&amp;
                this.selectedEvent !== 'ArrowDown' &amp;&amp; this.selectedEvent !== 'ArrowRight'
      },
      notEnterKeyEvent () {
        return this.selectedEvent !== 'Enter'
      },
      textValIsEmpty () {
        return this.textVal === ''
      },
      textValIsNotEmpty () {
        return this.textVal !== ''
      },
      reset () {
        this.clearValue()
        this.clearSelected()
        this.clearPlaceholder()
        this.clearSimilarData()
        this.clearSelectedSuggest()
        this.emitClear()
        this.emitSelected()
      },
      clearAll () {
        this.clearSelected()
        this.clearPlaceholder()
        this.clearSimilarData()
        this.clearSelectedSuggest()
      },
      clearValue () {
        this.textVal = ''
      },
      clearSelected () {
        this.selected = null
      },
      clearSelectedSuggest () {
        this.selectedSuggest = null
      },
      clearSimilarData () {
        this.similiarData = []
      },
      clearPlaceholder () {
        if (this.textValIsEmpty()) {
          this.clearSimilarData()
          this.setInitialPlaceholder()
        } else {
          this.placeholderVal = ''
        }
      },
      clearHighlightedIndex () {
        this.highlightedIndex = 0
      },
      changeText (e) {
        this.selectedEvent = e.code
        this.setTextValue(e)
        this.processChangeText()
        this.controlEvents(e)
      },
      processChangeText (e) {
        if (this.notEnterKeyEvent()) {
          this.inputChanged = true
          this.suggestionsIsVisible = true
          this.clearAllAndFindSuggest()
        }
      },
      clearAllAndFindSuggest () {
        if (this.notArrowKeysEvent()) {
          this.clearAll()
          this.findSuggests()
        }
      },
      away () {
        this.suggestionsIsVisible = false
        this.emitSelected()
      },
      emitChange () {
        // this.$emit('input', this.textVal)
      },
      emitClickInput (event) {
        this.$emit('click-input', event)
      },
      emitClickButton (event) {
        this.$emit('click-button', this.textVal)
      },
      emitEnter () {
        const s = this.selectedSuggest
        this.$store.dispatch('setCurrentItem', {id: s.id})
        this.$emit('enter')
        this.reset()
        this.setBlur()
        this.$store.commit('SELECTINGOFF')
      },
      emitKeyUp () {
        this.$emit('key-up')
      },
      emitKeyDown () {
        this.$emit('key-down', this.selectedSuggest)
      },
      emitKeyRight () {
        this.$emit('key-right')
      },
      emitClear () {
        this.$emit('clear')
      },
      emitEscape () {
        this.$emit('escape')
      },
      emitSelected () {
        const s = this.selectedSuggest
        if (!s) { return }
        this.$emit('selected', s)
      }
    }
}

&lt;/script&gt;

&lt;style&gt;
  .sbx-facebook {
  display: inline-block;
  position: relative;
  width: 450px;
  height: 27px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 13px;
}

.sbx-facebook__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-facebook__input {
  position: absolute !important;
  left:0 !important;
  top: 0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 0px #CCCCCC;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 62px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-facebook__input-placeholder {
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 0px #CCCCCC;
  background: #FFFFFF;
  padding: 0;
  padding-right: 62px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}




.sbx-facebook__input::-webkit-search-decoration, .sbx-facebook__input::-webkit-search-cancel-button, .sbx-facebook__input::-webkit-search-results-button, .sbx-facebook__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-facebook__input:hover {
  box-shadow: inset 0 0 0 0px #b3b3b3;
}

.sbx-facebook__input:focus, .sbx-facebook__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 0px #3E82F7;
  background: rgba(255, 255, 255, 0)
}

.sbx-facebook__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-facebook__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-facebook__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-facebook__input::placeholder {
  color: #AAAAAA;
}

.sbx-facebook__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 3px 3px 0;
  background-color: #f6f7f8;
  padding: 0;
  width: 35px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-facebook__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-facebook__submit:hover, .sbx-facebook__submit:active {
  cursor: pointer;
}

.sbx-facebook__submit:focus {
  outline: 0;
}

.sbx-facebook__submit svg {
  width: 15px;
  height: 15px;
  vertical-align: middle;
  fill: #3C5BA2;
}

.sbx-facebook__reset {
  display: none;
  position: absolute;
  top: 3px;
  right: 41px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-facebook__reset:focus {
  outline: 0;
}

.sbx-facebook__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-facebook__input:valid ~ .sbx-facebook__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}



/* amazon*/

.sbx-amazon {
  display: inline-block;
  position: relative;
  width: 600px;
  height: 39px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 14px;
}

.sbx-amazon__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-amazon__input {
  display: inline-block;
  position: absolute !important;
  left:0 !important;
  top:0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #FFFFFF;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 75px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-amazon__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #FFFFFF;
  background: #FFFFFF;
  padding: 0;
  padding-right: 75px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-amazon__input::-webkit-search-decoration, .sbx-amazon__input::-webkit-search-cancel-button, .sbx-amazon__input::-webkit-search-results-button, .sbx-amazon__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-amazon__input:hover {
  box-shadow: inset 0 0 0 1px #e6e6e6;
}

.sbx-amazon__input:focus, .sbx-amazon__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 1px #FFBF58;
  background: rgba(255, 255, 255, 0)
}

.sbx-amazon__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-amazon__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-amazon__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-amazon__input::placeholder {
  color: #AAAAAA;
}

.sbx-amazon__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 3px 3px 0;
  background-color: #ffbf58;
  padding: 0;
  width: 47px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-amazon__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-amazon__submit:hover, .sbx-amazon__submit:active {
  cursor: pointer;
}

.sbx-amazon__submit:focus {
  outline: 0;
}

.sbx-amazon__submit svg {
  width: 21px;
  height: 21px;
  vertical-align: middle;
  fill: #202F40;
}

.sbx-amazon__reset {
  display: none;
  position: absolute;
  top: 9px;
  right: 54px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-amazon__reset:focus {
  outline: 0;
}

.sbx-amazon__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-amazon__input:valid ~ .sbx-amazon__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

/*  google */
.sbx-google {
  display: inline-block;
  position: relative;
  width: 500px;
  height: 41px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 14px;
}

.sbx-google__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-google__input {
  display: inline-block;
  position: absolute !important;
  left: 0 !important;
  top:0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #CCCCCC;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 77px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-google__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 4px;
  box-shadow: inset 0 0 0 1px #CCCCCC;
  background: #FFFFFF;
  padding: 0;
  padding-right: 77px;
  padding-left: 11px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-google__input::-webkit-search-decoration, .sbx-google__input::-webkit-search-cancel-button, .sbx-google__input::-webkit-search-results-button, .sbx-google__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-google__input:hover {
  box-shadow: inset 0 0 0 1px #b3b3b3;
}

.sbx-google__input:focus, .sbx-google__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 1px #3E82F7;
  background: rgba(255, 255, 255, 0)
}

.sbx-google__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-google__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-google__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-google__input::placeholder {
  color: #AAAAAA;
}

.sbx-google__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 3px 3px 0;
  background-color: #3e82f7;
  padding: 0;
  width: 49px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-google__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-google__submit:hover, .sbx-google__submit:active {
  cursor: pointer;
}

.sbx-google__submit:focus {
  outline: 0;
}

.sbx-google__submit svg {
  width: 21px;
  height: 21px;
  vertical-align: middle;
  fill: #FFFFFF;
}

.sbx-google__reset {
  display: none;
  position: absolute;
  top: 10px;
  right: 56px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-google__reset:focus {
  outline: 0;
}

.sbx-google__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-google__input:valid ~ .sbx-google__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}


/* twitter */

.sbx-twitter {
  display: inline-block;
  position: relative;
  width: 200px;
  height: 33px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 12px;
}

.sbx-twitter__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-twitter__input {
  display: inline-block;
  position: absolute;
  left: 0 !important;
  top: 0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 17px;
  box-shadow: inset 0 0 0 1px #E1E8ED;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 52px;
  padding-left: 16px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-twitter__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 17px;
  box-shadow: inset 0 0 0 1px #E1E8ED;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 52px;
  padding-left: 16px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-twitter__input::-webkit-search-decoration, .sbx-twitter__input::-webkit-search-cancel-button, .sbx-twitter__input::-webkit-search-results-button, .sbx-twitter__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-twitter__input:hover {
  box-shadow: inset 0 0 0 1px #c1d0da;
}

.sbx-twitter__input:focus, .sbx-twitter__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 1px #D6DEE3;
  background: rgba(255, 255, 255, 0)
}

.sbx-twitter__input::-webkit-input-placeholder {
  color: #9AAEB5;
}

.sbx-twitter__input::-moz-placeholder {
  color: #9AAEB5;
}

.sbx-twitter__input:-ms-input-placeholder {
  color: #9AAEB5;
}

.sbx-twitter__input::placeholder {
  color: #9AAEB5;
}

.sbx-twitter__submit {
  position: absolute;
  top: 0;
  right: 0;
  left: inherit;
  margin: 0;
  border: 0;
  border-radius: 0 16px 16px 0;
  background-color: rgba(62, 130, 247, 0);
  padding: 0;
  width: 33px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-twitter__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-twitter__submit:hover, .sbx-twitter__submit:active {
  cursor: pointer;
}

.sbx-twitter__submit:focus {
  outline: 0;
}

.sbx-twitter__submit svg {
  width: 13px;
  height: 13px;
  vertical-align: middle;
  fill: #657580;
}

.sbx-twitter__reset {
  display: none;
  position: absolute;
  top: 7px;
  right: 33px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-twitter__reset:focus {
  outline: 0;
}

.sbx-twitter__reset svg {
  display: block;
  margin: 4px;
  width: 11px;
  height: 11px;
}

.found-text {
  background: #fff;
  color: #000;
}

.sbx-twitter__input:valid ~ .sbx-twitter__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}


/* spotify */

.sbx-spotify {
  display: inline-block;
  position: relative;
  width: 200px;
  height: 25px;
  white-space: nowrap;
  box-sizing: border-box;
  font-size: 12px;
}

.sbx-spotify__wrapper {
  width: 100%;
  height: 100%;
}

.sbx-spotify__input {
  display: inline-block;
  position: absolute;
  left: 0 !important;
  top: 0 !important;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 13px;
  box-shadow: inset 0 0 0 0px #FFFFFF;
  background: rgba(255, 255, 255, 0);
  padding: 0;
  padding-right: 20px;
  padding-left: 25px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}

.sbx-spotify__input-placeholder {
  display: inline-block;
  -webkit-transition: box-shadow .4s ease, background .4s ease;
  transition: box-shadow .4s ease, background .4s ease;
  border: 0;
  border-radius: 13px;
  box-shadow: inset 0 0 0 0px #FFFFFF;
  background: #FFFFFF;
  padding: 0;
  padding-right: 20px;
  padding-left: 25px;
  width: 100%;
  height: 100%;
  vertical-align: middle;
  white-space: normal;
  font-size: inherit;
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
}


.sbx-spotify__input::-webkit-search-decoration, .sbx-spotify__input::-webkit-search-cancel-button, .sbx-spotify__input::-webkit-search-results-button, .sbx-spotify__input::-webkit-search-results-decoration {
  display: none;
}

.sbx-spotify__input:hover {
  box-shadow: inset 0 0 0 0px #e6e6e6;
}

.sbx-spotify__input:focus, .sbx-spotify__input:active {
  outline: 0;
  box-shadow: inset 0 0 0 0px #FFFFFF;
  background: rgba(255, 255, 255, 0)
}

.sbx-spotify__input::-webkit-input-placeholder {
  color: #AAAAAA;
}

.sbx-spotify__input::-moz-placeholder {
  color: #AAAAAA;
}

.sbx-spotify__input:-ms-input-placeholder {
  color: #AAAAAA;
}

.sbx-spotify__input::placeholder {
  color: #AAAAAA;
}

.sbx-spotify__submit {
  position: absolute;
  top: 0;
  right: inherit;
  left: 0;
  margin: 0;
  border: 0;
  border-radius: 12px 0 0 12px;
  background-color: rgba(255, 255, 255, 0);
  padding: 0;
  width: 25px;
  height: 100%;
  vertical-align: middle;
  text-align: center;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.sbx-spotify__submit::before {
  display: inline-block;
  margin-right: -4px;
  height: 100%;
  vertical-align: middle;
  content: '';
}

.sbx-spotify__submit:hover, .sbx-spotify__submit:active {
  cursor: pointer;
}

.sbx-spotify__submit:focus {
  outline: 0;
}

.sbx-spotify__submit svg {
  width: 17px;
  height: 17px;
  vertical-align: middle;
  fill: #222222;
}

.sbx-spotify__reset {
  display: none;
  position: absolute;
  top: 2px;
  right: 2px;
  margin: 0;
  border: 0;
  background: none;
  cursor: pointer;
  padding: 0;
  font-size: inherit;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  fill: rgba(0, 0, 0, 0.5);
}

.sbx-spotify__reset:focus {
  outline: 0;
}

.sbx-spotify__reset svg {
  display: block;
  margin: 4px;
  width: 13px;
  height: 13px;
}

.sbx-spotify__input:valid ~ .sbx-spotify__reset {
  display: block;
  -webkit-animation-name: sbx-reset-in;
          animation-name: sbx-reset-in;
  -webkit-animation-duration: .15s;
          animation-duration: .15s;
}

@-webkit-keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

@keyframes sbx-reset-in {
  0% {
    -webkit-transform: translate3d(-20%, 0, 0);
            transform: translate3d(-20%, 0, 0);
    opacity: 0;
  }
  100% {
    -webkit-transform: none;
            transform: none;
    opacity: 1;
  }
}

.vue-instant__suggestions {
     position: absolute;
     left: -20px;
     top: 99%;
     margin: 0;
     background-color: #fff;
     border: 1px solid #D3DCE6;
     width: 120%;
     padding: 6px 0;
     z-index: 10;
     border-radius: 2px;
     max-height: 1280px;
     box-sizing: border-box;
     overflow: auto;
     box-shadow: 0 0 6px 0 rgba(0,0,0,.04), 0 2px 4px 0 rgba(0,0,0,.12);
     margin-top:3px;
 }

 .vue-instant__suggestions li {
     list-style: none;
     line-height: 36px;
     padding: 0 10px;
     margin: 0;
     cursor: pointer;
     color: #475669;
     font-size: 14px;
     white-space: nowrap;
     overflow: hidden;
     text-overflow: ellipsis;
 }

 .vue-instant__suggestions li.highlighted__spotify {
     background-color: black;
     color: #fff;
 }

 .vue-instant__suggestions li.highlighted__twitter {
     background-color: #20a0ff;
     color: #fff;
 }

 .vue-instant__suggestions li.highlighted__google {
     background-color: #EEEEEE;
     color: black;
 }

 .vue-instant__suggestions li.highlighted__facebook {
     background-color: #3e5da0;
     color: #fff;
 }

 .vue-instant__suggestions li.highlighted__amazon {
     background-color: #232F3E;
     color: #fff;
 }


 .el-input-group__append {
   border: 0px !important;
 }

.sbx-custom__input {
  position: absolute;
  left: 0 !important;
  background: rgba(255, 255, 255, 0) !important;
}
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.64"></t>
<t tx="ekr.20180130165259.65">@language html
&lt;template&gt;
  &lt;div&gt;
    &lt;div class="img" style="float:left"&gt;&lt;img :height="heightpx" :src="src" /&gt;&lt;/div&gt;
    &lt;div class="txt"&gt;&lt;slot name="txt" /&gt;&lt;/div&gt;
    &lt;div class="footer" style="clear:both; text-align:center; padding-top:30px"&gt;&lt;slot name="foot"/&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    name: 'imgLeft',
    props: {
      src: String,
      height: String
    },
    computed: {
      heightpx: function () {
        if (!this.height) { this.height = '300' }
        return this.height + 'px'
      }
    }
  }
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;!-- No styles here because won't work when embedded in presentation --&gt;
&lt;style lang="sass" scoped&gt;

&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.66"></t>
<t tx="ekr.20180130165259.67">import VueChartJs from 'vue-chartjs'
import _ from 'lodash'

const defaultColors = ['#8e5ea2', '#3cba9f', '#3e95cd', '#e8c3b9', '#c45850']

/**
 * Remove columns from array and return in collection
 * @param table
 */
@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.68">function extractOptionColumns (table) {
  const options = {}
  const colNames = table[0].map(_.trim)
  colNames.forEach((colName, c) =&gt; {
    if (colName.indexOf('$') === 0) {
      extractColumn(table, options, colName, c)
    }
  })
  return options
}
</t>
<t tx="ekr.20180130165259.69">function extractColumn (table, options, colName, c) {
  const column = []
  const firstRow = table[0]
  if (_.isUndefined(colName)) { c = 0 }
  if (_.isUndefined(c)) {
    c = -1
    for (let i = 0; i &lt; firstRow.length; i++) {
      if (firstRow[i] === colName) { c = i }
    }
    if (c === -1) {
      return {}
    }
  }
  firstRow.splice(c, 1)
  for (let r = 1; r &lt; table.length; r++) {
    column.push(_.trim(table[r].splice(c, 1)))
  }
  options[colName] = column
}

</t>
<t tx="ekr.20180130165259.7">(function () {
  /**
   * THIS OBJECT WILL ONLY WORK IF your target is positioned relative or absolute,
   * or anything that works with the top and left css properties (not static).
   *
   * Howto
   * ============
   *
   * document.getElementById('my_target').sdrag();
   *
   * onDrag, onStop
   * -------------------
   * document.getElementById('my_target').sdrag(onDrag, null);
   * document.getElementById('my_target').sdrag(null, onStop);
   * document.getElementById('my_target').sdrag(onDrag, onStop);
   *
   * Both onDrag and onStop callback take the following arguments:
   *
   * - el, the currentTarget element (#my_target in the above examples)
   * - pageX: the mouse event's pageX property (horizontal position of the mouse compared to the viewport)
   * - startX: the distance from the element's left property to the horizontal mouse position in the viewport.
   *                  Usually, you don't need to use that property; it is internally used to fix the undesirable
   *                  offset that naturally occurs when you don't drag the element by its top left corner
   *                  (for instance if you drag the element from its center).
   * - pageY: the mouse event's pageX property (horizontal position of the mouse compared to the viewport)
   * - startY: same as startX, but for the vertical axis (and element's top property)
   *
   *
   *
   * The onDrag callback accepts an extra argument: fix.
   *
   * fix is an array used to fix the coordinates applied to the target.
   *
   * It can be used to constrain the movement of the target inside of a virtual rectangle area for instance.
   * Put a variable in the fix array to override it.
   * The possible keys are:
   *
   * - pageX
   * - startX
   * - pageY
   * - startY
   * - skipX
   * - skipY
   *
   * skipX and skipY let you skip the updating of the target's left property.
   * This might be required in some cases where the positioning of the target
   * is automatically done by the means of other css properties.
   *
   *
   *
   *
   *
   *
   * Direction
   * -------------
   * With direction, you can constrain the drag to one direction only: horizontal or vertical.
   * Accepted values are:
   *
   * - &lt;undefined&gt; (the default)
   * - vertical
   * - horizontal
   *
   *
   *
   *
   */
  /* eslint-disable */

  // simple drag
  function sdrag (onDrag, onStop, direction) {
    var startX = 0
    var startY = 0
    var el = this
    var dragging = false

    @others
  }

  Element.prototype.sdrag = sdrag
})()
</t>
<t tx="ekr.20180130165259.70">function dataTableToDataSet (dataTable) {
  const csvArray = _.cloneDeep(dataTable.arr)
  const title = dataTable.title
  const options = extractOptionColumns(csvArray)
  let colors = options.$colors || defaultColors
  const datasets = []
  let labels = csvArray.splice(0, 1)[0]
  labels.splice(0, 1)
  labels = labels.map(_.trim)
  csvArray.forEach((d, i) =&gt; {
    d = d.map(_.trim)
    let set = {}
    set.label = d.splice(0, 1)[0]
    set.borderColor = colors[i]
    set.backgroundColor = set.borderColor
    set.pointBackgroundColor = set.borderColor
    set.pointBorderColor = set.borderColor
    set.data = d.map(item =&gt; +item)
    set.fill = false
    datasets.push(set)
  })
  return { datasets, labels, title, colors }
}

</t>
<t tx="ekr.20180130165259.71">function charts (Vue) {
  &lt;&lt; getChartOptions &gt;&gt;
  Vue.component('line-chart', getChartOptions('Line'))
  Vue.component('bar-chart', getChartOptions('Bar'))
  Vue.component('pie-chart', getChartOptions('Pie'))
  Vue.component('doughnut-chart', getChartOptions('Doughnut'))
  Vue.component('polar-chart', getChartOptions('PolarArea'))
}

export {charts}
</t>
<t tx="ekr.20180130165259.72">@language html
&lt;template&gt;
    &lt;div class="mermaid"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript

  /* global mermaid */
  export default {
    name: 'mermaid',
    components: {
    },
    props: {
      height: {
        type: String,
        default: '300'
      },
      width: {
        type: String,
        default: '400'
      }
    },
    methods: {
    },
    data () {
      return {
      }
    },
    beforeCreate () {
    },
    mounted () {
      const mermaidEl = this.$el
      mermaidEl.style.height = this.height + 'px'
      mermaidEl.style.width = this.width + 'px'
      const config = {
        startOnLoad: true,
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true
          // width: '200%'
        },
        theme: 'forest'
      }
      mermaid.initialize(config)
      mermaid.init(undefined, mermaidEl) // eslint-disable-line
    },
    computed: {
      id: function () {
      }
    }
  }
&lt;/script&gt;

@language html

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
@language css
.mermaid
  // margin-left: auto
  // margin-right: auto
@language html
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.73">@language html
&lt;template&gt;
    &lt;div class="xmermaid"&gt;
       &lt;slot&gt;&lt;/slot&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript
  /* global d3, mermaid */
  export default {
    name: 'mermaidp',
    components: {
    },
    props: {
      height: {
        type: String,
        default: '300'
      },
      width: {
        type: String
      }
    },
    methods: {
    },
    data () {
      return {
      }
    },
    beforeCreate () {
    },
    mounted () {
      const config = {
        startOnLoad: true,
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true
        },
        theme: 'forest'
      }
      mermaid.initialize(config)
      const mermaidEl = this.$el // document.getElementsByClassName('mermaid')[0]
      if (this.width) {
        mermaidEl.style.width = this.width + 'px'
      }
      mermaidEl.style.height = this.height + 'px'
      const mermaidGraphDefinition = mermaidEl.innerHTML.replace(/&amp;gt;/g, '&gt;')
      function draw () {
        let cb = function (svgGraph) {
          svgGraph = svgGraph.replace(/svg {/, 'avg') // hack to get rid of svg style in &lt;style&gt; tag
          mermaidEl.innerHTML = svgGraph
          const svgEl = mermaidEl.firstElementChild
          d3.select(svgEl)
            .insert('rect', ':first-child')
            .attr('width', '100%')
            .attr('height', '100%')
            .attr('fill', 'white')
          d3.select(svgEl)
            .style('max-width', null)
            .style('font-size', '14px')
            .style('color', '#000')
            .attr('height', this.height + 'px')
        }
        mermaid.render('mm1', mermaidGraphDefinition, cb)
      }
      draw()
    },
    computed: {
      id: function () {
      }
    }
  }
&lt;/script&gt;
@language css
&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass" scoped&gt;
.xmermaid
  margin-left: auto
  margin-right: auto
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.74">@language html
&lt;template&gt;
  &lt;div&gt;
    &lt;component :is="currentTable"/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript
  import numeral from 'numeral'
  export default {
    name: 'vc-table',
    components: {
    },
    props: {
      dataTable: String
    },
    data () {
      return {
        data: [],
        cols: [],
        currentTable: null
      }
    },
    beforeCreate () {
    },
    mounted () {
      const tableObj = this.$store.state.dataTables[this.dataTable]
      if (tableObj) {
        this.data = tableObj.objArr
        this.cols = tableObj.arr[0]
      } else {
      }

      /*
      this.cols = ['firstName', 'lastName', 'instrument', 'birthday', 'songs']
      this.data = [
        { firstName: 'Joxxhn', lastName: 'Lennon', instrument: 'Guitar', birthday: '04/10/1940', songs: 72 },
        { firstName: 'Paul', lastName: 'McCartney', instrument: 'Bass', birthday: '18/06/1942', songs: 70 },
        { firstName: 'George', lastName: 'Harrison', instrument: 'Guitar', birthday: '25/02/1943', songs: 22 },
        { firstName: 'Ringo', lastName: 'Starr', instrument: 'Drums', birthday: '07/07/1940', songs: 2 }
      ]
      */
      this.currentTable = this.dynComponent
    },
    computed: {
      id: function () {
      },
      dynComponent () {
        const d = this.data
        let cols = ''
        this.cols.forEach(c =&gt; {
          if (c.indexOf('$') === -1) {
            let cellClass = ''
            if (c.match(/^\d+$/)) {
              cellClass = 'cell-class="number" :formatter="formatNumber"'
            } else {
              console.log('X', c)
            }
            cols = cols + `&lt;table-column ${cellClass} show="${c}" label="${c}"&gt;&lt;/table-column&gt;`
          }
        })
        const template = `
            &lt;table-component
              :data="data"
              sort-by="songs"
              sort-order="asc"&gt;
              ${cols}
            &lt;/table-component&gt;
        `
        return {
          template, // use content as template for this component
          methods: {
            formatNumber (n) {
              return numeral(n).format('0,0')
            }
          },
          data () {
            return {
              data: d
            }
          }
        }
      }
    }
  }
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass"&gt;
@language css
TD.number
  text-align: right
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.75">@language html
&lt;template&gt;
  &lt;div :style="style"&gt;
    &lt;svg xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         :viewBox="viewBox"
         version="1.1"
         style="height: 100%"
      &gt;
      &lt;rect width="100%" height="100%" fill="white" /&gt;
      &lt;slot&gt;&lt;/slot&gt;
    &lt;/svg&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
@language javascript
  export default {
    name: 'v-svg',
    components: {
    },
    props: {
      viewBox: {
        type: String,
        default: '0, 0, 900, 900'
      },
      height: {
        type: String,
        default: '400'
      },
      width: {
        type: String,
        default: '800'
      }
    },
    data () {
      return {
      }
    },
    mounted () {
    },
    computed: {
      id: function () {
      },
      style: function () {
        const height = this.height
        const width = this.width
        return `height:${height}px; max-width:${width}px; background: #fff; margin-left:auto; margin-right: auto;`
      }
    }
@language html
&lt;/script&gt;

&lt;!-- Add "scoped" attribute to limit CSS to this component only --&gt;
&lt;style lang="sass"&gt;

&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.76"></t>
<t tx="ekr.20180130165259.77">export default {
  size (tree, {width, height}, {x, y}, {last}) {
    const ray = Math.min(width - x, height - y) / 2 - last
    tree.size([360, ray])
        .separation((a, b) =&gt; { return (a.parent === b.parent ? 1 : 2) / (a.depth !== 0 ? a.depth : 1) })
  },

  transformNode (x, y) {
    const angle = (x - 90) / 180 * Math.PI
    const radius = y
    return [radius * Math.cos(angle), radius * Math.sin(angle)]
  },

  transformSvg (svg, margin, {width, height}) {
    return svg.attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')')
  },

  updateTransform (transform, margin, {width, height}) {
    return transform.translate(width / 2, height / 2)
  },

  transformText (d, children) {
    return {
      x: d.x &lt; 180 === !children ? 6 : -6,
      rotate: d.x &lt; 180 ? d.x - 90 : d.x + 90,
      anchor: d.x &lt; 180 === !children ? 'start' : 'end'
    }
  }
}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.78">@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.79">function compareString (a, b) {
  return (a &lt; b) ? -1 : (a &gt; b) ? 1 : 0
}

</t>
<t tx="ekr.20180130165259.8">function move (e) {
  var fix = {}
  onDrag &amp;&amp; onDrag(el, e.pageX, startX, e.pageY, startY, fix)
  if ('vertical' !== direction) {
    var pageX = ('pageX' in fix) ? fix.pageX : e.pageX
    if ('startX' in fix) {
      startX = fix.startX
    }
    if (false === ('skipX' in fix)) {
      el.style.left = (pageX - startX) + 'px'
    }
  }
  if ('horizontal' !== direction) {
    var pageY = ('pageY' in fix) ? fix.pageY : e.pageY
    if ('startY' in fix) {
      startY = fix.startY
    }
    if (false === ('skipY' in fix)) {
      el.style.top = (pageY - startY) + 'px'
    }
  }
}

</t>
<t tx="ekr.20180130165259.80">function anchorTodx (d, el) {
  if (d === 'middle') {
    return -el.getBBox().width / 2
  } else if (d === 'end') {
    return -(el.getBBox().width + 4)
  }
  return 0
}

</t>
<t tx="ekr.20180130165259.81">function findInParents (node, nodes) {
  if (nodes.indexOf(node) !== -1) {
    return node
  }

  const parent = node.parent
  return (parent === null) ? node : findInParents(parent, nodes)
}

</t>
<t tx="ekr.20180130165259.82">function toPromise (transition) {
  let count = 0
  let interrupted = false
  transition.each(() =&gt; count++)
  return new Promise(function (resolve, reject) {
    if (count === 0) {
      resolve('ended')
      return
    }
    const check = () =&gt; {
      if (--count === 0) {
        resolve(interrupted ? 'interrupted' : 'ended')
      }
    }
    transition.on('end', check)
    transition.on('interrupt', () =&gt; {
      interrupted = true
      check()
    })
  })
}

export {
    compareString,
    anchorTodx,
    toPromise,
    findInParents
}

</t>
<t tx="ekr.20180130165259.83">@language html
&lt;template&gt;
  &lt;div class="viewport treeclass" v-resize="resize"&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
@language javascript
import resize from 'vue-resize-directive'
import euclidean from './euclidean-layout'
import circular from './circular-layout'
import {compareString, anchorTodx, toPromise, findInParents} from './d3-utils'

import * as d3 from 'd3'
// import * as d3Hierarchy from 'd3-hierarchy'
// Object.assign(d3, d3Hierarchy)

function mapMany (arr, mapper) {
  return arr.reduce(function (prev, curr) {
    return prev.concat(mapper(curr))
  }, [])
}

const layout = {
  euclidean,
  circular
}

var i = 0
var currentSelected = null
const types = ['tree', 'cluster']
const layouts = ['circular', 'euclidean']

const props = {
  data: Object,
  duration: {
    type: Number,
    default: 750
  },
  type: {
    type: String,
    default: 'tree',
    validator (value) {
      return types.indexOf(value) !== -1
    }
  },
  layoutType: {
    type: String,
    default: 'euclidean',
    validator (value) {
      return layouts.indexOf(value) !== -1
    }
  },
  marginX: {
    type: Number,
    default: 20
  },
  marginY: {
    type: Number,
    default: 20
  },
  nodeText: {
    type: String,
    required: true
  },
  zoomable: {
    type: Boolean,
    default: false
  },
  openDepth: {
    type: Number,
    default: -1
  },
  reset: {
    type: Number,
    default: 0
  }
}

const directives = {
  resize
}

function drawLink (source, target, {transformNode}) {
  return 'M' + transformNode(source.x, source.y) +
         'C' + transformNode(source.x, (source.y + target.y) / 2) +
         ' ' + transformNode(target.x, (source.y + target.y) / 2) +
         ' ' + transformNode(target.x, target.y)
}

function hasChildren (d) {
  return d.children || d._children
}

function getChildren (d) {
  return d.children ? {children: d.children, visible: true} : (d._children ? {children: d._children, visible: false} : null)
}

function onAllChilddren (d, callback, fatherVisible = undefined) {
  if (callback(d, fatherVisible) === false) {
    return
  }
  var directChildren = getChildren(d)
  directChildren &amp;&amp; directChildren.children.forEach(child =&gt; onAllChilddren(child, callback, directChildren.visible))
}

function removeTextAndGraph (selection) {
  ['circle', 'text'].forEach(select =&gt; {
    selection.selectAll(select).remove()
  })
}

function translate (vector, {transformNode}) {
  return 'translate(' + transformNode(vector.x, vector.y) + ')'
}

export default {
  props,

  directives,

  data () {
    return {
      currentTransform: null,
      maxTextLenght: {
        first: 0,
        last: 0
      },
      initialize: false
    }
  },

  mounted () {
    const size = this.getSize()
    const svg = d3.select(this.$el).append('svg')
          .attr('width', size.width)
          .attr('height', size.height)
    let g = null
    let zoom = null

    if (this.zoomable) {
      g = svg.append('g')
      zoom = d3.zoom().scaleExtent([0.9, 8]).on('zoom', this.zoomed(g))
      svg.call(zoom).on('wheel', () =&gt; d3.event.preventDefault())
      svg.call(zoom.transform, d3.zoomIdentity)
    } else {
      g = this.transformSvg(svg.append('g'), size)
    }

    const tree = this.tree
    this.internaldata = {
      svg,
      g,
      tree,
      zoom
    }

    this.data &amp;&amp; this.onData(this.data)
  },

  methods: {
    getSize () {
      var width = this.$el.clientWidth + 80
      var height = this.$el.clientHeight
      return { width, height }
    },

    resize () {
      const size = this.getSize()
      this.internaldata.svg
              .attr('width', size.width)
              .attr('height', size.height)
      this.layout.size(this.internaldata.tree, size, this.margin, this.maxTextLenght)
      this.applyZoom(size)
      this.redraw()
    },

    completeRedraw ({margin = null, layout = null}) {
      const size = this.getSize()
      this.layout.size(this.internaldata.tree, size, this.margin, this.maxTextLenght)
      this.applyTransition(size, {margin, layout})
      this.redraw()
    },

    transformSvg (g, size) {
      size = size || this.getSize()
      return this.layout.transformSvg(g, this.margin, size, this.maxTextLenght)
    },

    updateTransform (g, size) {
      size = size || this.getSize()
      return this.layout.updateTransform(g, this.margin, size, this.maxTextLenght)
    },

    updateGraph (source) {
      let originBuilder = source
      let forExit = source
      if (typeof source === 'object') {
        const origin = {x: source.x0, y: source.y0}
        originBuilder = d =&gt; origin
        forExit = d =&gt; ({x: source.x, y: source.y})
      }
      const root = this.internaldata.root
      const links = this.internaldata.g.selectAll('.linktree')
         .data(this.internaldata.tree(root).descendants().slice(1), d =&gt; d.id)

      const updateLinks = links.enter().append('path').attr('class', 'linktree')
      const node = this.internaldata.g.selectAll('.nodetree').data(root.descendants(), d =&gt; d.id)
      const newNodes = node.enter().append('g').attr('class', 'nodetree')
      const allNodes = newNodes.merge(node)

      removeTextAndGraph(node)

      const text = allNodes.append('text')
        .attr('dy', '.35em')
        .text((d, i) =&gt; {
          if (i === 0) { return '' }
          let t = d.data[this.nodeText]
          // remove leo directive, TODO: take this out of component
          const re = /^\[(.*?)\]\((.*?)\)$/
          const match = re.exec(t)
          if (match) {
            t = match[1]
          }
          if (/^@clean/.test(t)) {
            t = t.substring(t.lastIndexOf('/') + 1)
          }
          return t
        })
        .on('click', d =&gt; {
          currentSelected = (currentSelected === d) ? null : d
          d3.event.stopPropagation()
          this.redraw()
          this.$emit('clicked', {element: d, data: d.data})
        })

      updateLinks.attr('d', d =&gt; drawLink(originBuilder(d), originBuilder(d), this.layout))

      const updateAndNewLinks = links.merge(updateLinks)
      const updateAndNewLinksPromise = toPromise(updateAndNewLinks
          .transition()
          .duration(this.duration)
          .attr('d', d =&gt; drawLink(d, d.parent, this.layout)))

      const exitingLinksPromise = toPromise(links.exit().transition().duration(this.duration).attr('d', d =&gt; drawLink(forExit(d), forExit(d), this.layout)).remove())

      newNodes.attr('transform', d =&gt; translate(originBuilder(d), this.layout))

      allNodes.classed('node--internal', d =&gt; hasChildren(d))
        .classed('node--leaf', d =&gt; !hasChildren(d))
        .classed('selected', d =&gt; d === currentSelected)
        .on('click', this.onNodeClick)

      const allNodesPromise = toPromise(allNodes.transition().duration(this.duration)
        .attr('transform', d =&gt; translate(d, this.layout))
        .attr('opacity', 1))

      allNodes.append('circle')
      text.attr('x', d =&gt; { return d.textInfo ? d.textInfo.x : 0 })
          .attr('dx', function (d) { return d.textInfo ? anchorTodx(d.textInfo.anchor, this) : 0 })
          .attr('transform', d =&gt; 'rotate(' + (d.textInfo ? d.textInfo.rotate : 0) + ')')

      const transformer = this.layout.transformText
      allNodes.each((d) =&gt; {
        d.textInfo = transformer(d, hasChildren(d))
      })

      const textTransition = toPromise(text.transition().duration(this.duration)
          .attr('x', d =&gt; d.textInfo.x)
          .attr('dx', function (d) { return anchorTodx(d.textInfo.anchor, this) })
          .attr('transform', d =&gt; `rotate(${d.textInfo.rotate})`))

      allNodes.each((d) =&gt; {
        d.x0 = d.x
        d.y0 = d.y
      })

      const exitingNodes = node.exit()
      const exitingNodesPromise = toPromise(exitingNodes.transition().duration(this.duration)
                  .attr('transform', d =&gt; translate(forExit(d), this.layout))
                  .attr('opacity', 0).remove())
      exitingNodes.select('circle').attr('r', 1e-6)
      if (!this.initialized &amp;&amp; this.layoutType === 'euclidean' &amp;&amp; this.type === 'tree') {
        if (this.openDepth &gt; 0) {
          allNodes.each((d) =&gt; {
            const depth = d.ancestors().length
            if (depth &gt; this.openDepth) {
              this.collapse(d, false)
            }
          })
          if (this.layoutType === 'euclidean') { this.initialized = true }
          // this.initialized = true
        } else {
          allNodes.each(d =&gt; this.expand(d, false))
        }
      }
      if (this.type !== 'tree') {
        allNodes.each(d =&gt; this.expand(d, false))
        this.initialized = false
      }
      const leaves = root.leaves()
      const extremeNodes = text.filter(d =&gt; leaves.indexOf(d) !== -1).nodes()
      const last = Math.max(...extremeNodes.map(node =&gt; node.getComputedTextLength())) + 6
      const first = text.node().getComputedTextLength() + 6
      if (last &lt;= this.maxTextLenght.last &amp;&amp; first &lt;= this.maxTextLenght.first) {
        return Promise.all([allNodesPromise, exitingNodesPromise, textTransition, updateAndNewLinksPromise, exitingLinksPromise])
      }
      this.maxTextLenght = {first, last}
      this.internaldata.svg.call(this.internaldata.zoom.transform, this.currentTransform)
      this.layout.size(this.internaldata.tree, this.getSize(), this.margin, this.maxTextLenght)

      return this.updateGraph(source)
    },

    onNodeClick (d) {
      if (d.children) {
        this.collapse(d)
      } else {
        this.expand(d)
        const title = d.data.name
        if (/^\[/.test(title)) {
          console.log('REDRAW')
          this.redraw()
        } else {
          console.log('RR', title)
        }
        // this.redraw()
      }
    },

    onData (data) {
      if (!data) {
        this.internaldata.root = null
        this.clean()
        return
      }
      const root = d3.hierarchy(data).sort((a, b) =&gt; { return compareString(a.data.text, b.data.text) })
      this.internaldata.root = root
      root.each(d =&gt; { d.id = i++ })
      const size = this.getSize()
      root.x = size.height / 2
      root.y = 0
      root.x0 = root.x
      root.y0 = root.y
      this.redraw()
    },

    clean () {
      ['.linktree', '.nodetree', 'text', 'circle'].forEach(selector =&gt; {
        this.internaldata.g.selectAll(selector).transition().duration(this.duration).attr('opacity', 0).remove()
      })
    },

    redraw () {
      const root = this.internaldata.root
      if (root) {
        return this.updateGraph(root)
      }
      return Promise.resolve('no graph')
    },

    getNodeOriginComputer (originalVisibleNodes) {
      return node =&gt; {
        const parentVisible = findInParents(node, originalVisibleNodes)
        return {x: parentVisible.x0, y: parentVisible.y0}
      }
    },

    applyZoom (size) {
      const {g, zoom} = this.internaldata
      if (this.zoomable) {
        g.call(zoom.transform, this.currentTransform)
      } else {
        this.transformSvg(g, size)
      }
    },

    applyTransition (size, {margin, layout}) {
      const {g, svg, zoom} = this.internaldata
      if (this.zoomable) {
        const transform = this.currentTransform
        const oldMargin = margin || this.margin
        const oldLayout = layout || this.layout

        const nowTransform = oldLayout.updateTransform(transform, oldMargin, size, this.maxTextLenght)
        const nextRealTransform = this.updateTransform(transform, size)
        const current = d3.zoomIdentity.translate(transform.x + nowTransform.x - nextRealTransform.x, transform.y + nowTransform.y - nextRealTransform.y).scale(transform.k)

        svg.call(zoom.transform, current).transition().duration(this.duration).call(zoom.transform, transform)
      } else {
        const transitiong = g.transition().duration(this.duration)
        this.transformSvg(transitiong, size)
      }
    },

    zoomed (g) {
      return () =&gt; {
        const transform = d3.event.transform
        const size = this.getSize()
        const transformToApply = this.updateTransform(transform, size)
        this.currentTransform = transform
        this.$emit('zoom', {transform})
        g.attr('transform', transformToApply)
      }
    },

    updateIfNeeded (d, update) {
      return update ? this.updateGraph(d).then(() =&gt; true) : Promise.resolve(true)
    },

    // API
    collapse (d, update = true) {
      if (!d.children) {
        return Promise.resolve(false)
      }

      d._children = d.children
      d.children = null
      this.$emit('retract', {element: d, data: d.data})
      return this.updateIfNeeded(d, update)
    },

    expand (d, update = true) {
      if (!d._children) {
        return Promise.resolve(false)
      }

      d.children = d._children
      d._children = null
      this.$emit('expand', {element: d, data: d.data})
      return this.updateIfNeeded(d, update)
    },

    expandAll (d, update = true) {
      const lastVisible = d.leaves()
      onAllChilddren(d, child =&gt; { this.expand(child, false) })
      return this.updateIfNeeded(this.getNodeOriginComputer(lastVisible), update)
    },

    collapseAll (d, update = true) {
      onAllChilddren(d, child =&gt; this.collapse(child, false))
      return this.updateIfNeeded(d, update)
    },

    show (d, update = true) {
      const path = d.ancestors().reverse()
      const root = path.find(node =&gt; node.children === null) || d
      path.forEach(node =&gt; this.expand(node, false))
      return this.updateIfNeeded(root, update)
    },

    showOnly (d) {
      const root = this.internaldata.root
      const path = d.ancestors().reverse()
      const shouldBeRetracted = mapMany(path, p =&gt; p.children ? p.children : []).filter(node =&gt; node &amp;&amp; (path.indexOf(node) === -1))
      const mapped = {}
      shouldBeRetracted.filter(node =&gt; node.children)
                      .forEach(rectractedNode =&gt; rectractedNode.each(c =&gt; { mapped[c.id] = rectractedNode }))
      const origin = node =&gt; {
        const reference = mapped[node.id]
        return {x: reference.x, y: reference.y}
      }
      const updater = node =&gt; {
        if (shouldBeRetracted.indexOf(node) !== -1) {
          this.collapse(node, false)
          return false
        }
        return (node !== d)
      }
      onAllChilddren(root, updater)
      return this.updateGraph(origin).then(() =&gt; true)
    },

    resetZoom () {
      if (!this.zoomable) {
        return Promise.resolve(false)
      }
      const {svg, zoom} = this.internaldata
      const transitionPromise = toPromise(svg.transition().duration(this.duration).call(zoom.transform, () =&gt; d3.zoomIdentity))
      return transitionPromise.then(() =&gt; true)
    }
  },

  computed: {
    tree () {
      const size = this.getSize()
      const tree = this.type === 'cluster' ? d3.cluster() : d3.tree()
      this.layout.size(tree, size, this.margin, this.maxTextLenght)
      return tree
    },

    margin () {
      return {x: this.marginX, y: this.marginY}
    },

    layout () {
      return layout[this.layoutType]
    }
  },

  watch: {
    data (current, old) {
      this.onData(current)
    },

    type () {
      if (!this.internaldata.tree) {
        return
      }
      this.internaldata.tree = this.tree
      this.redraw()
    },
    reset () {
      this.completeRedraw({margin: {x: this.marginX, y: this.marginY}})
    },

    marginX (newMarginX, oldMarginX) {
      this.completeRedraw({margin: {x: newMarginX, y: this.marginY}})
    },

    marginY (newMarginY, oldMarginY) {
      this.completeRedraw({margin: {x: this.marginX, y: newMarginY}})
    },

    layout (newLayout, oldLayout) {
      this.completeRedraw({layout: oldLayout})
    }
  }
}
&lt;/script&gt;
@language css
&lt;style&gt;
.treeclass .nodetree  circle {
  fill: #999;
  r: 4.5;
}

.treeclass .node--internal circle {
  cursor: pointer;
  fill:  #555;
  r: 5;
}

.treeclass .nodetree text {
  font: 14px sans-serif;
  cursor: pointer;
}

.treeclass .nodetree.selected text {
  font-weight: bold;
}

.treeclass .node--internal text {
  text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;
}

.treeclass .linktree {
  fill: none;
  stroke: #555;
  stroke-opacity: 0.4;
  stroke-width: 1.5px;
}
&lt;/style&gt;
</t>
<t tx="ekr.20180130165259.84">/*
 * defiant.js [v1.4.1]
 * http://www.defiantjs.com
 * Copyright (c) 2013-2017, Hakan Bilgin &lt;hbi@longscript.com&gt;
 * Licensed under the MIT License
 */
/*
 * x10.js v0.1.3
 * Web worker wrapper with simple interface
 *
 * Copyright (c) 2013-2015, Hakan Bilgin &lt;hbi@longscript.com&gt;
 * Licensed under the MIT License
 */

@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180130165259.85">(function(window, undefined) {
  //'use strict';

  var x10 = {
    @others
})(this);


</t>
<t tx="ekr.20180130165259.86">init: function() {
  return this;
},
</t>
<t tx="ekr.20180130165259.87">work_handler: function(event) {
  var args = Array.prototype.slice.call(event.data, 1),
    func = event.data[0],
    ret  = tree[func].apply(tree, args);

  // return process finish
  postMessage([func, ret]);
},
</t>
<t tx="ekr.20180130165259.88">setup: function(tree) {
  var url    = window.URL || window.webkitURL,
    script = 'var tree = {'+ this.parse(tree).join(',') +'};',
    blob   = new Blob([script + 'self.addEventListener("message", '+ this.work_handler.toString() +', false);'],
      {type: 'text/javascript'}),
    worker = new Worker(url.createObjectURL(blob));

  // thread pipe
  worker.onmessage = function(event) {
    var args = Array.prototype.slice.call(event.data, 1),
      func = event.data[0];
    x10.observer.emit('x10:'+ func, args);
  };

  return worker;
},
</t>
<t tx="ekr.20180130165259.89">call_handler: function(func, worker) {
  return function() {
    var args = Array.prototype.slice.call(arguments, 0, -1),
      callback = arguments[arguments.length-1];

    // add method name
    args.unshift(func);

    // listen for 'done'
x10.observer.on('x10:'+ func, function(event) {
  callback(event.detail[0]);
});

// start worker
worker.postMessage(args);
  };
},
</t>
<t tx="ekr.20180130165259.9">function startDragging (e) {
  if (e.currentTarget instanceof HTMLElement || e.currentTarget instanceof SVGElement) {
    dragging = true
    var left = el.style.left ? parseInt(el.style.left) : 0
    var top = el.style.top ? parseInt(el.style.top) : 0
    startX = e.pageX - left
    startY = e.pageY - top
    window.addEventListener('mousemove', move)
  } else {
    throw new Error('Your target must be an html element')
  }
}

this.addEventListener('mousedown', startDragging)
</t>
<t tx="ekr.20180130165259.90">compile: function(hash) {
  var worker = this.setup(typeof(hash) === 'function' ? {func: hash} : hash),
    obj    = {},
    fn;
  // create return object
  if (typeof(hash) === 'function') {
    obj.func = this.call_handler('func', worker);
    return obj.func;
  } else {
    for (fn in hash) {
      obj[fn] = this.call_handler(fn, worker);
    }
    return obj;
  }
},
</t>
<t tx="ekr.20180130165259.91">parse: function(tree, isArray) {
  var hash = [],
    key,
    val,
    v;

  for (key in tree) {
    v = tree[key];
    // handle null
    if (v === null) {
      hash.push(key +':null');
      continue;
    }
    // handle undefined
    if (v === undefined) {
      hash.push(key +':undefined');
      continue;
    }
    switch (v.constructor) {
      case Date:     val = 'new Date('+ v.valueOf() +')';           break;
      case Object:   val = '{'+ this.parse(v).join(',') +'}';       break;
      case Array:    val = '['+ this.parse(v, true).join(',') +']'; break;
      case String:   val = '"'+ v.replace(/"/g, '\\"') +'"';        break;
      case RegExp:
      case Function: val = v.toString();                            break;
      default:       val = v;
    }
    if (isArray) hash.push(val);
    else hash.push(key +':'+ val);
  }
  return hash;
},
// simple event emitter
</t>
<t tx="ekr.20180130165259.92">  observer: (function() {
    var stack = {};

    return {
      @others
  })()
};

if (typeof module === "undefined") {
  // publish x10
  window.x10 = x10.init();
} else {
  module.exports = x10.init();
}

</t>
<t tx="ekr.20180130165259.93">on: function(type, fn) {
  if (!stack[type]) {
    stack[type] = [];
  }
  stack[type].unshift(fn);
},
</t>
<t tx="ekr.20180130165259.94">off: function(type, fn) {
  if (!stack[type]) return;
  var i = stack[type].indexOf(fn);
  stack[type].splice(i,1);
},
</t>
<t tx="ekr.20180130165259.95">  emit: function(type, detail) {
    if (!stack[type]) return;
    var event = {
        type         : type,
        detail       : detail,
        isCanceled   : false,
        cancelBubble : function() {
          this.isCanceled = true;
        }
      },
      len = stack[type].length;
    while(len--) {
      if (event.isCanceled) return;
      stack[type][len](event);
    }
  }
};
</t>
<t tx="ekr.20180130165259.96">(function(window, module, undefined) {
  'use strict';

  var Defiant = {
    is_ie     : /(msie|trident)/i.test(navigator.userAgent),
    is_safari : /safari/i.test(navigator.userAgent),
    env       : 'production',
    xml_decl  : '&lt;?xml version="1.0" encoding="utf-8"?&gt;',
    namespace : 'xmlns:d="defiant-namespace"',
    tabsize   : 4,
    @others
})(
  typeof window !== 'undefined' ? window : {},
  typeof module !== 'undefined' ? module : {}
);


if (typeof(XSLTProcessor) === 'undefined') {

  // emulating XSLT Processor (enough to be used in defiant)
  var XSLTProcessor = function() {};
  XSLTProcessor.prototype = {
</t>
<t tx="ekr.20180130165259.97">render: function(template, data) {
  var processor = new XSLTProcessor(),
    span      = document.createElement('span'),
    opt       = {match: '/'},
    tmpltXpath,
    scripts,
    temp,
    sorter;
  // handle arguments
  switch (typeof(template)) {
    case 'object':
      this.extend(opt, template);
      if (!opt.data) opt.data = data;
      break;
    case 'string':
      opt.template = template;
      opt.data = data;
      break;
    default:
      throw 'error';
  }
  opt.data = JSON.toXML(opt.data);
  tmpltXpath = '//xsl:template[@name="'+ opt.template +'"]';

  if (!this.xsl_template) this.gatherTemplates();

  if (opt.sorter) {
    sorter = this.node.selectSingleNode(this.xsl_template, tmpltXpath +'//xsl:for-each//xsl:sort');
    if (sorter) {
      if (opt.sorter.order) sorter.setAttribute('order', opt.sorter.order);
      if (opt.sorter.select) sorter.setAttribute('select', opt.sorter.select);
      sorter.setAttribute('data-type', opt.sorter.type || 'text');
    }
  }

  temp = this.node.selectSingleNode(this.xsl_template, tmpltXpath);
  temp.setAttribute('match', opt.match);
  processor.importStylesheet(this.xsl_template);
  span.appendChild(processor.transformToFragment(opt.data, document));
  temp.removeAttribute('match');

  if (this.is_safari) {
    scripts = span.getElementsByTagName('script');
    for (var i=0, il=scripts.length; i&lt;il; i++) scripts[i].defer = true;
  }
  return span.innerHTML;
},
</t>
<t tx="ekr.20180130165259.98">gatherTemplates: function() {
  var scripts = document.getElementsByTagName('script'),
    str     = '',
    i       = 0,
    il      = scripts.length;
  for (; i&lt;il; i++) {
    if (scripts[i].type === 'defiant/xsl-template') str += scripts[i].innerHTML;
  }
  this.xsl_template = this.xmlFromString('&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" '+ this.namespace +'&gt;'+ str.replace(/defiant:(\w+)/g, '$1') +'&lt;/xsl:stylesheet&gt;');
},
</t>
<t tx="ekr.20180130165259.99">getSnapshot: function(data, callback) {
  return JSON.toXML(data, callback || true);
},
</t>
<t tx="ekr.20180130165640.1">import Vue from 'vue'
import App from './App'
import AppBase from './AppBase.vue'
import router from './router'
import store from './store'
import { sync } from 'vuex-router-sync'
import Icon from 'vue-awesome/components/Icon.vue'
import 'vue-awesome/icons/bars'
import 'vue-awesome/icons/arrow-left'
import 'vue-awesome/icons/arrow-right'
import 'vue-awesome/icons/check'
import 'vue-awesome/icons/chevron-left'
import 'vue-awesome/icons/'

// content components
import Vue2Leaflet from 'vue2-leaflet'
import InfoCard from 'vue-info-card'
import VueTabs from 'vue-nav-tabs'
import 'vue-nav-tabs/themes/vue-tabs.scss'
import VTooltip from 'v-tooltip'
import VueYouTubeEmbed from 'vue-youtube-embed'
import VTable from './components/Table'
import VCTable from './content-components/VCTable'
import Mermaid from './content-components/Mermaid'
import MermaidP from './content-components/MermaidP'
import VSVG from './content-components/VSVG'
import SectionLink from './components/SectionLink'
import NodeLink from './components/NodeLink'
import MathJaxComponent from './components/MathJax'
import ImageLeft from './components/layout/ImageLeft'
import { TableComponent, TableColumn } from 'vue-table-component'

import {charts} from './content-components/Charts'
charts(Vue)

const Defiant = require('./lib/defiant') // eslint-disable-line

Vue.use(VTooltip)
Vue.use(VueTabs)
</t>
<t tx="ekr.20180130165748.1">Vue.use(VueYouTubeEmbed)
Vue.component('img-left', ImageLeft)
Vue.component('sectionlink', SectionLink)
Vue.component('Nodelink', NodeLink)
Vue.component('v-table', VTable)
Vue.component('v-svg', VSVG)
Vue.component('vc-table', VCTable)
Vue.component('mermaid', Mermaid)
Vue.component('mermaidp', MermaidP)
Vue.component('mj', MathJaxComponent)
Vue.component('info-card', InfoCard)
Vue.component('v-map', Vue2Leaflet.Map)
Vue.component('v-tilelayer', Vue2Leaflet.TileLayer)
Vue.component('v-marker', Vue2Leaflet.Marker)
Vue.component('table-component', TableComponent)
Vue.component('table-column', TableColumn)

sync(store, router)

const util = require('./util.js')
util.parseQueryString(window.lconfig, window.location.href)
    // fill in global config object from url params

Vue.component('icon', Icon)

Vue.config.productionTip = false
</t>
<t tx="ekr.20180213112824.1">function getChartOptions (type) {
  const chartOptions = {
  
    extends: VueChartJs[type],
    
    props: {
      dataSet: String,
      dataTable: String,
      title: String,
      col: String,
      gridLines: Boolean,
      responsive: {
        type: Boolean,
        default: true
      }
    },
    
    mounted () {
      const options = {
        responsive: this.responsive,
        maintainAspectRatio: false,
        scales: {
          xAxes: [ {
            gridLines: { display: this.gridLines },
            categoryPercentage: 0.9,
            barPercentage: 0.8
          }],
          yAxes: [ {
            gridLines: { display: this.gridLines }
          }]
        }
      }
      // kludge...
      if (type === 'Pie') { delete options.scales }
      if (type === 'Doughnut') { delete options.scales }
      if (type === 'Polar') { delete options.scales }
      let data = null
      if (this.dataSet) {
        data = this.$store.state.dataSets[this.dataSet]
        if (!data) {
          data = window.parent.lconfig.dataSets[this.dataSet]
        }
      }
      if (this.dataTable) {
        let d = this.$store.state.dataTables[this.dataTable]
        if (!d) {
          d = window.parent.lconfig.dataTables[this.dataTable]
        }
        const dataArray = d.arr
        if (this.col) {
          let colIndex = dataArray[0].findIndex(c =&gt; c === this.col)
          let colData = dataArray.map(v =&gt; v[colIndex])
          let colNames = dataArray.map(v =&gt; v[0])
          colData.shift()
          colNames.shift()
          data = dataTableToDataSet(d)
          data.labels = colNames
          data.datasets = [{
            data: colData,
            backgroundColor: data.colors,
            borderColor: data.colors
          }]
          // kludge..
          if (type === 'Bar') {
            _.set(options, 'legend.display', false)
          }
        } else {
          data = dataTableToDataSet(d)
        }
      }
      options.title = {
        display: true,
        text: this.title || data.title || ''
      }
      this.renderChart(data, options)
    }
  }
  return chartOptions
}</t>
<t tx="ekr.20180213112913.1"></t>
<t tx="ekr.20180213112918.1"></t>
<t tx="ekr.20180213112925.1"></t>
<t tx="ekr.20180213114346.1">@language html
const xslTemplate = `
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="v"&gt;
    &lt;xsl:variable name="t" select="@t"/&gt;
    &lt;xsl:variable name="nodeSet" select="//v[@t=$t]"/&gt;
    &lt;xsl:variable name="double_quote"&gt;"&lt;/xsl:variable&gt;
    &lt;xsl:variable name="apos"&gt;'&lt;/xsl:variable&gt;
    {
    "id":  &lt;xsl:value-of select="@id"/&gt;,
    "t":   "&lt;xsl:value-of select="translate(@t,'.','_')"/&gt;",
    "name":"&lt;xsl:value-of select="translate($nodeSet[1]/vh,concat('\',$double_quote),concat('|',$apos))"/&gt;",
    "children":[&lt;xsl:apply-templates select="$nodeSet[1]/v"/&gt;]
    }
    &lt;xsl:if test="position()!=last()"&gt;,&lt;/xsl:if&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="text()"/&gt;

&lt;/xsl:stylesheet&gt;
`</t>
<t tx="ekr.20180213115426.1"></t>
<t tx="ekr.20180213120602.1">@language javascript
// ========= The Store ===============
export default new Vuex.Store({
  state: {
    &lt;&lt; state &gt;&gt;
  },
  mutations: {
    &lt;&lt; mutations &gt;&gt;
  },
  actions: {
    &lt;&lt; actions &gt;&gt;
  }
})
</t>
<t tx="ekr.20180213120954.1">@language javascript
@others
</t>
<t tx="ekr.20180213121112.1">leotext: {},
leodata: {},
filename: '',
initialized: false,
initializedData: false,
contentPane: 'text',
viewType: 't',
currentItem: {
  id: 0,
  next: 0,
  prev: 0,
  type: 'item'
},
currentItemContent: '',
contentItems: {},
currentPage: {
  id: 0
},
dataSets: {},
dataTables: {},
openItemIds: [],
history: [0],
historyIndex: 0,
iframeHTML: '',
contentItemsUpdateCount: 0,
idx: null,
accordion: false,
accordionPrev: false,
searchFlag: false,
selecting: false // e.g. in search dialog using arrow keys

</t>
<t tx="ekr.20180213121149.1">// EKR: Same as ADDDATASET: function (state, o) { ...
ADDDATASET (state, o) {
  state.dataSets[o.k] = o.v
},
ADDDATATABLE (state, o) {
  state.dataTables[o.k] = o.v
},
TOGGLEACCORDION (state) {
  state.accordion = !state.accordion
},
SETSEARCHFLAG (state) {
  state.searchFlag = true
},
SELECTINGON (state) {
  if (!state.searchFlag) {
    state.accordionPrev = state.accordion
  }
  state.accordion = true
},
SELECTINGOFF (state) {
  state.searchFlag = false
  state.accordion = state.accordionPrev
},
LEO (state, o) {
  state.leodata = o.data
  state.leotext = o.text
  const c = loadIndex(o.data, o.text)
  state.idx = c.idx
  state.idxDocs = c.docs
  state.filename = o.filename
  window.lconfig.leodata = o.data
  window.lconfig.leotext = o.text
},
// lunr search index
RESETINDEX (state, o) {
  if (_.isUndefined) {
    console.log('No state in RESETINDEX')
    return
  }
  const c = loadIndex(state.leodata, state.leotext)
  state.idx = c.idx
  state.idxDocs = c.docs
  state.filename = o.filename
},
ADDTEXT (state, o) {
  const text = o.text
  for (let k in text) {
    state.leotext[k] = text[k]
  }
},
INIT (state) {
  state.initialized = true
},
INIT_DATA (state) {
  state.initializedData = true
},
RESET (state) {
  state.initialized = false
},
CONTENT_PANE (state, o) {
  state.contentPane = o.type
},
IFRAME_HTML (state, o) {
  state.iframeHTML = o.iframeHTML
},
VIEW_TYPE (state, o) {
  state.viewType = o.type
},
CURRENT_ITEM_CONTENT (state, o) {
  state.currentItemContent = o.text
},
CURRENT_PAGE (state, o) {
  const id = o.id
  state.currentPage.id = id
  if (+id === 0) { return }
  let routeName = state.route.name
  if (routeName === 'Top') {
    routeName = 'Node'
  }
  router.replace({name: routeName, params: { id }})
},
// for inline content, keep hash of content items
CONTENT_ITEM (state, o) {
  const item = o.item
  state.contentItems[item.id] = item.t
},
CONTENT_ITEM_UPDATE (state, o) {
  state.contentItemsUpdateCount = state.contentItemsUpdateCount + 1
},
CURRENT_ITEM (state, o) {
  console.log('COMMIT CURRENT ITEM')
  const id = o.id
  // check current for identical
  if (o.id === state.currentItem.id) {
    return
  }
  // TODO: check prev/next for identical before change
  const nextSibling = JSON.search(state.leodata, '//children[id="' + id + '"]/following-sibling::*')
  const prevSibling = JSON.search(state.leodata, '//children[id="' + id + '"]/preceding-sibling::children')
  let next = 0
  let prev = 0
  if (nextSibling[0]) {
    next = nextSibling[0].id
  }
  if (prevSibling[0]) {
    prev = prevSibling[prevSibling.length - 1].id
  }
  if (id - prev !== 1) {
    prev = 0
  }
  if (next - id !== 1) {
    next = 0
  }
  state.currentItem.id = id
  state.currentItem.prev = prev
  state.currentItem.next = next
  let routeName = state.route.name
  if (routeName === 'Top') {
    routeName = 'Node'
  }
  router.replace({name: routeName, params: { id }})

  if (typeof o.historyIndex !== 'undefined') {
    state.historyIndex = o.historyIndex
  } else {
    state.history.push(id)
    state.historyIndex = state.historyIndex + 1
  }
  state.initialized = false
},
OPEN_ITEMS (state, o) {
  const ids = state.openItemIds
  ids.splice(0, ids.length)
  ids.push(...o.openItemIds)
}
</t>
<t tx="ekr.20180213121732.1">// EKR: Same as setMessages: function (context) {...
setMessages (context) {
  // --------------- was split, for some reason
  window.addEventListener('message', function (event) {
    if (!event.data) { return }
    if (!Object.keys(event.data).length) { return }
    let data = {}
    if (_.isObject(event.data)) {
      data = event.data
    } else {
      data = JSON.parse(event.data)
    }
    console.log('MDATA', data)
    if (data.namespace === 'leovue' &amp;&amp; data.eventName === 'setcurrentitem') {
      const id = data.state.id
      context.dispatch('setCurrentItem', {id})
      console.log('setcurrentitem', id)
    }
    if (data.namespace === 'reveal' &amp;&amp; data.eventName === 'slidechanged') {
      const id = data.state.indexh
      context.dispatch('setCurrentPage', {id})
      // Slide changed, see data.state for slide number
    }
  })
},</t>
<t tx="ekr.20180213121735.1">loadLeo (context, o) {
  getLeoJSON(o.filename, o.id).then(ldata =&gt; {
    setData(context, ldata, o.filename, o.route)
  })
},</t>
<t tx="ekr.20180213121735.2">loadLeoFromXML (context, o) {
  transformLeoXML(o.xml).then(ldata =&gt; {
    setData(context, ldata, 'dnd', o.route)
  })
},</t>
<t tx="ekr.20180213121736.1">// Given a list of ids, get the content. Needed for
// inline mode and displaying content in a path.
setContentItems (context, o) {
  const ids = o.ids
  ids.forEach(id =&gt; {
    let item = JSON.search(context.state.leodata, '//children[id="' + id + '"]')
    if (!item[0]) {
      console.log(item, id, context.state.leodata)
    }
    if (item &amp;&amp; item[0]) {
      item = item[0]
      // if it starts with a bracket it is a link in markdown syntax
      if (/^\[/.test(item.name)) {
        setSiteItem(context, item.name, item.id)
      } else {
        let text = context.state.leotext[item.t]
        text = util.formatText(text)
        const newItem = {
          t: text,
          id: id
        }
        context.commit('CONTENT_ITEM', {item: newItem})
        context.commit('CONTENT_ITEM_UPDATE')
      }
    }
  })
},</t>
<t tx="ekr.20180213121901.1">setCurrentPage (context, o) {
  let page = +o.id
  let id = context.state.currentItem.id
  // if we're setting a page, we're displaying a presentation
  const presentationNode = JSON.search(context.state.leodata, '//*[id="' + id + '"]')[0]
  const pageNode = presentationNode.children[page]
  // const pageNode = 0
  // console.log('PN', presentationNode, pageNode, page)
  if (!pageNode) {
    id = 0
  } else {
    id = pageNode.id
  }
  context.commit('CURRENT_PAGE', {id})
},</t>
<t tx="ekr.20180213121901.2">setCurrentItem (context, o) {
  const id = o.id
  if (o.id === context.state.currentItem.id) { return }
  // if in iframe, just raise event and leave
  if (window.parent !== window.self) { return }
  // open parent nodes, close others
  const openItems = JSON.search(context.state.leodata, '//*[id="' + id + '"]/ancestor::*')
  let openItemIds = openItems.reduce((acc, o) =&gt; {
    if (o.id) { acc.push(o.id + '') }
    return acc
  }, [])
  openItemIds.push(id + '')
  if (context.state.accordion) {
    context.commit('OPEN_ITEMS', {openItemIds})
    const ids = openItemIds
    context.dispatch('setContentItems', {ids})
  } else {
    // open parent nodes
    const currentOpenItemIds = context.state.openItemIds
    openItemIds = _.uniq(currentOpenItemIds.concat(openItemIds))
    context.commit('OPEN_ITEMS', {openItemIds})
  }
  let item = JSON.search(context.state.leodata, '//*[id="' + id + '"]')
  console.log('Current Item:', item)
  context.commit('CURRENT_ITEM', {id})
  if (_.get(item, '[0].presentation')) {
    context.commit('CURRENT_PAGE', {id: 0})
  }
  if (item) {
    item = item[0]
    if (/^@presentation /.test(item.name)) {
      return showPresentation(context, item.name, id)
    }
    if (/^« /.test(item.name) &amp;&amp; _.has(item.children[0], 'presentation')) {
      // context.commit('CURRENT_ITEM', {id: item.children[0].presentation.pid})
      // context.commit('CURRENT_PAGE', {id})
      // context.commit('CURRENT_PAGE', {id: 0})
      // console.log('Showing Section presentation.', item.name, context.state.currentItem.id)
      return showPresentation(context, item.name, id)
    }
    // bracket means load file/site
    if (/^\[/.test(item.name)) {
      // load leo file from item title
      if (/\.leo\)$/.test(item.name)) {
        console.log('load leo')
        loadLeoNode(context, item, true).then(
          res =&gt; context.commit('RESETINDEX')
        )
      } else {
        console.log('load site')
        showSite(context, item.name, id)
        setSiteItem(context, item.name, id)
      }
    } else {
      // console.log(item.t)
      showText(context, context.state.leotext[item.t], id)
    }
    // if it is a page in a presentation
    if (item.presentation) {
      context.commit('CURRENT_ITEM', {id: item.presentation.pid})
      context.commit('CURRENT_PAGE', {id})
      return showPresentation(context, item.name, id)
    } else {
      context.commit('CURRENT_PAGE', {id: 0})
    }
  }
}</t>
<t tx="ekr.20180213122750.1">{
  path: '/t/:id',
  component: Dashboard,
  children: [{
    name: 'Node',
    path: '',
    component: TreeViewer
  }]
},
{
  path: '/a/:id',
  component: Dashboard,
  children: [{
    name: 'ANode',
    path: '',
    component: AccordionViewer
  }]
},
{
  path: '/n/:id',
  component: Dashboard,
  children: [{
    name: 'NNode',
    path: '',
    component: NestedViewer
  }]
},
{
  path: '/d/:id',
  component: Dashboard,
  children: [{
    name: 'DNode',
    path: '',
    component: D3Viewer
  }]
},
{
  path: '/z/:id',
  component: Dashboard,
  children: [{
    name: 'ZNode',
    path: '',
    component: D3Viewer
  }]
},
{
  path: '/r/:id',
  component: Dashboard,
  children: [{
    name: 'RNode',
    path: '',
    component: D3Viewer
  }]
},
/*
{
  path: '/w/:id',
  component: Dashboard,
  children: [{
    name: 'WNode',
    path: '',
    component: DbViewer
  }]
},
*/
{
  path: '/settings',
  component: Settings
},
{
  path: '*',
  redirect: '/' + baseMode + '/1'
}
</t>
<t tx="ekr.20180213122919.1">import Vue from 'vue'
import Router from 'vue-router'
import Dashboard from '@/components/Dashboard'
import TreeViewer from '@/components/TreeViewer'
import D3Viewer from '@/components/D3Viewer'
// import DbViewer from '@/components/DbViewer'
import Settings from '@/components/Settings'
import AccordionViewer from '@/components/AccordionViewer'
import NestedViewer from '@/components/NestedViewer'
</t>
<t tx="ekr.20180213123441.1">@language javascript

// drag and drop a leo file
dragover_handler (ev) {
  // Prevent default select and drag behavior
  ev.preventDefault()
},
dragend_handler (ev) {
  // Remove all of the drag data
  var dt = ev.dataTransfer
  if (dt.items) {
    // Use DataTransferItemList interface to remove the drag data
    for (var i = 0; i &lt; dt.items.length; i++) {
      dt.items.remove(i)
    }
  } else {
    // Use DataTransfer interface to remove the drag data
    ev.dataTransfer.clearData()
  }
},
drop_handler (ev) {
  ev.preventDefault()
  // If dropped items aren't files, reject them
  var dt = ev.dataTransfer
  var i
  var f
  if (dt.items) {
    // Use DataTransferItemList interface to access the file(s)
    for (i = 0; i &lt; dt.items.length; i++) {
      if (dt.items[i].kind === 'file') {
        f = dt.items[i].getAsFile()
      }
    }
  } else {
    // Use DataTransfer interface to access the file(s)
    for (i = 0; i &lt; dt.files.length; i++) {
      f = dt.files[i]
    }
  }
  var reader = new FileReader()
  reader.onload = (xml) =&gt; {
    const xmlString = xml.srcElement.result
    this.$store.dispatch('loadLeoFromXML', {xml: xmlString, route: this.$route})
  }
  reader.readAsText(f)
}
</t>
<t tx="ekr.20180213124318.1">template, // use content as template for this component
mounted () {
  Reveal.initialize({ // eslint-disable-line
    postMessageEvents: true,
    controls: true,
    progress: true,
    center: true,
    transition: 'slide', // none/fade/slide/convex/concave/zoom
    // More info https://github.com/hakimel/reveal.js#dependencies
    dependencies: [
      { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.6.0/plugin/zoom-js/zoom.js', async: true },
      { src: 'https://cdn.jsdelivr.net/npm/reveal.js@3.6.0/plugin/notes/notes.js', async: true }
    ]
  })
}</t>
<t tx="ekr.20180213124834.1">@language javascript

// functions for dealing with x-frame headers
window.getData = function (data) {
  if (
    data &amp;&amp; data.query &amp;&amp; data.query.results &amp;&amp;
    data.query.results.resources &amp;&amp;
    data.query.results.resources.content &amp;&amp;
    data.query.results.resources.status == 200
  ) {
    let html = data.query.results.resources.content
    if (/https:/.test(window.url)) {
      html = html.replace(/src="http:/g, 'src="https:')
    }
    loadHTML(html)
  } else if (data &amp;&amp; data.error &amp;&amp; data.error.description) {
    loadHTML(data.error.description)
  } else {
    loadHTML('Error: Cannot load ' + window.url)
  }
}

window.loadHTML = function (html) {
  iframe.src = 'about:blank'
  iframe.contentWindow.document.open()
  // iframe.contentWindow.document.write(html.replace(/&lt;head&gt;/i, '&lt;head&gt;&lt;base href="' + url + '"&gt;&lt;scr' + 'ipt&gt;document.addEventListener("click", function(e) { if(e.target &amp;&amp; e.target.nodeName == "A") { e.preventDefault(); parent.loadURL(e.target.href); } });&lt;/scr' + 'ipt&gt;'))
  iframe.contentWindow.document.write(
    html.replace(/&lt;head&gt;/i,
      '&lt;head&gt;&lt;base href="' + window.url + '"&gt;&lt;scr' +
      'ipt&gt;document.addEventListener("click", function(e) { if(e.target &amp;&amp; e.target.nodeName == "A") { e.preventDefault(); window.open(e.target.href); } });&lt;/scr' + 'ipt&gt;'))
  iframe.contentWindow.document.close()
}

window.loadURL = function (src) {
  let url = src
  var script = document.createElement('script')
  script.src = 'https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20data.headers%20where%20url%3D%22' + encodeURIComponent(url) +
    '%22&amp;format=json&amp;diagnostics=true&amp;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&amp;callback=getData'
  document.body.appendChild(script)
};

function overrideXFrame(item, textItems) {
  console.log('override xframe')
  const iframe = document.getElementsByTagName('iframe')[0];
  if (!iframe){ return }
  window.iframe = iframe
  const url = iframe.src
  if (url === 'about:blank') {
    return loadPresentation(item, textItems, iframe)
  }
  console.log('URL', url)
  if (!/^\s?xttp/.test(url)) { return }
  window.url = url.replace(/^s?xttp/, 'http')
  loadURL(window.url)
}
// end functions for dealing with x-frame headers

function loadPresentation(item, textItems, iframe) {
  console.log('loading presentation', item)
  // debugger
  let content = ''
  let re = /^@props (.*)/
  if (!item.children.length) {
    console.log('pid', item.presentation.pid)
    return
  }
  item.children.forEach((page, index) =&gt; {
    let pageContent = textItems[page.t]
    let props = re.exec(pageContent)
    if (props) {
      props = props[1]
    } else {
      props = ''
    }
    content = content + '&lt;section ' + props + '&gt;' +  util.formatText(pageContent, true) + '&lt;/section&gt;'
  })
  const html = presentation(item.name, content)
  iframe.contentWindow.document.open()
  iframe.contentWindow.document.write(html)
  iframe.contentWindow.document.close()
}
</t>
<t tx="ekr.20180213125015.1">@language javascript

name: 'contentpane',
components: {
},
data () {
  return {
  }
},
methods: {
  goNext () {
    const next = this.$store.state.currentItem.next
    this.resetCurrentItem(next)
  },
  goPrev () {
    const prev = this.$store.state.currentItem.prev
    this.resetCurrentItem(prev)
  },
  resetCurrentItem (id) {
    // router.replace('/t/' + id)
    // const currentItem = { id }
    // this.$store.commit('RESET')
    this.$store.dispatch('setCurrentItem', {id})
  }
},
computed: {
  data () {
    return this.$store.state.leodata
  },
  text () {
    return this.$store.state.leotext
  },
  iframeContent () {
    if (this.$store.state.contentPane === 'site') {
      return true
    } else {
      return false
    }
  },
  textContent () {
    if (this.$store.state.contentPane === 'text') {
      return true
    } else {
      return false
    }
  },
  currentItemContent () {
    return this.$store.state.currentItemContent
  },
  iframeHTML () {
    if (this.iframeContent) {
      return this.$store.state.iframeHTML
    } else {
      return ''
    }
  },
  hasNext () {
    return this.$store.state.currentItem.next
  },
  hasPrev () {
    return this.$store.state.currentItem.prev
  },
  dynComponent () {
    // const id = this.$store.state.currentItem.id
    const template = this.currentItemContent ? this.currentItemContent : '&lt;div&gt;&lt;/div&gt;'
    return {
      template, // use content as template for this component
      props: this.$options.props // re-use current props definitions
    }
  }
},
beforeUpdate () {
},
mounted () {
},
updated () {
  console.log('Content Pane Updated.')
  const id = this.$store.state.currentItem.id
  const item = JSON.search(this.data, '//*[id="' + id + '"]')[0]
  overrideXFrame(item, this.$store.state.leotext)
  const clinks = document.getElementsByClassName('csection-link')
  let leodata = this.$store.state.leodata
  let me = this
  // section links in code require explicit processing bc vue components
  // are turned off in code (with v-pre)
  function gotoSectionFunc (leodata) {
     function func (e) {
       try {
         let item = JSON.search(leodata, '//*[name="' + e.srcElement.innerHTML + '"]')[0]
         console.log('ITEM', item)
         let id = item.id
         me.$store.dispatch('setCurrentItem', {id})
       } catch (e) {
         console.log('goto section error:', e)
       }
     }
     return func
  }
  for (let i = 0; i &lt; clinks.length; i++) {
    let clink = clinks[i]
    clink.onclick = gotoSectionFunc(leodata)
  }
},
watch: {
}
</t>
<t tx="ekr.20180213125318.1">c.backup_helper(sub_dir='LeoVue')
</t>
<t tx="ekr.20180214203133.1">// The View Template
app.run([
  '$templateCache',
  function($templateCache) {
    $templateCache.put('formio/components/viewgrids.html',
      '&lt;h3 class="component-title" ng-show="component.viewgridData.showTitle"&gt;{{ component.label }}&lt;/h3&gt;' +
      '&lt;div id="jsGrid_{{labelId}}"&gt;&lt;/div&gt;' +
      '&lt;div ng-show="dummy()"&gt;&lt;/div&gt;'
    );

  }
]);
</t>
<t tx="ekr.20180214204020.1">/**
 * viewGrid component, requires API with array of data or object with 'records' array of data.
 */
app.config([
  'formioComponentsProvider',
  function(formioComponentsProvider) {
    &lt;&lt; provider &gt;&gt;
  }
]);
</t>
<t tx="ekr.20180824113325.10">@path C:/leo.repo/leovue/build/
require('./check-versions')()

var config = require('../config')
if (!process.env.NODE_ENV) {
  process.env.NODE_ENV = JSON.parse(config.dev.env.NODE_ENV)
}

var opn = require('opn')
var path = require('path')
var express = require('express')
var webpack = require('webpack')
var proxyMiddleware = require('http-proxy-middleware')
var webpackConfig = process.env.NODE_ENV === 'testing'
  ? require('./webpack.prod.conf')
  : require('./webpack.dev.conf')

// default port where dev server listens for incoming traffic
var port = process.env.PORT || config.dev.port
// automatically open browser, if not set will be false
var autoOpenBrowser = !!config.dev.autoOpenBrowser
// Define HTTP proxies to your custom API backend
// https://github.com/chimurai/http-proxy-middleware
var proxyTable = config.dev.proxyTable

var app = express()
var compiler = webpack(webpackConfig)

var devMiddleware = require('webpack-dev-middleware')(compiler, {
  publicPath: webpackConfig.output.publicPath,
  quiet: true
})

var hotMiddleware = require('webpack-hot-middleware')(compiler, {
  log: () =&gt; {}
})
// force page reload when html-webpack-plugin template changes
@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.11">compiler.plugin('compilation', function (compilation) {
  compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {
    hotMiddleware.publish({ action: 'reload' })
    cb()
  })
})

</t>
<t tx="ekr.20180824113325.13">// proxy api requests

Object.keys(proxyTable).forEach(function (context) {
  var options = proxyTable[context]
  if (typeof options === 'string') {
    options = { target: options }
  }
  app.use(proxyMiddleware(options.filter || context, options))
})

// handle fallback for HTML5 history API
app.use(require('connect-history-api-fallback')())

// serve webpack bundle output
app.use(devMiddleware)

// enable hot-reload and state-preserving
// compilation error display
app.use(hotMiddleware)

// serve pure static assets
var staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)
app.use(staticPath, express.static('./static'))

var uri = 'http://localhost:' + port

</t>
<t tx="ekr.20180824113325.14">devMiddleware.waitUntilValid(function () {
  console.log('&gt; Listening at ' + uri + '\n')
})

</t>
<t tx="ekr.20180824113325.15">module.exports = app.listen(port, function (err) {
  if (err) {
    console.log(err)
    return
  }

  // when env is testing, don't need open it
  if (autoOpenBrowser &amp;&amp; process.env.NODE_ENV !== 'testing') {
    opn(uri)
  }
})
</t>
<t tx="ekr.20180824113325.16">@path C:/leo.repo/leovue/build/

var path = require('path')
var config = require('../config')
var ExtractTextPlugin = require('extract-text-webpack-plugin')

@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.17">exports.assetsPath = function (_path) {
  var assetsSubDirectory = process.env.NODE_ENV === 'production'
    ? config.build.assetsSubDirectory
    : config.dev.assetsSubDirectory
  return path.posix.join(assetsSubDirectory, _path)
}

</t>
<t tx="ekr.20180824113325.18">exports.cssLoaders = function (options) {
  options = options || {}

  var cssLoader = {
    loader: 'css-loader',
    options: {
      minimize: process.env.NODE_ENV === 'production',
      sourceMap: options.sourceMap
    }
  }

  // generate loader string to be used with extract text plugin
  function generateLoaders (loader, loaderOptions) {
    var loaders = [cssLoader]
    if (loader) {
      loaders.push({
        loader: loader + '-loader',
        options: Object.assign({}, loaderOptions, {
          sourceMap: options.sourceMap
        })
      })
    }

    // Extract CSS when that option is specified
    // (which is the case during production build)
    if (options.extract) {
      return ExtractTextPlugin.extract({
        use: loaders,
        fallback: 'vue-style-loader'
      })
    } else {
      return ['vue-style-loader'].concat(loaders)
    }
  }

  // http://vuejs.github.io/vue-loader/en/configurations/extract-css.html
  return {
    css: generateLoaders(),
    postcss: generateLoaders(),
    less: generateLoaders('less'),
    sass: generateLoaders('sass', { indentedSyntax: true }),
    scss: generateLoaders('sass'),
    stylus: generateLoaders('stylus'),
    styl: generateLoaders('stylus')
  }
}
</t>
<t tx="ekr.20180824113325.2"></t>
<t tx="ekr.20180824113325.20">// Generate loaders for standalone style files (outside of .vue)

exports.styleLoaders = function (options) {
  var output = []
  var loaders = exports.cssLoaders(options)
  for (var extension in loaders) {
    var loader = loaders[extension]
    output.push({
      test: new RegExp('\\.' + extension + '$'),
      use: loader
    })
  }
  return output
}
</t>
<t tx="ekr.20180824113325.21">@path C:/leo.repo/leovue/build/
var utils = require('./utils')
var config = require('../config')
var isProduction = process.env.NODE_ENV === 'production'

module.exports = {
  loaders: utils.cssLoaders({
    sourceMap: isProduction
      ? config.build.productionSourceMap
      : config.dev.cssSourceMap,
    extract: isProduction
  })
}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.22">@path C:/leo.repo/leovue/build/
var path = require('path')
var utils = require('./utils')
var config = require('../config')
var vueLoaderConfig = require('./vue-loader.conf')
const GoogleFontsPlugin = require("google-fonts-webpack-plugin")

@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.23">function resolve (dir) {
  return path.join(__dirname, '..', dir)
}
</t>
<t tx="ekr.20180824113325.24">@path C:/leo.repo/leovue/build/

var utils = require('./utils')
var webpack = require('webpack')
var config = require('../config')
var merge = require('webpack-merge')
var baseWebpackConfig = require('./webpack.base.conf')
var HtmlWebpackPlugin = require('html-webpack-plugin')
var FriendlyErrorsPlugin = require('friendly-errors-webpack-plugin')

// add hot-reload related code to entry chunks
@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.25">Object.keys(baseWebpackConfig.entry).forEach(function (name) {
  baseWebpackConfig.entry[name] = ['./build/dev-client'].concat(baseWebpackConfig.entry[name])
})

</t>
<t tx="ekr.20180824113325.26">@path C:/leo.repo/leovue/build/
var path = require('path')
var utils = require('./utils')
var webpack = require('webpack')
var config = require('../config')
var merge = require('webpack-merge')
var baseWebpackConfig = require('./webpack.base.conf')
var CopyWebpackPlugin = require('copy-webpack-plugin')
var HtmlWebpackPlugin = require('html-webpack-plugin')
var ExtractTextPlugin = require('extract-text-webpack-plugin')
var OptimizeCSSPlugin = require('optimize-css-assets-webpack-plugin')

var env = process.env.NODE_ENV === 'testing'
  ? require('../config/test.env')
  : config.build.env

var webpackConfig = merge(baseWebpackConfig, {
  module: {
    rules: utils.styleLoaders({
      sourceMap: config.build.productionSourceMap,
      extract: true
    })
  },
  devtool: config.build.productionSourceMap ? '#source-map' : false,
  output: {
    path: config.build.assetsRoot,
    filename: utils.assetsPath('js/[name].js?[chunkhash]'),
    chunkFilename: utils.assetsPath('js/[id].js?[chunkhash]')
  },
  plugins: [
    &lt;&lt; plugins &gt;&gt;
  ]
})

if (config.build.productionGzip) {
  var CompressionWebpackPlugin = require('compression-webpack-plugin')

  webpackConfig.plugins.push(
    new CompressionWebpackPlugin({
      asset: '[path].gz[query]',
      algorithm: 'gzip',
      test: new RegExp(
        '\\.(' +
        config.build.productionGzipExtensions.join('|') +
        ')$'
      ),
      threshold: 10240,
      minRatio: 0.8
    })
  )
}

if (config.build.bundleAnalyzerReport) {
  var BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin
  webpackConfig.plugins.push(new BundleAnalyzerPlugin())
}

module.exports = webpackConfig

@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.28">@path C:/leo.repo/leovue/build/
// This is the webpack config used for unit tests.

var utils = require('./utils')
var webpack = require('webpack')
var merge = require('webpack-merge')
var baseConfig = require('./webpack.base.conf')

var webpackConfig = merge(baseConfig, {
  // use inline sourcemap for karma-sourcemap-loader
  module: {
    rules: utils.styleLoaders()
  },
  devtool: '#inline-source-map',
  plugins: [
    new webpack.DefinePlugin({
      'process.env': require('../config/test.env')
    })
  ]
})

// no need for app entry during tests
delete webpackConfig.entry

module.exports = webpackConfig
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.3">@path C:/leo.repo/leovue/build/
require('./check-versions')()

process.env.NODE_ENV = 'production'

var ora = require('ora')
var rm = require('rimraf')
var path = require('path')
var chalk = require('chalk')
var webpack = require('webpack')
var config = require('../config')
var webpackConfig = require('./webpack.prod.conf')

var spinner = ora('building for production...')
spinner.start()

rm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =&gt; {
  if (err) throw err
  @others
})
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.4">webpack(webpackConfig, function (err, stats) {
  spinner.stop()
  if (err) throw err
  process.stdout.write(stats.toString({
    colors: true,
    modules: false,
    children: false,
    chunks: false,
    chunkModules: false
  }) + '\n\n')

  console.log(chalk.cyan('  Build complete.\n'))
  console.log(chalk.yellow(
    '  Tip: built files are meant to be served over an HTTP server.\n' +
    '  Opening index.html over file:// won\'t work.\n'
  ))
})
</t>
<t tx="ekr.20180824113325.5">@path C:/leo.repo/leovue/build/
var chalk = require('chalk')
var semver = require('semver')
var packageConfig = require('../package.json')

@others
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113325.6">function exec (cmd) {
  return require('child_process').execSync(cmd).toString().trim()
}

</t>
<t tx="ekr.20180824113325.7">module.exports = function () {
  var warnings = []
  for (var i = 0; i &lt; versionRequirements.length; i++) {
    var mod = versionRequirements[i]
    if (!semver.satisfies(mod.currentVersion, mod.versionRequirement)) {
      warnings.push(mod.name + ': ' +
        chalk.red(mod.currentVersion) + ' should be ' +
        chalk.green(mod.versionRequirement)
      )
    }
  }

  if (warnings.length) {
    console.log('')
    console.log(chalk.yellow('To use this template, you must update following to modules:'))
    console.log()
    for (var i = 0; i &lt; warnings.length; i++) {
      var warning = warnings[i]
      console.log('  ' + warning)
    }
    console.log()
    process.exit(1)
  }
}
</t>
<t tx="ekr.20180824113325.8">@path C:/leo.repo/leovue/build/
/* eslint-disable */
require('eventsource-polyfill')
var hotClient = require('webpack-hot-middleware/client?noInfo=true&amp;reload=true')

hotClient.subscribe(function (event) {
  if (event.action === 'reload') {
    window.location.reload()
  }
})

@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113819.2"></t>
<t tx="ekr.20180824113819.3">@path C:/leo.repo/leovue/config/
var merge = require('webpack-merge')
var prodEnv = require('./prod.env')

module.exports = merge(prodEnv, {
  NODE_ENV: '"development"'
})
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113819.4">@path C:/leo.repo/leovue/config/
// see http://vuejs-templates.github.io/webpack for documentation.
var path = require('path')

module.exports = {
  build: {
    env: require('./prod.env'),
    index: path.resolve(__dirname, '../dist/index.html'),
    assetsRoot: path.resolve(__dirname, '../dist'),
    assetsSubDirectory: 'static',
    assetsPublicPath: '',
    productionSourceMap: true,
    // Gzip off by default as many popular static hosts such as
    // Surge or Netlify already gzip all static assets for you.
    // Before setting to `true`, make sure to:
    // npm install --save-dev compression-webpack-plugin
    productionGzip: false,
    productionGzipExtensions: ['js', 'css'],
    // Run the build command with an extra argument to
    // View the bundle analyzer report after build finishes:
    // `npm run build --report`
    // Set to `true` or `false` to always turn it on or off
    bundleAnalyzerReport: process.env.npm_config_report
  },
  dev: {
    env: require('./dev.env'),
    port: 8080,
    autoOpenBrowser: true,
    assetsSubDirectory: 'static',
    assetsPublicPath: '/',
    proxyTable: {},
    // CSS Sourcemaps off by default because relative paths are "buggy"
    // with this option, according to the CSS-Loader README
    // (https://github.com/webpack/css-loader#sourcemaps)
    // In our experience, they generally work as expected,
    // just be aware of this issue when enabling this option.
    cssSourceMap: false
  }
}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113819.5">@path C:/leo.repo/leovue/config/
module.exports = {
  NODE_ENV: '"production"'
}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824113819.6">@path C:/leo.repo/leovue/config/
var merge = require('webpack-merge')
var devEnv = require('./dev.env')

module.exports = merge(devEnv, {
  NODE_ENV: '"testing"'
})
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824114057.2"></t>
<t tx="ekr.20180824114057.3">@path C:/leo.repo/leovue/
// http://eslint.org/docs/user-guide/configuring

module.exports = {
  root: true,
  parser: 'babel-eslint',
  parserOptions: {
    sourceType: 'module'
  },
  env: {
    browser: true,
  },
  // https://github.com/feross/standard/blob/master/RULES.md#javascript-standard-style
  extends: 'standard',
  // required to lint *.vue files
  plugins: [
    'html'
  ],
  // add your custom rules here
  'rules': {
    // 'no-unused-vars': 0,
    // allow paren-less arrow functions
    'no-unreachable' : 0,
    'arrow-parens': 0,
    // allow async-await
    'generator-star-spacing': 0,
    // allow debugger during development
    'no-debugger': process.env.NODE_ENV === 'production' ? 2 : 0
  }
}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180824114057.4">@path C:/leo.repo/leovue/
// https://github.com/michael-ciniawsky/postcss-load-config

module.exports = {
  "plugins": {
    // to edit target browsers: use "browserlist" field in package.json
    "autoprefixer": {}
  }
}
@language javascript
@tabwidth -2
</t>
<t tx="ekr.20180828135907.1">@language rest
@wrap

Info: https://github.com/leo-editor/leo-editor/issues/735

I'm still having trouble installing LeoVue following these instructions.</t>
<t tx="ekr.20201121054023.1">@language html

&lt;html&gt;
&lt;head&gt;
  &lt;&lt; head &gt;&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;&lt; body &gt;&gt;
&lt;/body&gt;
&lt;/html&gt;

</t>
<t tx="ekr.20201121054023.10">&lt;script type="text/template" id="rgarticles"&gt;
&lt;div class="table-component"&gt;
  &lt;table-component
    @rowClick="this.$parent.dataTableClick"
    :data="[
    {{ data.articles.forEach(article =&gt; { }}
      {{ if (article.type.text === 'Article') { }}
      {
        title: '&lt;div&gt;{{- article.title.text}}&lt;/div&gt;',
        date: '&lt;div&gt;{{- moment(article.date).format('YYYY-MM') }}&lt;/div&gt;',
        reads: '{{- article.reads.replace(/[a-zA-Z]/g, '')}}',
        readNum: {{- article.reads.replace(/[,a-zA-Z]/g, '')}}
      },
      {{ } }}
    {{ }) }}
     ]"
  sort-order="asc"
  sort-by="readNum"&gt;
    &lt;table-column show="title" label="Title" header-class="title-cell" cell-class="title-cell"&gt;&lt;/table-column&gt;
    &lt;table-column show="date" label="Date" header-class="data-cell" cell-class="data-cell"&gt;&lt;/table-column&gt;
    &lt;table-column show="reads" label="Reads" sort-by="readNum" cell-class="right"&gt;&lt;/table-column&gt;
    &lt;table-column show="readNum" label="R" data-type="numeric" :hidden="true" &gt;&lt;/table-column&gt;
  &lt;/table-component&gt;
&lt;/div&gt;
&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.11">&lt;script type="text/template" id="repec-articles"&gt;
  &lt;div class="table-component"&gt;
    &lt;table-component
      @rowClick="this.$parent.dataTableClick"
      :data="[
      {{ data.articles.forEach(article =&gt; { }}
        {
          title: '&lt;div&gt;{{- article.bibliographic.name}}&lt;/div&gt;',
          year: '&lt;div&gt;{{- article.bibliographic.creation_date || article.bibliographic.year }}&lt;/div&gt;'
        },
      {{ }) }}
     ]"
      sort-order="asc"&gt;
      &lt;table-column show="title" label="Title" header-class="title-cell" cell-class="title-cell"&gt;&lt;/table-column&gt;
      &lt;table-column show="year" label="Year" header-class="data-cell" cell-class="data-cell"&gt;&lt;/table-column&gt;
    &lt;/table-component&gt;
  &lt;/div&gt;
&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.12">&lt;script type="text/template" id="rgcitations"&gt;
CITATIONS
&lt;/script&gt;
&lt;script type="text/template" id="rgjournal"&gt;
  &lt;h2&gt;{{= data.title}}&lt;/h2&gt;

  &lt;div&gt;Publisher: {{= data.publisher}}&lt;/div&gt;
  &lt;div class="hshim"&gt;&lt;/div&gt;
  &lt;div class="publication-abstract"&gt;
    {{= data.description}}
  &lt;/div&gt;
  &lt;div class="hshim"&gt;&lt;/div&gt;
  &lt;table class="lv-rowset"&gt;
    &lt;tr&gt;&lt;th&gt;RG Impact: &lt;/th&gt;&lt;td&gt;{{= data.rgimpact}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Halflife: &lt;/th&gt;&lt;td&gt;{{= data.halflife}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Immediacy:  &lt;/th&gt;&lt;td&gt;{{= data.immediacy}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Eigen Factor: &lt;/th&gt;&lt;td&gt;{{= data.eigenfactor}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Influence: &lt;/th&gt;&lt;td&gt;{{= data.influence}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Website: &lt;/th&gt;&lt;td&gt;{{= data.website}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;ISSN:  &lt;/th&gt;&lt;td&gt;{{= data.issn}}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;th&gt;Doctype:  &lt;/th&gt;&lt;td&gt;{{= data.doctype}}&lt;/td&gt;&lt;/tr&gt;
  &lt;/table&gt;

&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.13">&lt;!-- Global site tag (gtag.js) - Google Analytics --&gt;
&lt;script async src="https://www.googletagmanager.com/gtag/js?id=UA-118289537-1"&gt;&lt;/script&gt;
&lt;script&gt;
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-118289537-1');
&lt;/script&gt;
&lt;script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
  var scroll = new SmoothScroll('a[href*="#"]');
&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.14">&lt;style type="text/css"&gt;
  #app {
    font-family: Avenir, Nunito, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale
  }
  H1, H2 {
    margin-bottom: 1.5rem;
  }
  .lv-rowset DIV {
    flex: 50%
  }
&lt;/style&gt;

</t>
<t tx="ekr.20201121054023.2">&lt;script defer src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML'&gt;&lt;/script&gt;
&lt;link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet"&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.0/moment.min.js"&gt;&lt;/script&gt;
&lt;!-- include next two libs if using mermaid --&gt;
&lt;!-- onsenui is used by the mermaid tooltips --&gt;
&lt;script defer src='https://cdn.rawgit.com/OnsenUI/OnsenUI-dist/2.0.0-beta.5/js/onsenui.min.js'&gt;&lt;/script&gt;
&lt;script src='https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js'&gt;&lt;/script&gt;

&lt;link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"&gt;
&lt;script&gt;
  &lt;&lt; set window.lconfig &gt;&gt;
&lt;/script&gt;
&lt;meta charset="utf-8"&gt;
&lt;title&gt;LeoVue&lt;/title&gt;
&lt;meta name="keywords" content="knowledge organization, outlines, outliner, outlining IDE"&gt;
&lt;meta name="description" content="Knowledge Organization with Leo and LeoVue: organize content and files into complex outlines."&gt;

</t>
<t tx="ekr.20201121054023.3">&lt;div id="app"&gt;&lt;/div&gt;
&lt;!-- built files will be auto injected --&gt;
&lt;&lt; static footer &gt;&gt;
&lt;&lt; templates &gt;&gt;
&lt;&lt; global site tag &gt;&gt;
&lt;&lt; style &gt;&gt;
</t>
<t tx="ekr.20201121054023.4">&lt;!-- static footer --&gt;
&lt;script type="text/ons-template" id="popover.html"&gt;
  &lt;ons-popover direction="up down" cancelable&gt;
    &lt;div style="text-align: center; opacity: 0.7;" id="popover.content.html"&gt;
      &lt;p&gt;This is a popover!&lt;/p&gt;
      &lt;p&gt;&lt;small&gt;Click the background to remove the popover.&lt;/small&gt;&lt;/p&gt;
    &lt;/div&gt;
  &lt;/ons-popover&gt;
&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.5">&lt;!-- templates --&gt;
&lt;&lt; rgarticle &gt;&gt;
&lt;&lt; rgarticle-brief &gt;&gt;
&lt;&lt; repec &gt;&gt;
&lt;&lt; rgauthor &gt;&gt;
&lt;&lt; rgarticles &gt;&gt;
&lt;&lt; repec-articles &gt;&gt;
&lt;&lt; rgcitiations &gt;&gt;
&lt;!-- End templates --&gt;
</t>
<t tx="ekr.20201121054023.6">&lt;script type="text/template" id="rgarticle"&gt;
  &lt;div class="rg"&gt;
    &lt;div class="publication-header"&gt;
      &lt;h1&gt;{{- data.title }}&lt;/h1&gt;
      &lt;div class="publication-meta-text"&gt;
        &lt;strong&gt;
          &lt;span&gt;
            &lt;a target="_blank" href="{{- data.url }}"&gt;Article&lt;/a&gt;
            in
          &lt;a target="_blank" href="//www.researchgate.net/{{- data.journal.href}}"&gt;{{- data.journal.text }}&lt;/a&gt;
        &lt;/span&gt;
        &lt;/strong&gt;
        &lt;span&gt; with {{- data.reads }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;ul&gt;
          {{ data.authors.forEach(author =&gt; { }}
          &lt;li class="publication-author-list__item"&gt;
            &lt;div&gt;
              &lt;a target="_blank" href="{{- author.name.href }}" &gt;{{- author.name.text }}&lt;/a&gt;
            &lt;/div&gt;
            {{ if (author.rating){ }}
            &lt;span class="bars-1"/&gt;
            {{ } }}
            &lt;span&gt;{{- author.rating }}	{{- author.institution }}&lt;/span&gt;
          &lt;/li&gt;
          {{ }) }}
        &lt;/ul&gt;
      &lt;/div&gt;
      {{ if (data.tldr) { }}
      &lt;div&gt;
        &lt;strong&gt;tldr&lt;/strong&gt;
      &lt;/div&gt;
      &lt;div class="publication-abstract"&gt;{{- data.tldr }}&lt;/div&gt;
      &lt;div class="hshim"&gt;&lt;/div&gt;
      {{ } }}
      &lt;div class="publication-abstract"&gt;
        &lt;div&gt;
          &lt;strong&gt;Abstract&lt;/strong&gt;
        &lt;/div&gt;
        &lt;div&gt;{{= data.abstract }}&lt;/div&gt;
        &lt;div class="references"&gt;{{- data.references }} References&lt;/div&gt;
      &lt;/div&gt;
      {{ if (data.correction) { }}
      &lt;div class="publication-abstract"&gt;
       &lt;div class="hshim"&gt;&lt;/div&gt;
        &lt;div&gt;
          &lt;strong&gt;Correction&lt;/strong&gt;
        &lt;/div&gt;
        &lt;div&gt;{{- data.correction.text }} &lt;a href="{{- data.correction.href }}"&gt;Details&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      {{ } }}
      &lt;div class="footer"&gt;
        &lt;a target="_blank" href="{{- data.url }}"&gt;See this article on ResearchGate.&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.7">&lt;script type="text/template" id="rgarticle-brief"&gt;
  &lt;div class="rg"&gt;
    &lt;div class="publication-header"&gt;
      &lt;h1&gt;{{- data.title.text }}&lt;/h1&gt;
      &lt;div class="publication-meta-text"&gt;
        &lt;span&gt; {{- data['type'].text}}: {{- data.date }} with {{- data.reads }}&lt;/span&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;ul&gt;
          {{ data.authors.forEach(author =&gt; { }}
          &lt;li class="publication-author-list__item_brief"&gt;
            &lt;div&gt;
              &lt;a target="_blank" href="http://researchget.net/{{- author.author.href }}" &gt;{{- author.author.text }}&lt;/a&gt;
            &lt;/div&gt;
          &lt;/li&gt;
          {{ }) }}
        &lt;/ul&gt;
      &lt;/div&gt;
      &lt;div class="publication-abstract"&gt;
        &lt;div&gt;
          &lt;strong&gt;Abstract&lt;/strong&gt;
        &lt;/div&gt;
        &lt;div&gt;{{- data.abstract }}&lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="footer"&gt;
        &lt;a target="_blank" href="https://www.researchgate.net/{{- data.title.href}}"&gt;See this article on ResearchGate.&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.8">&lt;script type="text/template" id="repec"&gt;
  &lt;div class="rg"&gt;
    &lt;div class="publication-header"&gt;
      &lt;h1&gt;{{- data.bibliographic.name }}&lt;/h1&gt;
      &lt;div&gt;
         {{- data.author }}
      &lt;/div&gt;
      &lt;div class="series"&gt;
        {{- data.series &amp;&amp; data.series.name }} ({{- data.bibliographic.creation_date || data.bibliographic.year }})
      &lt;/div&gt;
      &lt;div class="publication-abstract"&gt;
        &lt;div&gt;
          &lt;strong&gt;Abstract&lt;/strong&gt;
        &lt;/div&gt;
        &lt;div&gt;{{- data.abstract }}&lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="footer"&gt;
        &lt;a target="_blank" href="{{- data.link}}"&gt;See this article on IDEAS.&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;
</t>
<t tx="ekr.20201121054023.9">&lt;script type="text/template" id="rgauthor"&gt;
  &lt;div class="rg"&gt;
    &lt;h2&gt;Author&lt;/h2&gt;
    &lt;div&gt;{{- data.name}} {{- data.title}}&lt;/div&gt;
    &lt;div&gt;
      &lt;a target="_blank" href="{{- data.institution.href}}"&gt;{{- data.institution.text}}&lt;/a&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;a target="_blank" href="{{- data.department.href}}"&gt;{{- data.department.text}}&lt;/a&gt;
    &lt;/div&gt;
    &lt;h3&gt;ResearchGate Stats&lt;/h3&gt;
    &lt;div&gt;Citations: {{- data.citations}}&lt;/div&gt;
    &lt;div&gt;Reads: {{- data.reads}}&lt;/div&gt;
    &lt;div&gt;Research Items: {{- data.researchItems}}&lt;/div&gt;
    &lt;div&gt;&lt;a target="_blank" href="{{- data.url}}"&gt;Profile&lt;/a&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/script&gt;
</t>
<t tx="ekr.20201121054222.1">@language javascript

window.lconfig = {
  "showAppTitle": false,
  "showHeader": true,
  "docTitle": "LeoVue Documentation and Example Content",
  "filename": "static/docs",
  "firstNodeAsTitle": true,
  "baseMode": "t", // t = outline, for other types, see below
  "activeBackgroundColor": "#01FF70", //
  "itemArrow": "\uf105", // ▹▷▶›&gt;►
  "leftPaneWidth": '300px',
  "leftPaneBackground": '#fafafa',
  "leftPanePadding": '10px',
  "contentPaneWidth": '780px',
  "coverPage": true,
  "viewTypes": [
    {"name": "Outline", "type": "t"},
    {"name": "Inline", "type": "a"},
    {"name": "Graphic Tree", "type": "d"},
    // {"name": "Dendrogram", "type": "z"},
    {"name": "Nested Menu", "type": "n"}
  ],
  githubRibbon: {
    text: 'Fork me on GitHub',
    linkUrl: 'https://github.com/kaleguy/leovue',
    fixed: true
  },
  // dataSources have a template name as key
  // the template object has one key: host
  // the host will have the node title appended to fetch JSON which gets processed via the template
  "dataSources":
    {
      "rgarticle": {
        "host": "http://localhost:8888/rg/article?title=",
      },
      "rgarticle-brief": {
        "host": "http://localhost:8888/rg/article?title=",
      },
      "rgarticles": {
        "host": "http://localhost:8888/rg/articles?name=",
      },
      "rgauthor": {
        "host": "http://localhost:8888/rg/author?name=",
      },
      "rgcitations": {
        "host": "http://localhost:8888/rg/citations?name=",
      },
      "rgjournal": {
        "host": "http://localhost:8888/rg/journal?name=",
      }
    }
}
// "leftPaneWidth": 'calc(50vw - 300px)',
// "rightPaneWidth": 'calc(50vw + 300px)',
// "leftPanePadding": 'calc(50vw - 600px)',</t>
<t tx="ekr.20201121054655.1">var versionRequirements = [
  {
    name: 'node',
    currentVersion: semver.clean(process.version),
    versionRequirement: packageConfig.engines.node
  },
  {
    name: 'npm',
    currentVersion: exec('npm --version'),
    versionRequirement: packageConfig.engines.npm
  }
]

</t>
<t tx="ekr.20201121055257.1">module.exports = {
  entry: {
    app: './src/main.js'
  },
  output: {
    path: config.build.assetsRoot,
    filename: '[name].js',
    publicPath: process.env.NODE_ENV === 'production'
      ? config.build.assetsPublicPath
      : config.dev.assetsPublicPath
  },
  resolve: {
    extensions: ['.js', '.vue', '.json'],
    alias: {
      'vue$': 'vue/dist/vue.esm.js',
      '@': resolve('src'),
    }
  },
/*  plugins: [
    new GoogleFontsPlugin({
      fonts: [
        { family: "Nunito" },
        { family: "Nunito Sans" }
      ]
      /!* ...options *!/
    })
  ],*/
  module: {
    rules: [
      {
        test: /\.(js|vue)$/,
        loader: 'eslint-loader',
        enforce: "pre",
        include: [resolve('src'), resolve('test')],
        options: {
          formatter: require('eslint-friendly-formatter')
        }
      },
      {
        test: /\.vue$/,
        loader: 'vue-loader',
        options: vueLoaderConfig
      },
      {
        test: /\.js$/,
        exclude: /defiant/,
        loader: 'babel-loader',
        include: [resolve('src'), resolve('test'), resolve('node_modules/vue-awesome')]
      },
      {
        test: /\.(png|jpe?g|gif|svg)(\?.*)?$/,
        loader: 'url-loader',
        query: {
          limit: 10000,
          name: utils.assetsPath('img/[name].[hash:7].[ext]')
        }
      },
      {
        test: /\.css$/,
        use: [ 'style-loader', 'css-loader' ]
      },
      {
        test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,
        loader: 'url-loader',
        query: {
          limit: 10000,
          name: utils.assetsPath('fonts/[name].[hash:7].[ext]')
        }
      }
    ]
  }
}
</t>
<t tx="ekr.20201121055514.1">module.exports = merge(baseWebpackConfig, {
  module: {
    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap })
  },
  // cheap-module-eval-source-map is faster for development
  devtool: '#cheap-module-eval-source-map',
  plugins: [
    new webpack.DefinePlugin({
      'process.env': config.dev.env
    }),
    // https://github.com/glenjamin/webpack-hot-middleware#installation--usage
    new webpack.HotModuleReplacementPlugin(),
    new webpack.NoEmitOnErrorsPlugin(),
    // https://github.com/ampedandwired/html-webpack-plugin
    new HtmlWebpackPlugin({
      filename: 'index.html',
      template: 'index.html',
      inject: true
    }),
    new FriendlyErrorsPlugin()
  ]
})

</t>
<t tx="ekr.20201121055856.1">// http://vuejs.github.io/vue-loader/en/workflow/production.html
new webpack.DefinePlugin({
  'process.env': env
}),

new webpack.optimize.UglifyJsPlugin({
  compress: {
    warnings: false
  },
  mangle: {
    keep_fnames: true,
  },
  sourceMap: true
}),

// extract css into its own file
new ExtractTextPlugin({
  filename: utils.assetsPath('css/[name].css?[contenthash]')
}),

// Compress extracted CSS. We are using this plugin so that possible
// duplicated CSS from different components can be deduped.
new OptimizeCSSPlugin(),

// generate dist index.html with correct asset hash for caching.
// you can customize output by editing /index.html
// see https://github.com/ampedandwired/html-webpack-plugin
new HtmlWebpackPlugin({
  filename: process.env.NODE_ENV === 'testing'
    ? 'index.html'
    : config.build.index,
  template: 'index.html',
  inject: true,
  minify: {
    removeComments: true,
    collapseWhitespace: true,
    removeAttributeQuotes: true
    // more options:
    // https://github.com/kangax/html-minifier#options-quick-reference
  },
  // necessary to consistently work with multiple chunks via CommonsChunkPlugin
  chunksSortMode: 'dependency'
}),

// split vendor js into its own file
new webpack.optimize.CommonsChunkPlugin({
  name: 'vendor',
        minChunks: function (module, count) {
    // any required modules inside node_modules are extracted to vendor
    return (
      module.resource &amp;&amp;
      /\.js$/.test(module.resource) &amp;&amp;
      module.resource.indexOf(
        path.join(__dirname, '../node_modules')
      ) === 0
    )
  }
}),

// extract webpack runtime and module manifest to its own file in order to
// prevent vendor hash from being updated whenever app bundle is updated
new webpack.optimize.CommonsChunkPlugin({
  name: 'manifest',
  chunks: ['vendor']
}),

// copy custom static assets
new CopyWebpackPlugin([
  {
    from: path.resolve(__dirname, '../static'),
    to: config.build.assetsSubDirectory,
    ignore: ['.*']
  }
])</t>
<t tx="ekr.20201121061450.1">@language json
@tabwidth -2
{
  "name": "leo-vue",
  "version": "2.0.2",
  "description": "Use the Leo Outlining Editor to Create Vue Web Apps",
  "author": "Joe Orr",
  "private": false,
  "scripts": {
    "dev": "node build/dev-server.js",
    "build": "node build/build.js",
    "unit": "cross-env BABEL_ENV=test karma start test/unit/karma.conf.js --single-run",
    "e2e": "node test/e2e/runner.js",
    "test": "npm run unit &amp;&amp; npm run e2e",
    "lint": "eslint --ext .js,.vue src test/unit/specs test/e2e/specs",
    "deploy": "rm -Rf docs &amp;&amp; cp -Rf dist docs &amp;&amp; rm dist/static/js/vendor.js.map &amp;&amp; cp README.md docs &amp;&amp; cp -Rf examples docs/examples &amp;&amp; cp -Rf screencasts docs/screencasts",
    "build-static": "node build/build-static.es6"
  },
  "dependencies": {
    "@johmun/vue-tags-input": "^2.1.0",
    "axios": "^0.19.0",
    "bootstrap-vue": "^2.0.0-rc.11",
    "chart.js": "^2.7.1",
    "component-tip": "^3.0.3",
    "count-words": "^1.0.12",
    "css-loader": "^0.28.11",
    "d3": "^5.0.0",
    "dataframe-js": "^1.2.4",
    "fork-me-on-github-vue": "^1.0.7",
    "h5o": "^0.11.3",
    "highlight.js": "^9.12.0",
    "js-yaml": "^3.11.0",
    "leaflet": "^1.4.0",
    "lodash": "^4.17.10",
    "lodash.pull": "^4.1.0",
    "lunr": "^2.1.3",
    "marked": "^0.7.0",
    "moment": "^2.22.0",
    "moment-range": "^4.0.1",
    "numeral": "^2.0.6",
    "papaparse": "^4.3.6",
    "split-string-words": "^1.0.0",
    "stopword": "^0.2.4",
    "style-loader": "^0.23.0",
    "timeline-vuejs": "1.0.2",
    "tooltip.js": "^1.3.0",
    "uri-parse-lib": "^2.1.3",
    "v-tooltip": "^2.0.0-rc.14",
    "velocity-animate": "^1.5.0",
    "vue": "^2.5.4",
    "vue-awesome": "^3.0.0",
    "vue-chartjs": "^3.0.0",
    "vue-clickaway": "^2.1.0",
    "vue-info-card": "^0.1.1",
    "vue-instant": "^1.0.2",
    "vue-markdown": "^2.2.4",
    "vue-resize-directive": "^1.0.0",
    "vue-router": "^3.0.1",
    "vue-star-rating": "^1.5.1",
    "vue-table-component": "^1.8.0",
    "vue-template-compiler": "^2.3.3",
    "vue-youtube-embed": "^2.1.1",
    "vue2-leaflet": "^2.0.3",
    "vuewordcloud": "^18.7.11",
    "vuex": "^3.0.1",
    "vuex-router-sync": "^5.0.0"
  },
  "devDependencies": {
    "autoprefixer": "^7.1.6",
    "babel-core": "^6.24.1",
    "babel-eslint": "^8.0.2",
    "babel-loader": "^7.1.2",
    "babel-plugin-istanbul": "^4.1.5",
    "babel-plugin-transform-runtime": "^6.22.0",
    "babel-preset-env": "^1.5.1",
    "babel-register": "^6.24.1",
    "chai": "^4.1.2",
    "chalk": "^2.3.0",
    "chromedriver": "^2.29.0",
    "connect-history-api-fallback": "^1.3.0",
    "copy-webpack-plugin": "^4.0.1",
    "cross-env": "^5.1.1",
    "cross-spawn": "^6.0.4",
    "css-loader": "^0.28.11",
    "escape-html": "^1.0.3",
    "eslint": "^4.11.0",
    "eslint-config-standard": "^10.2.1",
    "eslint-friendly-formatter": "^3.0.0",
    "eslint-loader": "^1.7.1",
    "eslint-plugin-html": "^4.0.0",
    "eslint-plugin-import": "^2.8.0",
    "eslint-plugin-node": "^7.0.1",
    "eslint-plugin-promise": "^3.4.0",
    "eslint-plugin-standard": "^3.0.1",
    "eventsource-polyfill": "^0.9.6",
    "express": "^4.15.3",
    "extract-text-webpack-plugin": "^3.0.2",
    "file-loader": "^1.1.5",
    "friendly-errors-webpack-plugin": "^1.1.3",
    "fs": "0.0.1-security",
    "function-bind": "^1.1.0",
    "google-fonts-webpack-plugin": "^0.4.3",
    "html-webpack-plugin": "^2.28.0",
    "http-proxy-middleware": "^0.17.3",
    "inject-loader": "^3.0.1",
    "karma": "^2.0.0",
    "karma-coverage": "^1.1.1",
    "karma-mocha": "^1.3.0",
    "karma-phantomjs-launcher": "^1.0.2",
    "karma-sinon-chai": "^1.3.1",
    "karma-sourcemap-loader": "^0.3.7",
    "karma-spec-reporter": "0.0.32",
    "karma-webpack": "^2.0.2",
    "lolex": "^2.3.0",
    "markdown-it": "^8.3.1",
    "markdown-it-imsize": "^2.0.1",
    "mocha": "^5.0.0",
    "nightwatch": "^0.9.15",
    "node-sass": "^4.5.3",
    "opn": "^5.1.0",
    "optimize-css-assets-webpack-plugin": "^3.2.0",
    "ora": "^1.2.0",
    "phantomjs-prebuilt": "^2.1.14",
    "rimraf": "^2.6.0",
    "sass-loader": "^6.0.5",
    "selenium-server": "^3.4.0",
    "semver": "^5.3.0",
    "sinon": "^4.1.2",
    "sinon-chai": "^2.10.0",
    "url-loader": "^0.6.2",
    "vue-loader": "^14.0.3",
    "vue-style-loader": "^3.0.3",
    "webpack": "^3.8.1",
    "webpack-bundle-analyzer": "&gt;=3.3.2",
    "webpack-dev-middleware": "^2.0.3",
    "webpack-hot-middleware": "^2.18.0",
    "webpack-merge": "^4.1.1"
  },
  "engines": {
    "node": "&gt;= 4.0.0",
    "npm": "&gt;= 3.0.0"
  },
  "browserslist": [
    "&gt; 1%",
    "last 2 versions",
    "not ie &lt;= 8"
  ],
  "repository": {
    "type": "git",
    "url": "git+https://github.com/kaleguy/leovue.git"
  },
  "keywords": [
    "JSON",
    "forms",
    "form.io"
  ],
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/kaleguy/leovue/issues"
  },
  "homepage": "https://kaleguy.github.io/leovue/"
}
</t>
<t tx="ekr.20201121174232.1">@language css

@import './assets/global.sass'
@import './assets/vue-instant.css'
@import '~leaflet/dist/leaflet.css'

$mycolor: #2c3e50

HTML, BODY
  margin: 0
  padding: 0
  height: 100%
  width: 100%

H1
  margin: 4px

#app
  font-family: Avenir, Nunito, Helvetica, Arial, sans-serif
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale
  color: $mycolor
  margin: 0
  padding: 0
  height: 100%

.right-pane .text, .inline .text
  margin-top: 20px
  border: none
  background-color: transparent
  resize: none
  outline: none
  font-size: 16px
  // height: 100%
  white-space: pre-line
  width: 100%

.directive
  color: #990000;

.md
  margin-left: 10px
  margin-top: 10px
  max-width: 700px
  padding-right: 10px

.unselectable
 -moz-user-select: -moz-none
 -khtml-user-select: none
 -webkit-user-select: none
 //  Introduced in IE 10.
 //  See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
 -ms-user-select: none
 user-select: none

A, .link
  color: #42b983
  cursor: pointer
  text-decoration: underline

.flip-container
  width: 80%
  max-width: 600px
  margin-left: 40px
  margin-bottom: 60px
  SVG
    height: inherit !important</t>
<t tx="ekr.20201121174320.1">@language javascript
export default {
  name: 'app',
  methods: {
    &lt;&lt; drag methods &gt;&gt;
  },
  mounted () {
    let filename = 'static/docs'
    if (window.lconfig.filename) {
      filename = window.lconfig.filename
    }
    if (!this.$store.initializedData) {
      this.$store.dispatch('loadLeo', {filename, route: this.$route})
    }
    this.$store.dispatch('setMessages')
  }
}</t>
<t tx="ekr.20201224071404.1"></t>
<t tx="ekr.20201224071854.1"></t>
<t tx="ekr.20201224073243.1">const tnodes = xml.getElementsByTagName('t')
let textItems = {}
for (let i = 0; i &lt; tnodes.length; i++) {
  let el = tnodes[i]
  let elText = el.textContent
  let a = el.getAttribute('tx')
  a = a.replace(/\./g, '_')
  a = a.replace(/^.*?_/, '')
  if (startId) {
    a = startId + '-' + a
  }
  if (
    (/^@language /.test(elText)) &amp;&amp;
    (!/^@language html/.test(elText)) &amp;&amp;
    (!/^@language md/.test(elText))
  ) {
    // elText = escape(elText)
  }
  textItems[a] = elText
}</t>
<t tx="ekr.20201224073343.1">const vnodes = xml.getElementsByTagName('v')
let pid
for (let i = 0; i &lt; vnodes.length; i++) {
  pid = i + 1
  if (startId) {
    pid = startId + '-' + pid
  }
  vnodes[i].setAttribute('id', '"' + pid + '"')
}</t>
<t tx="ekr.20201224073436.1">let oParser = null
if (parser) {
  oParser = new parser()
} else {
  oParser = new DOMParser()
}</t>
</tnodes>
</leo_file>
